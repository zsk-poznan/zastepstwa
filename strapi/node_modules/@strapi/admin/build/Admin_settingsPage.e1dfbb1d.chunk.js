"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[5895],{44289:(Y,A,a)=>{a.r(A),a.d(A,{SettingsPage:()=>Ze,default:()=>ke});var t=a(32735),v=a(10938),s=a(5141),w=a(11856),V=a(5636),Ce=a(99357),Ee=a(28492),ae=a(81430),Me=a(16540),Z=a(9808),L=a(78330),E=a(95602),le=a(90662),re=a(14983),G=a(82372),K=a.n(G);const Ve=()=>{const{formatMessage:m}=(0,V.useIntl)();(0,v.useFocusWhenNavigate)();const y=(0,v.useAppInfos)(),{shouldUpdateStrapi:p,latestStrapiReleaseTag:b,strapiVersion:u}=y,U=y.communityEdition?"app.components.UpgradePlanModal.text-ce":"app.components.UpgradePlanModal.text-ee";return t.createElement(w.Layout,null,t.createElement(v.SettingsPageTitle,{name:"Application"}),t.createElement(Me.Main,null,t.createElement(w.HeaderLayout,{title:m({id:"Settings.application.title",defaultMessage:"Overview"}),subtitle:m({id:"Settings.application.description",defaultMessage:"Administration panel\u2019s global information"})}),t.createElement(w.ContentLayout,null,t.createElement(Z.Box,{hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:7,paddingBottom:7,paddingRight:6,paddingLeft:6},t.createElement(le.Stack,{spacing:5},t.createElement(E.Typography,{variant:"delta",as:"h3"},m({id:"global.details",defaultMessage:"Details"})),t.createElement(L.Grid,{paddingTop:1},t.createElement(L.GridItem,{col:6,s:12},t.createElement(E.Typography,{variant:"sigma",textColor:"neutral600"},m({id:"Settings.application.strapiVersion",defaultMessage:"strapi version"})),t.createElement(E.Typography,{as:"p"},"v",u),t.createElement(re.Link,{href:y.communityEdition?"https://discord.strapi.io":"https://support.strapi.io/support/home",isExternal:!0,endIcon:t.createElement(K(),null)},m({id:"Settings.application.get-help",defaultMessage:"Get help"}))),t.createElement(L.GridItem,{col:6,s:12},t.createElement(E.Typography,{variant:"sigma",textColor:"neutral600"},m({id:"Settings.application.edition-title",defaultMessage:"current plan"})),t.createElement(E.Typography,{as:"p"},m({id:U,defaultMessage:`${y.communityEdition?"Community Edition":"Enterprise Edition"}`})))),t.createElement(L.Grid,{paddingTop:1},t.createElement(L.GridItem,{col:6,s:12},p&&t.createElement(re.Link,{href:`https://github.com/strapi/strapi/releases/tag/${b}`,isExternal:!0,endIcon:t.createElement(K(),null)},m({id:"Settings.application.link-upgrade",defaultMessage:"Upgrade your admin panel"}))),t.createElement(L.GridItem,{col:6,s:12},t.createElement(re.Link,{href:"https://strapi.io/pricing-self-hosted",isExternal:!0,endIcon:t.createElement(K(),null)},m({id:"Settings.application.link-pricing",defaultMessage:"See all pricing plans"})))),t.createElement(Z.Box,{paddingTop:1},t.createElement(E.Typography,{variant:"sigma",textColor:"neutral600"},m({id:"Settings.application.node-version",defaultMessage:"node version"})),t.createElement(E.Typography,{as:"p"},y.nodeVersion)))))))};var xe=a(3704),me=a.n(xe);const We=m=>me()(m,p=>p.links).map(p=>(0,ae.ot)(p.Component,p.to,p.exact||!1)),Fe=m=>m.filter(y=>!y.links.every(p=>p.isDisplayed===!1));var Se=a(46053),Q=a(93587),D=a.n(Q),j=void 0,de=function(y,p,b){return new Promise(function(u,U){var ne=function(h){try{J(b.next(h))}catch(qe){U(qe)}},N=function(h){try{J(b.throw(h))}catch(qe){U(qe)}},J=function(h){return h.done?u(h.value):Promise.resolve(h.value).then(ne,N)};J((b=b.apply(y,p)).next())})},Be=function(){return window&&window.strapi&&window.strapi.isEE?a(97971).Z:a(16988).Z}(),we=function(){return window&&window.strapi&&window.strapi.isEE?a(49776).Z:a(10333).Z}(),Oe=[{Component:function(){return{default:we}},to:"/settings/roles",exact:!0},{Component:function(){return{default:Be}},to:"/settings/roles/duplicate/:id",exact:!0},{Component:function(){return{default:Be}},to:"/settings/roles/new",exact:!0},{Component:function(){return de(j,null,D().mark(function y(){var p;return D().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,a.e(2544).then(a.bind(a,3079));case 2:return p=u.sent,u.abrupt("return",p);case 4:case"end":return u.stop()}},y)}))},to:"/settings/roles/:id",exact:!0},{Component:function(){return de(j,null,D().mark(function y(){var p;return D().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,a.e(5199).then(a.bind(a,79005));case 2:return p=u.sent,u.abrupt("return",p);case 4:case"end":return u.stop()}},y)}))},to:"/settings/users",exact:!0},{Component:function(){return de(j,null,D().mark(function y(){var p;return D().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,a.e(4263).then(a.bind(a,28976));case 2:return p=u.sent,u.abrupt("return",p);case 4:case"end":return u.stop()}},y)}))},to:"/settings/users/:id",exact:!0},{Component:function(){return de(j,null,D().mark(function y(){var p;return D().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Promise.all([a.e(4715),a.e(5162)]).then(a.bind(a,31854));case 2:return p=u.sent,u.abrupt("return",p);case 4:case"end":return u.stop()}},y)}))},to:"/settings/webhooks/create",exact:!0},{Component:function(){return de(j,null,D().mark(function y(){var p;return D().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Promise.all([a.e(4715),a.e(5162)]).then(a.bind(a,24305));case 2:return p=u.sent,u.abrupt("return",p);case 4:case"end":return u.stop()}},y)}))},to:"/settings/webhooks/:id",exact:!0},{Component:function(){return de(j,null,D().mark(function y(){var p;return D().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,a.e(4121).then(a.bind(a,17542));case 2:return p=u.sent,u.abrupt("return",p);case 4:case"end":return u.stop()}},y)}))},to:"/settings/webhooks",exact:!0},{Component:function(){return de(j,null,D().mark(function y(){var p;return D().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,a.e(8056).then(a.bind(a,11116));case 2:return p=u.sent,u.abrupt("return",p);case 4:case"end":return u.stop()}},y)}))},to:"/settings/api-tokens",exact:!0},{Component:function(){return de(j,null,D().mark(function y(){var p;return D().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,a.e(4299).then(a.bind(a,96854));case 2:return p=u.sent,u.abrupt("return",p);case 4:case"end":return u.stop()}},y)}))},to:"/settings/api-tokens/create",exact:!0},{Component:function(){return de(j,null,D().mark(function y(){var p;return D().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,a.e(92).then(a.bind(a,14932));case 2:return p=u.sent,u.abrupt("return",p);case 4:case"end":return u.stop()}},y)}))},to:"/settings/api-tokens/:id",exact:!0}];const Ie=Oe;var je=function(){return window&&window.strapi&&window.strapi.isEE?a(78251).Z:a(23027).Z}();const Ue=[].concat((0,Se.Z)(je),(0,Se.Z)(Ie));var q=a(60216),x=a.n(q),$=a(89420),T=Object.defineProperty,se=Object.defineProperties,ee=Object.getOwnPropertyDescriptors,H=Object.getOwnPropertySymbols,te=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,F=(m,y,p)=>y in m?T(m,y,{enumerable:!0,configurable:!0,writable:!0,value:p}):m[y]=p,z=(m,y)=>{for(var p in y||(y={}))te.call(y,p)&&F(m,p,y[p]);if(H)for(var p of H(y))B.call(y,p)&&F(m,p,y[p]);return m},be=(m,y)=>se(m,ee(y));const Re=({menu:m})=>{const{formatMessage:y}=(0,V.useIntl)(),b=Fe(m).map(U=>be(z({},U),{title:U.intlLabel,links:U.links.map(ne=>be(z({},ne),{title:ne.intlLabel,name:ne.id}))})),u=y({id:"global.settings",defaultMessage:"Settings"});return t.createElement($.SubNav,{ariaLabel:u},t.createElement($.SubNavHeader,{label:u}),t.createElement($.SubNavSections,null,b.map(U=>t.createElement($.SubNavSection,{key:U.id,label:y(U.intlLabel)},U.links.map(ne=>t.createElement($.SubNavLink,{as:s.NavLink,withBullet:ne.hasNotification,to:ne.to,key:ne.id},y(ne.intlLabel)))))))};Re.propTypes={menu:x().array.isRequired};const Ne=Re;function Ze(){const{settingId:m}=(0,s.useParams)(),{settings:y}=(0,v.useStrapiApp)(),{formatMessage:p}=(0,V.useIntl)(),{isLoading:b,menu:u}=(0,Ee.Te)(),U=(0,t.useMemo)(()=>(0,ae.WW)(Ue.map(({to:J,Component:ie,exact:h})=>(0,ae.ot)(ie,J,h))),[]),ne=We(y);if(b)return t.createElement(v.LoadingIndicatorPage,null);if(!m)return t.createElement(s.Redirect,{to:"/settings/application-infos"});const N=p({id:"global.settings",defaultMessage:"Settings"});return t.createElement(w.Layout,{sideNav:t.createElement(Ne,{menu:u})},t.createElement(Ce.Helmet,{title:N}),t.createElement(s.Switch,null,t.createElement(s.Route,{path:"/settings/application-infos",component:Ve,exact:!0}),U,ne))}const ke=(0,t.memo)(Ze)},16988:(Y,A,a)=>{a.d(A,{Z:()=>w});var t=a(32735),v=a(5141);const w=()=>t.createElement(v.Redirect,{to:"/404"})},65150:(Y,A,a)=>{a.d(A,{Z:()=>v});const v=!0},3665:(Y,A,a)=>{a.d(A,{Z:()=>v});const v=!0},3288:(Y,A,a)=>{a.d(A,{Z:()=>v});const v=!0},16602:(Y,A,a)=>{a.d(A,{Z:()=>v});const v=!0},71218:(Y,A,a)=>{a.d(A,{Z:()=>v});const v=!0},13806:(Y,A,a)=>{a.d(A,{Z:()=>or});var t=a(32735),v=a(60216),s=a.n(v),w=a(10938),V=a(81700),Ce=a(23973),Ee=a.n(Ce),ae=a(86834),Me=a.n(ae),Z=a(5636),L=a(9808),E=a(19615),le=a(98978),re=a.n(le),G=a(67950),K=a(67793),$e=a.n(K),Ve=a(31476),xe=a.n(Ve),me=a(35980),W=a(19192),We=a(33795),ce=a.n(We),Fe=a(9086),Se=a.n(Fe),Q=a(28492),D=a(42258),j=a.n(D),de=a(44526);const Be=E.default.div`
  position: relative;

  ${({hasConditions:o,disabled:e,theme:n})=>o&&`
    &:before {
      content: '';
      position: absolute;
      top: -3px;
      left: -10px;
      width: 6px;
      height: 6px;
      border-radius: ${20/16}rem;;
      background: ${e?n.colors.neutral100:n.colors.primary600};
    }
  `}
`,we=({onClick:o,className:e,hasConditions:n,variant:r})=>{const{formatMessage:i}=(0,Z.useIntl)();return t.createElement(Be,{hasConditions:n,className:e},t.createElement(de.Button,{variant:r,startIcon:t.createElement(j(),null),onClick:o},i({id:"global.settings",defaultMessage:"Settings"})))};we.defaultProps={className:null,hasConditions:!1,variant:"tertiary"},we.propTypes={onClick:s().func.isRequired,className:s().string,hasConditions:s().bool,variant:s().string};const Oe=(0,E.default)(we)``;var Ie=a(27635),je=a(90662),Ue=a(4122),q=a(71657),x=a(95602),$=a(49415),T=a(81346),se=a.n(T),ee=a(23940),H=a.n(ee),te=a(15453),B=a(46053),F=a(25716);const z=`${120/16}rem`,be=`${200/16}rem`,Re=`${53/16}rem`;function Ne(o,e){var n=typeof Symbol!="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!n){if(Array.isArray(o)||(n=Ze(o))||e&&o&&typeof o.length=="number"){n&&(o=n);var r=0,i=function(){};return{s:i,n:function(){return r>=o.length?{done:!0}:{done:!1,value:o[r++]}},e:function(f){throw f},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=!0,c=!1,d;return{s:function(){n=n.call(o)},n:function(){var f=n.next();return l=f.done,f},e:function(f){c=!0,d=f},f:function(){try{!l&&n.return!=null&&n.return()}finally{if(c)throw d}}}}function Ze(o,e){if(!!o){if(typeof o=="string")return ke(o,e);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor&&(n=o.constructor.name),n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ke(o,e)}}function ke(o,e){(e==null||e>o.length)&&(e=o.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=o[n];return r}var m=Object.defineProperty,y=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,u=function(e,n,r){return n in e?m(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r},U=function(e,n){for(var r in n||(n={}))p.call(n,r)&&u(e,r,n[r]);if(y){var i=Ne(y(n)),l;try{for(i.s();!(l=i.n()).done;){var r=l.value;b.call(n,r)&&u(e,r,n[r])}}catch(c){i.e(c)}finally{i.f()}}return e},ne=function(){return window&&window.strapi&&window.strapi.isEE?a(10265).Z:a(65150).Z}(),N=(0,E.default)(W.Flex).withConfig({displayName:"ActionRow__FlexWrapper",componentId:"sc-1bqpgdl-0"})(["height:",";"],Re),J=function(e){var n=e.arrayOfOptionsGroupedByCategory,r=e.isFormDisabled,i=e.isGrey,l=e.label,c=e.name,d=e.onChange,g=e.value,f=(0,Z.useIntl)(),C=f.formatMessage,S=n.reduce(function(R,I){var P=(0,G.Z)(I,2),O=P[0],k=P[1],_={label:H()(O),children:k.map(function(fe){return{label:fe.displayName,value:fe.id}})};return[].concat((0,B.Z)(R),[_])},[]),M=Object.values(g).map(function(R){return Object.entries(R).filter(function(I){var P=(0,G.Z)(I,2),O=P[1];return O}).map(function(I){var P=(0,G.Z)(I,1),O=P[0];return O})}).flat(),X=function(I){var P=(0,G.Z)(n,1),O=(0,G.Z)(P[0],2),k=O[1],_=k.reduce(function(fe,ue){return U((0,te.Z)({},ue.id,I.includes(ue.id)),fe)},{});d(c,_)};return t.createElement(N,{as:"li",background:i?"neutral100":"neutral0"},t.createElement(W.Flex,{paddingLeft:6,style:{width:180}},t.createElement(x.Typography,{variant:"sigma",textColor:"neutral600"},C({id:"Settings.permissions.conditions.can",defaultMessage:"Can"}),"\xA0"),t.createElement(x.Typography,{variant:"sigma",title:l,textColor:"primary600",ellipsis:!0},C({id:"Settings.roles.form.permissions.".concat(l.toLowerCase()),defaultMessage:l})),t.createElement(x.Typography,{variant:"sigma",textColor:"neutral600"},"\xA0",C({id:"Settings.permissions.conditions.when",defaultMessage:"When"}))),t.createElement(L.Box,{style:{maxWidth:430,width:"100%"}},t.createElement(F.MultiSelectNested,{id:c,customizeContent:function(I){return"".concat(I.length," currently selected")},onChange:X,value:M,options:S,disabled:r||ne})))};J.propTypes={arrayOfOptionsGroupedByCategory:s().array.isRequired,isFormDisabled:s().bool.isRequired,isGrey:s().bool.isRequired,label:s().string.isRequired,name:s().string.isRequired,value:s().object.isRequired,onChange:s().func.isRequired};const ie=J;var h=a(92891);const qe=(o,e)=>o.reduce((n,r)=>(n[r.id]=(0,h.get)(e,r.id,!1),n),{}),Wn=(o,e)=>o.reduce((n,r)=>{const[i,l]=r,c=qe(l,e);return n[i]=c,n},{}),$n=(o,e,n)=>o.reduce((r,i)=>{const l=(0,h.get)(e,[...i.pathToConditionsObject,"conditions"],{}),c=Wn(n,l);return r[i.pathToConditionsObject.join("..")]=c,r},{});var Vn=Object.defineProperty,Et=Object.getOwnPropertySymbols,Zn=Object.prototype.hasOwnProperty,Un=Object.prototype.propertyIsEnumerable,bt=(o,e,n)=>e in o?Vn(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n,Pt=(o,e)=>{for(var n in e||(e={}))Zn.call(e,n)&&bt(o,n,e[n]);if(Et)for(var n of Et(e))Un.call(e,n)&&bt(o,n,e[n]);return o};const At=({actions:o,headerBreadCrumbs:e,isFormDisabled:n,onClosed:r,onToggle:i})=>{const{formatMessage:l}=(0,Z.useIntl)(),{availableConditions:c,modifiedData:d,onChangeConditions:g}=(0,Q.$_)(),f=(0,t.useMemo)(()=>Object.entries(se()(c,"category")),[c]),C=o.filter(({isDisplayed:P,hasSomeActionsSelected:O,hasAllActionsSelected:k})=>P&&(O||k)),S=(0,t.useMemo)(()=>$n(C,d,f),[C,d,f]),[M,X]=(0,t.useState)(S),R=(P,O)=>{X((0,$.default)(k=>{k[P]||(k[P]={}),k[P].default||(k[P].default={}),k[P].default=O}))},I=()=>{const P=Object.entries(M).reduce((O,k)=>{const[_,fe]=k,ue=Object.values(fe).reduce((ye,Pe)=>Pt(Pt({},ye),Pe),{});return O[_]=ue,O},{});g(P),i()};return t.createElement(Ue.ModalLayout,{labelledBy:"condition-modal-breadcrumbs",onClose:r},t.createElement(Ue.ModalHeader,null,t.createElement(q.Breadcrumbs,{id:"condition-modal-breadcrumbs",label:e.join(", ")},e.map(P=>t.createElement(q.Crumb,{key:P},H()(l({id:P,defaultMessage:P})))))),t.createElement(L.Box,{padding:8},t.createElement(je.Stack,{spacing:6},t.createElement(x.Typography,{variant:"beta",as:"h2"},l({id:"Settings.permissions.conditions.define-conditions",defaultMessage:"Define conditions"})),t.createElement(L.Box,null,t.createElement(Ie.Divider,null)),t.createElement(L.Box,null,C.length===0&&t.createElement(x.Typography,null,l({id:"Settings.permissions.conditions.no-actions",defaultMessage:"You first need to select actions (create, read, update, ...) before defining conditions on them."})),t.createElement("ul",null,C.map(({actionId:P,label:O,pathToConditionsObject:k},_)=>{const fe=k.join("..");return t.createElement(ie,{key:P,arrayOfOptionsGroupedByCategory:f,label:O,isFormDisabled:n,isGrey:_%2===0,name:fe,onChange:R,value:ce()(M,fe,{})})}))))),t.createElement(Ue.ModalFooter,{startActions:t.createElement(de.Button,{variant:"tertiary",onClick:i},l({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:t.createElement(de.Button,{onClick:I},l({id:"Settings.permissions.conditions.apply",defaultMessage:"Apply"}))}))};At.propTypes={actions:s().arrayOf(s().shape({actionId:s().string.isRequired,checkboxName:s().string,hasSomeActionsSelected:s().bool.isRequired,hasAllActionsSelected:s().bool,isDisplayed:s().bool.isRequired,label:s().string})).isRequired,headerBreadCrumbs:s().arrayOf(s().string).isRequired,isFormDisabled:s().bool.isRequired,onClosed:s().func.isRequired,onToggle:s().func.isRequired};const Tt=At,ot=E.default.div`
  width: ${z};
`,St=(0,E.default)(W.Flex)`
  padding-right: ${({theme:o})=>o.spaces[2]};
  overflow: hidden;
  flex: 1;
  ${({isCollapsable:o})=>o&&"cursor: pointer;"}
`;var Gn=Object.defineProperty,Ot=Object.getOwnPropertySymbols,Kn=Object.prototype.hasOwnProperty,Hn=Object.prototype.propertyIsEnumerable,Rt=(o,e,n)=>e in o?Gn(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n,Xn=(o,e)=>{for(var n in e||(e={}))Kn.call(e,n)&&Rt(o,n,e[n]);if(Ot)for(var n of Ot(e))Hn.call(e,n)&&Rt(o,n,e[n]);return o};const at=({children:o,isCollapsable:e,isActive:n,isFormDisabled:r,label:i,onChange:l,onClick:c,checkboxName:d,someChecked:g,value:f})=>{const{formatMessage:C}=(0,Z.useIntl)();return t.createElement(W.Flex,{alignItems:"center",paddingLeft:6,style:{width:be,flexShrink:0}},t.createElement(L.Box,{paddingRight:2},t.createElement(me.BaseCheckbox,{name:d,"aria-label":C({id:"Settings.permissions.select-all-by-permission",defaultMessage:"Select all {label} permissions"},{label:i}),disabled:r,onValueChange:S=>l({target:{name:d,value:S}}),indeterminate:g,value:f})),t.createElement(St,Xn({title:i,alignItems:"center",isCollapsable:e},e&&{onClick:c,"aria-expanded":n,onKeyDown:({key:S})=>(S==="Enter"||S===" ")&&c(),tabIndex:0,role:"button"}),t.createElement(x.Typography,{fontWeight:n?"bold":"",textColor:n?"primary600":"neutral800",ellipsis:!0},H()(i)),o))};at.defaultProps={children:null,checkboxName:"",onChange:()=>{},value:!1,someChecked:!1,isCollapsable:!1},at.propTypes={checkboxName:s().string,children:s().node,label:s().string.isRequired,isCollapsable:s().bool,isFormDisabled:s().bool.isRequired,onChange:s().func,onClick:s().func.isRequired,someChecked:s().bool,value:s().bool,isActive:s().bool.isRequired};const Dt=(0,t.memo)(at),xt=o=>(0,h.isObject)(o)?(0,h.flattenDeep)(Object.values(o).map(e=>(0,h.isObject)(e)?xt(e):e)):[],Ye=xt,rt=o=>o?Object.keys(o).reduce((e,n)=>(n!=="conditions"&&(e[n]=o[n]),e),{}):null,He=o=>{const e=rt(o),n=Ye(e);if(!n.length)return{hasAllActionsSelected:!1,hasSomeActionsSelected:!1};const r=n.every(l=>l),i=n.some(l=>l)&&!r;return{hasAllActionsSelected:r,hasSomeActionsSelected:i}},zn=(o,e,n)=>o.map(({actionId:r,isDisplayed:i,applyToProperties:l,label:c})=>{if(!i)return{actionId:r,hasSomeActionsSelected:!1,isDisplayed:i};const d=[...n.split(".."),r],g=(0,h.isEmpty)(l)?[...d,"properties","enabled"]:d,f=g.join(".."),C=(0,h.get)(e,[...d,"conditions"],null),S=Ye(C).some(I=>I);if((0,h.isEmpty)(l)){const I=(0,h.get)(e,g,!1);return{actionId:r,checkboxName:f,hasAllActionsSelected:I,hasConditions:S,hasSomeActionsSelected:I,isDisplayed:i,isParentCheckbox:!1,label:c,pathToConditionsObject:d}}const M=(0,h.get)(e,g,null),{hasAllActionsSelected:X,hasSomeActionsSelected:R}=He(M);return{actionId:r,checkboxName:f,hasAllActionsSelected:X,hasConditions:S,hasSomeActionsSelected:R,isDisplayed:i,isParentCheckbox:!0,label:c,pathToConditionsObject:d}});var Yn=a(60672),Qn=a.n(Yn);const _e=(0,E.default)(Qn())`
  display: none;
  width: ${10/16}rem;
  transform: rotate(${({$isActive:o})=>o?"180":"0"}deg);
  margin-left: ${({theme:o})=>o.spaces[2]};
`,et=o=>`
  ${x.Typography} {
    color: ${o.colors.primary600};
    font-weight: ${o.fontWeights.bold}
  }
  ${_e} {
    display: block;
    path {
      fill: ${o.colors.primary600}
    };
  }
`;var It=function(){return window&&window.strapi&&window.strapi.isEE?a(47902).Z:a(3665).Z}(),Lt=function o(e,n){return`
  `.concat(Mt,` {
    background-color: `).concat(e.colors.primary100,`;
    color: `).concat(e.colors.primary600,`;
    border-radius: `).concat(n?"2px 2px 0 0":"2px",`;
  }
  `).concat(Bt,` {
    display: flex;
  }
  `).concat(Oe,` {
    display: block;
  }
  &:hover {
   `).concat(et(e),`
  }

  &:focus-within {
    `).concat(function(r){var i=r.theme,l=r.isActive;return o(i,l)},`
  }
  
`)},Mt=E.default.div.withConfig({displayName:"Collapse__Wrapper",componentId:"sc-132fji1-0"})(["flex:1;display:flex;align-items:center;height:",";background-color:",";border:1px solid transparent;"],Re,function(o){var e=o.isGrey,n=o.theme;return e?n.colors.neutral100:n.colors.neutral0}),Jn=E.default.div.withConfig({displayName:"Collapse__BoxWrapper",componentId:"sc-132fji1-1"})(["display:inline-flex;min-width:100%;","{display:none;}"," &:hover{","}"],Oe,function(o){var e=o.isActive,n=o.theme;return e&&Lt(n,e)},function(o){var e=o.theme,n=o.isActive;return Lt(e,n)}),Ft=(0,E.default)(W.Flex).withConfig({displayName:"Collapse__Cell",componentId:"sc-132fji1-2"})(["width:",";position:relative;"],z),Bt=(0,E.default)(L.Box).withConfig({displayName:"Collapse__Chevron",componentId:"sc-132fji1-3"})(["display:none;svg{width:11px;}*{fill:",";}"],function(o){var e=o.theme;return e.colors.primary600}),wt=E.default.span.withConfig({displayName:"Collapse__TinyDot",componentId:"sc-132fji1-4"})(["position:absolute;top:-6px;left:37px;width:6px;height:6px;border-radius:20px;background:",";"],function(o){var e=o.theme;return e.colors.primary600}),qn=(0,E.default)(L.Box).withConfig({displayName:"Collapse__AbsoluteBox",componentId:"sc-132fji1-5"})(["position:absolute;right:9px;transform:translateY(10px);"]),jt=function(e){var n=e.availableActions,r=e.isActive,i=e.isGrey,l=e.isFormDisabled,c=e.label,d=e.onClickToggle,g=e.pathToData,f=(0,t.useState)(!1),C=(0,G.Z)(f,2),S=C[0],M=C[1],X=(0,Z.useIntl)(),R=X.formatMessage,I=(0,Q.$_)(),P=I.modifiedData,O=I.onChangeParentCheckbox,k=I.onChangeSimpleCheckbox,_=function(){M(function(ge){return!ge})},fe=function(){M(!1)},ue=ce()(P,g.split(".."),{}),ye=(0,t.useMemo)(function(){return Object.keys(ue).reduce(function(oe,ge){return oe[ge]=Se()(ue[ge],"conditions"),oe},{})},[ue]),Pe=He(ye),ve=Pe.hasAllActionsSelected,Xe=Pe.hasSomeActionsSelected,pe=(0,t.useMemo)(function(){return zn(n,P,g)},[n,P,g]),Ae=pe.some(function(oe){var ge=oe.hasConditions;return ge});return t.createElement(Jn,{isActive:r},t.createElement(Mt,{isGrey:i},t.createElement(Dt,{isCollapsable:!0,isFormDisabled:l,label:c,checkboxName:g,onChange:O,onClick:d,someChecked:Xe,value:ve,isActive:r},t.createElement(Bt,{paddingLeft:2},r?t.createElement(xe(),null):t.createElement($e(),null))),t.createElement(W.Flex,{style:{flex:1}},pe.map(function(oe){var ge=oe.actionId,he=oe.hasConditions,Te=oe.hasAllActionsSelected,De=oe.hasSomeActionsSelected,Ke=oe.isDisplayed,Le=oe.isParentCheckbox,Ge=oe.checkboxName,Qe=oe.label;return Ke?Le?t.createElement(Ft,{key:ge,justifyContent:"center",alignItems:"center"},he&&t.createElement(wt,null),t.createElement(me.BaseCheckbox,{disabled:l||It,name:Ge,"aria-label":R({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(Qe," ").concat(c)}),onValueChange:function(ze){O({target:{name:Ge,value:ze}})},indeterminate:De,value:Te})):t.createElement(Ft,{key:ge,justifyContent:"center",alignItems:"center"},he&&t.createElement(wt,null),t.createElement(me.BaseCheckbox,{disabled:l||It,indeterminate:he,name:Ge,onValueChange:function(ze){k({target:{name:Ge,value:ze}})},value:Te})):t.createElement(ot,{key:ge})})),S&&t.createElement(Tt,{headerBreadCrumbs:[c,"app.components.LeftMenuLinkContainer.settings"],actions:pe,isFormDisabled:l,onClosed:fe,onToggle:_})),t.createElement(qn,null,t.createElement(Oe,{onClick:_,hasConditions:Ae})))};jt.propTypes={availableActions:s().array.isRequired,isActive:s().bool.isRequired,isGrey:s().bool.isRequired,isFormDisabled:s().bool.isRequired,label:s().string.isRequired,onClickToggle:s().func.isRequired,pathToData:s().string.isRequired};const _n=jt,eo=(o,e)=>o.map(n=>{const r=Array.isArray(n.applyToProperties)&&n.applyToProperties.indexOf(e)!==-1&&n.isDisplayed;return{label:n.label,actionId:n.actionId,isActionRelatedToCurrentProperty:r}}),Nt=(0,E.default)(W.Flex)`
  width: ${z};
  flex-shrink: 0;
`,to=(0,E.default)(W.Flex)`
  width: ${be};
  height: ${Re};
  flex-shrink: 0;
`,kt=({headers:o,label:e})=>{const{formatMessage:n}=(0,Z.useIntl)(),r=n({id:"Settings.roles.form.permission.property-label",defaultMessage:"{label} permissions"},{label:e});return t.createElement(W.Flex,null,t.createElement(to,{alignItems:"center",paddingLeft:6},t.createElement(x.Typography,{variant:"sigma",textColor:"neutral500"},r)),o.map(i=>i.isActionRelatedToCurrentProperty?t.createElement(Nt,{justifyContent:"center",key:i.label},t.createElement(x.Typography,{variant:"sigma",textColor:"neutral500"},n({id:`Settings.roles.form.permissions.${i.label.toLowerCase()}`,defaultMessage:i.label}))):t.createElement(Nt,{key:i.label})))};kt.propTypes={headers:s().arrayOf(s().shape({label:s().string.isRequired,isActionRelatedToCurrentProperty:s().bool.isRequired})).isRequired,label:s().string.isRequired};const no=kt,oo=E.default.span`
  color: ${({theme:o})=>o.colors.danger700};
  padding-left: ${({theme:o})=>o.spaces[1]}px;
`,Wt=()=>t.createElement(oo,null,"*");var ao=Object.defineProperty,ro=Object.defineProperties,so=Object.getOwnPropertyDescriptors,$t=Object.getOwnPropertySymbols,io=Object.prototype.hasOwnProperty,lo=Object.prototype.propertyIsEnumerable,Vt=(o,e,n)=>e in o?ao(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n,co=(o,e)=>{for(var n in e||(e={}))io.call(e,n)&&Vt(o,n,e[n]);if($t)for(var n of $t(e))lo.call(e,n)&&Vt(o,n,e[n]);return o},uo=(o,e)=>ro(o,so(e));const po=(o,e)=>o.map(n=>{const r=Array.isArray(n.subjects)&&n.subjects.indexOf(e)!==-1;return uo(co({},n),{isDisplayed:r})});var mo=Object.defineProperty,Zt=Object.getOwnPropertySymbols,go=Object.prototype.hasOwnProperty,fo=Object.prototype.propertyIsEnumerable,Ut=(o,e,n)=>e in o?mo(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n,yo=(o,e)=>{for(var n in e||(e={}))go.call(e,n)&&Ut(o,n,e[n]);if(Zt)for(var n of Zt(e))fo.call(e,n)&&Ut(o,n,e[n]);return o};const ho=(0,E.default)(L.Box)`
  transform: translate(-4px, -12px);

  &:before {
    content: '';
    width: ${4/16}rem;
    height: ${12/16}rem;
    background: ${({theme:o})=>o.colors.primary200};
    display: block;
  }
`,vo=E.default.svg`
  position: relative;
  flex-shrink: 0;
  transform: translate(-0.5px, -1px);

  * {
    fill: ${({theme:o,color:e})=>o.colors[e]};
  }
`,st=o=>t.createElement(ho,null,t.createElement(vo,yo({width:"20",height:"23",viewBox:"0 0 20 23",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.02477 14.7513C8.65865 17.0594 11.6046 18.6059 17.5596 18.8856C18.6836 18.9384 19.5976 19.8435 19.5976 20.9688V20.9688C19.5976 22.0941 18.6841 23.0125 17.5599 22.9643C10.9409 22.6805 6.454 20.9387 3.75496 17.1258C0.937988 13.1464 0.486328 7.39309 0.486328 0.593262H4.50974C4.50974 7.54693 5.06394 11.9813 7.02477 14.7513Z",fill:"#D9D8FF"})));st.defaultProps={fill:"primary200"},st.propTypes={fill:s().string};const Co=(0,t.memo)(st);function Eo(o,e){var n=typeof Symbol!="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!n){if(Array.isArray(o)||(n=bo(o))||e&&o&&typeof o.length=="number"){n&&(o=n);var r=0,i=function(){};return{s:i,n:function(){return r>=o.length?{done:!0}:{done:!1,value:o[r++]}},e:function(f){throw f},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=!0,c=!1,d;return{s:function(){n=n.call(o)},n:function(){var f=n.next();return l=f.done,f},e:function(f){c=!0,d=f},f:function(){try{!l&&n.return!=null&&n.return()}finally{if(c)throw d}}}}function bo(o,e){if(!!o){if(typeof o=="string")return Gt(o,e);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor&&(n=o.constructor.name),n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gt(o,e)}}function Gt(o,e){(e==null||e>o.length)&&(e=o.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=o[n];return r}var Po=Object.defineProperty,Ao=Object.defineProperties,To=Object.getOwnPropertyDescriptors,Kt=Object.getOwnPropertySymbols,So=Object.prototype.hasOwnProperty,Oo=Object.prototype.propertyIsEnumerable,Ht=function(e,n,r){return n in e?Po(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r},Ro=function(e,n){for(var r in n||(n={}))So.call(n,r)&&Ht(e,r,n[r]);if(Kt){var i=Eo(Kt(n)),l;try{for(i.s();!(l=i.n()).done;){var r=l.value;Oo.call(n,r)&&Ht(e,r,n[r])}}catch(c){i.e(c)}finally{i.f()}}return e},Do=function(e,n){return Ao(e,To(n))},Xt=function(){return window&&window.strapi&&window.strapi.isEE?a(38292).Z:a(16602).Z}(),zt=(0,E.default)(W.Flex).withConfig({displayName:"SubActionRow__Cell",componentId:"sc-7y8yzq-0"})(["width:",";position:relative;"],z),xo=(0,E.default)(W.Flex).withConfig({displayName:"SubActionRow__RowWrapper",componentId:"sc-7y8yzq-1"})(["height:",";"],Re),Io=(0,E.default)(L.Box).withConfig({displayName:"SubActionRow__Wrapper",componentId:"sc-7y8yzq-2"})(["padding-left:","rem;"],31/16),Lo=(0,E.default)(L.Box).withConfig({displayName:"SubActionRow__LeftBorderTimeline",componentId:"sc-7y8yzq-3"})(["border-left:",";"],function(o){var e=o.isVisible,n=o.theme;return e?"4px solid ".concat(n.colors.primary200):"4px solid transparent"}),Mo=(0,E.default)(W.Flex).withConfig({displayName:"SubActionRow__RowStyle",componentId:"sc-7y8yzq-4"})(["padding-left:",";width:","px;"," ",";"],function(o){var e=o.theme;return e.spaces[4]},function(o){var e=o.level;return 145-e*36},function(o){var e=o.isCollapsable,n=o.theme;return e&&`
      `.concat(_e,` {
        display: block;
        color: `).concat(n.colors.neutral100,`;
      }
      &:hover {
        `).concat(et(n),`
      }
  `)},function(o){var e=o.isActive,n=o.theme;return e&&et(n)}),Fo=E.default.div.withConfig({displayName:"SubActionRow__TopTimeline",componentId:"sc-7y8yzq-5"})(["padding-top:",";margin-top:",";width:","rem;background-color:",";border-top-left-radius:2px;border-top-right-radius:2px;"],function(o){var e=o.theme;return e.spaces[2]},function(o){var e=o.theme;return e.spaces[2]},4/16,function(o){var e=o.theme;return e.colors.primary200}),Yt=function o(e){var n=e.childrenForm,r=e.isFormDisabled,i=e.recursiveLevel,l=e.pathToDataFromActionRow,c=e.propertyActions,d=e.parentName,g=e.propertyName,f=(0,Z.useIntl)(),C=f.formatMessage,S=(0,Q.$_)(),M=S.modifiedData,X=S.onChangeParentCheckbox,R=S.onChangeSimpleCheckbox,I=(0,t.useState)(null),P=(0,G.Z)(I,2),O=P[0],k=P[1],_=function(ye){k(function(Pe){return Pe===ye?null:ye})},fe=(0,t.useMemo)(function(){return O?n.find(function(ue){var ye=ue.value;return ye===O}):null},[O,n]);return t.createElement(Io,null,t.createElement(Fo,null),n.map(function(ue,ye){var Pe=ue.label,ve=ue.value,Xe=ue.required,pe=ue.children,Ae=ye+1<n.length,oe=Array.isArray(pe),ge=O===ve;return t.createElement(Lo,{key:ve,isVisible:Ae},t.createElement(xo,null,t.createElement(Co,{color:"primary200"}),t.createElement(W.Flex,{style:{flex:1}},t.createElement(Mo,{level:i,isActive:ge,isCollapsable:oe},t.createElement(St,Do(Ro({alignItems:"center",isCollapsable:oe},oe&&{onClick:function(){return _(ve)},"aria-expanded":ge,onKeyDown:function(Te){var De=Te.key;return(De==="Enter"||De===" ")&&_(ve)},tabIndex:0,role:"button"}),{title:Pe}),t.createElement(x.Typography,{ellipsis:!0},H()(Pe)),Xe&&t.createElement(Wt,null),t.createElement(_e,{$isActive:ge}))),t.createElement(W.Flex,{style:{flex:1}},c.map(function(he){var Te=he.actionId,De=he.label,Ke=he.isActionRelatedToCurrentProperty;if(!Ke)return t.createElement(ot,{key:Te});var Le=[].concat((0,B.Z)(l.split("..")),[Te,"properties",g],(0,B.Z)(d.split("..")),[ve]),Ge=ce()(M,Le,!1);if(!pe)return t.createElement(zt,{key:De,justifyContent:"center",alignItems:"center"},t.createElement(me.BaseCheckbox,{disabled:r||Xt,name:Le.join(".."),"aria-label":C({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(d," ").concat(Pe," ").concat(De)}),onValueChange:function(tt){R({target:{name:Le.join(".."),value:tt}})},value:Ge}));var Qe=He(Ge),Je=Qe.hasAllActionsSelected,ze=Qe.hasSomeActionsSelected;return t.createElement(zt,{key:De,justifyContent:"center",alignItems:"center"},t.createElement(me.BaseCheckbox,{key:De,disabled:r||Xt,name:Le.join(".."),"aria-label":C({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(d," ").concat(Pe," ").concat(De)}),onValueChange:function(tt){X({target:{name:Le.join(".."),value:tt}})},value:Je,indeterminate:ze}))})))),fe&&ge&&t.createElement(L.Box,{paddingBottom:2},t.createElement(o,{isFormDisabled:r,parentName:"".concat(d,"..").concat(ve),pathToDataFromActionRow:l,propertyActions:c,propertyName:g,recursiveLevel:i+1,childrenForm:fe.children})))}))};Yt.propTypes={childrenForm:s().array.isRequired,isFormDisabled:s().bool.isRequired,parentName:s().string.isRequired,pathToDataFromActionRow:s().string.isRequired,propertyActions:s().array.isRequired,propertyName:s().string.isRequired,recursiveLevel:s().number.isRequired};const Bo=(0,t.memo)(Yt),wo=o=>o.reduce((n,r)=>(r.isActionRelatedToCurrentProperty&&n.push(r.actionId),n),[]),jo=(o,e,n,r,i)=>{const c=wo(o).reduce((d,g)=>{const f=[...n.split(".."),g,"properties",r,i],C=(0,h.get)(e,f,!1);return d[g]=C,d},{});return He(c)};var Qt=function(){return window&&window.strapi&&window.strapi.isEE?a(71231).Z:a(3288).Z}(),Jt=(0,E.default)(W.Flex).withConfig({displayName:"ActionRow__Cell",componentId:"sc-4agenc-0"})(["width:",";position:relative;"],z),No=(0,E.default)(W.Flex).withConfig({displayName:"ActionRow__Wrapper",componentId:"sc-4agenc-1"})(["height:",";flex:1;"," ",";"],Re,function(o){var e=o.isCollapsable,n=o.theme;return e&&`
      `.concat(_e,` {
        display: block;
        color: `).concat(n.colors.neutral100,`;
      }
      &:hover {
        `).concat(et(n),`
      }
  `)},function(o){var e=o.isActive,n=o.theme;return e&&et(n)}),it=function(e){var n=e.childrenForm,r=e.label,i=e.isFormDisabled,l=e.name,c=e.required,d=e.pathToData,g=e.propertyActions,f=e.propertyName,C=e.isOdd,S=(0,Z.useIntl)(),M=S.formatMessage,X=(0,t.useState)(null),R=(0,G.Z)(X,2),I=R[0],P=R[1],O=(0,Q.$_)(),k=O.modifiedData,_=O.onChangeCollectionTypeLeftActionRowCheckbox,fe=O.onChangeParentCheckbox,ue=O.onChangeSimpleCheckbox,ye=I===l,Pe=(0,t.useMemo)(function(){return Array.isArray(n)?n:[]},[n]),ve=Pe.length>0,Xe=(0,t.useCallback)(function(){ve&&P(function(he){return he===l?null:l})},[ve,l]),pe=function(Te){var De=Te.target.value;_(d,f,l,De)},Ae=(0,t.useMemo)(function(){return jo(g,k,d,f,l)},[g,k,d,f,l]),oe=Ae.hasAllActionsSelected,ge=Ae.hasSomeActionsSelected;return t.createElement(t.Fragment,null,t.createElement(No,{alignItems:"center",isCollapsable:ve,isActive:ye,background:C?"neutral100":"neutral0"},t.createElement(W.Flex,null,t.createElement(Dt,{onChange:pe,onClick:Xe,isCollapsable:ve,isFormDisabled:i,label:r,someChecked:ge,value:oe,isActive:ye},c&&t.createElement(Wt,null),t.createElement(_e,{$isActive:ye})),t.createElement(W.Flex,null,g.map(function(he){var Te=he.label,De=he.isActionRelatedToCurrentProperty,Ke=he.actionId;if(!De)return t.createElement(ot,{key:Te});var Le=[].concat((0,B.Z)(d.split("..")),[Ke,"properties",f,l]);if(!ve){var Ge=ce()(k,Le,!1);return t.createElement(Jt,{key:Ke,justifyContent:"center",alignItems:"center"},t.createElement(me.BaseCheckbox,{disabled:i||Qt,name:Le.join(".."),"aria-label":M({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(l," ").concat(Te)}),onValueChange:function(Ct){ue({target:{name:Le.join(".."),value:Ct}})},value:Ge}))}var Qe=ce()(k,Le,{}),Je=He(Qe),ze=Je.hasAllActionsSelected,vt=Je.hasSomeActionsSelected;return t.createElement(Jt,{key:Te,justifyContent:"center",alignItems:"center"},t.createElement(me.BaseCheckbox,{disabled:i||Qt,name:Le.join(".."),onValueChange:function(Ct){fe({target:{name:Le.join(".."),value:Ct}})},"aria-label":M({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(l," ").concat(Te)}),value:ze,indeterminate:vt}))})))),ye&&t.createElement(Bo,{childrenForm:Pe,isFormDisabled:i,parentName:l,pathToDataFromActionRow:d,propertyName:f,propertyActions:g,recursiveLevel:0}))};it.defaultProps={childrenForm:[],required:!1},it.propTypes={childrenForm:s().array,label:s().string.isRequired,isFormDisabled:s().bool.isRequired,name:s().string.isRequired,pathToData:s().string.isRequired,propertyActions:s().array.isRequired,propertyName:s().string.isRequired,required:s().bool,isOdd:s().bool.isRequired};const ko=(0,t.memo)(it),Wo=E.default.div`
  display: inline-flex;
  flex-direction: column;
  min-width: 0;
`,qt=({availableActions:o,childrenForm:e,isFormDisabled:n,label:r,pathToData:i,propertyName:l})=>{const c=(0,t.useMemo)(()=>eo(o,l),[o,l]);return t.createElement(Wo,null,t.createElement(no,{label:r,headers:c}),t.createElement(L.Box,null,e.map(({children:d,label:g,value:f,required:C},S)=>t.createElement(ko,{childrenForm:d,key:f,label:g,isFormDisabled:n,name:f,required:C,propertyActions:c,pathToData:i,propertyName:l,isOdd:S%2===0}))))};qt.propTypes={childrenForm:s().array.isRequired,availableActions:s().array.isRequired,isFormDisabled:s().bool.isRequired,label:s().string.isRequired,pathToData:s().string.isRequired,propertyName:s().string.isRequired};const $o=qt,Vo=E.default.div`
  flex-direction: column;
  display: inline-flex;
  min-width: 100%;
  ${({theme:o,isActive:e})=>e&&`border: 1px solid ${o.colors.primary600};`}
`,_t=({allActions:o,contentTypeName:e,label:n,index:r,isActive:i,isFormDisabled:l,onClickToggleCollapse:c,pathToData:d,properties:g})=>{const f=(0,t.useCallback)(()=>{c(e)},[e,c]),C=(0,t.useMemo)(()=>po(o,e),[o,e]);return t.createElement(Vo,{isActive:i},t.createElement(_n,{availableActions:C,isActive:i,isGrey:r%2===0,isFormDisabled:l,label:n,onClickToggle:f,pathToData:d}),i&&g.map(({label:S,value:M,children:X})=>t.createElement($o,{availableActions:C,childrenForm:X,isFormDisabled:l,label:S,pathToData:d,propertyName:M,key:M})))};_t.propTypes={allActions:s().array.isRequired,contentTypeName:s().string.isRequired,index:s().number.isRequired,isActive:s().bool.isRequired,isFormDisabled:s().bool.isRequired,label:s().string.isRequired,onClickToggleCollapse:s().func.isRequired,pathToData:s().string.isRequired,properties:s().array.isRequired};const Zo=_t,lt=({actions:o,isFormDisabled:e,pathToData:n,subjects:r})=>{const[i,l]=(0,t.useState)(null),c=d=>{l(i===d?null:d)};return r.map(({uid:d,label:g,properties:f},C)=>t.createElement(Zo,{allActions:o,key:d,contentTypeName:d,label:g,isActive:i===d,isFormDisabled:e,index:C,onClickToggleCollapse:c,pathToData:`${n}..${d}`,properties:f}))};lt.defaultProps={actions:[],subjects:[]},lt.propTypes={actions:s().array.isRequired,isFormDisabled:s().bool.isRequired,pathToData:s().string.isRequired,subjects:s().arrayOf(s().shape({uid:s().string.isRequired,label:s().string.isRequired,properties:s().array.isRequired}))};const Uo=(0,t.memo)(lt),Go=o=>o.filter(({subjects:e})=>e&&e.length);var Ko=Object.defineProperty,en=Object.getOwnPropertySymbols,Ho=Object.prototype.hasOwnProperty,Xo=Object.prototype.propertyIsEnumerable,tn=(o,e,n)=>e in o?Ko(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n,nn=(o,e)=>{for(var n in e||(e={}))Ho.call(e,n)&&tn(o,n,e[n]);if(en)for(var n of en(e))Xo.call(e,n)&&tn(o,n,e[n]);return o};const zo=o=>o.map(({actionId:e})=>e),Yo=(o,e)=>o.reduce((n,r)=>(Object.keys(e).forEach(i=>{const l=(0,h.get)(e,[i,r],{}),c={[i]:rt(l)};n[r]?n[r]=nn(nn({},n[r]),c):n[r]=c}),n),{}),Qo=(o,e)=>{const n=zo(o),r=Yo(n,e);return Object.keys(r).reduce((l,c)=>(l[c]=He(r[c]),l),{})};var Jo=function(){return window&&window.strapi&&window.strapi.isEE?a(66713).Z:a(71218).Z}(),qo=(0,E.default)(je.Stack).withConfig({displayName:"GlobalActions__CenteredStack",componentId:"sc-1vxwsjr-0"})(["align-items:center;justify-content:center;width:",";flex-shrink:0;"],z),ct=function(e){var n=e.actions,r=e.isFormDisabled,i=e.kind,l=(0,Z.useIntl)(),c=l.formatMessage,d=(0,Q.$_)(),g=d.modifiedData,f=d.onChangeCollectionTypeGlobalActionCheckbox,C=(0,t.useMemo)(function(){return Go(n)},[n]),S=(0,t.useMemo)(function(){return Qo(C,g[i])},[g,C,i]);return t.createElement(L.Box,{paddingBottom:4,paddingTop:6,style:{paddingLeft:be}},t.createElement(je.Stack,{horizontal:!0,spacing:0},C.map(function(M){var X=M.label,R=M.actionId;return t.createElement(qo,{key:R,spacing:3},t.createElement(x.Typography,{variant:"sigma",textColor:"neutral500"},c({id:"Settings.roles.form.permissions.".concat(X.toLowerCase()),defaultMessage:X})),t.createElement(me.BaseCheckbox,{disabled:r||Jo,onValueChange:function(P){f(i,R,P)},name:R,"aria-label":c({id:"Settings.permissions.select-all-by-permission",defaultMessage:"Select all {label} permissions"},{label:c({id:"Settings.roles.form.permissions.".concat(X.toLowerCase()),defaultMessage:X})}),value:ce()(S,[R,"hasAllActionsSelected"],!1),indeterminate:ce()(S,[R,"hasSomeActionsSelected"],!1)}))})))};ct.defaultProps={actions:[]},ct.propTypes={actions:s().arrayOf(s().shape({label:s().string.isRequired,actionId:s().string.isRequired,subjects:s().array.isRequired})),isFormDisabled:s().bool.isRequired,kind:s().string.isRequired};const _o=(0,t.memo)(ct),ea=(0,E.default)(L.Box)`
  overflow-x: auto;
`,on=({isFormDisabled:o,kind:e,layout:{actions:n,subjects:r}})=>{const i=re()([...r],"label");return t.createElement(ea,{background:"neutral0"},t.createElement(_o,{actions:n,kind:e,isFormDisabled:o}),t.createElement(Uo,{actions:n,isFormDisabled:o,pathToData:e,subjects:i}))};on.propTypes={isFormDisabled:s().bool.isRequired,kind:s().string.isRequired,layout:s().shape({actions:s().array,subjects:s().arrayOf(s().shape({uid:s().string.isRequired,label:s().string.isRequired,properties:s().array.isRequired}))}).isRequired};const an=(0,t.memo)(on);var ta=a(64564);const rn=({children:o,value:e})=>t.createElement(ta.$l.Provider,{value:e},o);rn.propTypes={children:s().node.isRequired,value:s().exact({availableConditions:s().array.isRequired,modifiedData:s().object.isRequired,onChangeCollectionTypeLeftActionRowCheckbox:s().func.isRequired,onChangeConditions:s().func.isRequired,onChangeSimpleCheckbox:s().func.isRequired,onChangeParentCheckbox:s().func.isRequired,onChangeCollectionTypeGlobalActionCheckbox:s().func.isRequired}).isRequired};const na=rn;var dt=a(12001),sn=a(78330),ln=a(52111),oa=Object.defineProperty,aa=Object.defineProperties,ra=Object.getOwnPropertyDescriptors,cn=Object.getOwnPropertySymbols,sa=Object.prototype.hasOwnProperty,ia=Object.prototype.propertyIsEnumerable,dn=(o,e,n)=>e in o?oa(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n,la=(o,e)=>{for(var n in e||(e={}))sa.call(e,n)&&dn(o,n,e[n]);if(cn)for(var n of cn(e))ia.call(e,n)&&dn(o,n,e[n]);return o},ca=(o,e)=>aa(o,ra(e));const da=(o,e,n)=>o.map(r=>{const i=[...n,r.action,"properties","enabled"],l=(0,h.get)(e,i,!1),c=(0,h.get)(e,[...n,r.action,"conditions"],{}),d=Ye(c).some(g=>g);return ca(la({},r),{isDisplayed:l,checkboxName:i.join(".."),hasSomeActionsSelected:l,value:l,hasConditions:d,label:r.displayName,actionId:r.action,pathToConditionsObject:[...n,r.action]})}),ua=o=>{const e=Object.entries(o).reduce((r,i)=>{const[l,{conditions:c}]=i;return r[l]=c,r},{});return Ye(e).some(r=>r)};var ut=function(){return window&&window.strapi&&window.strapi.isEE?a(37582).Z:a(95204).Z}(),pa=E.default.div.withConfig({displayName:"SubCategory__Border",componentId:"sc-akgczm-0"})(["flex:1;align-self:center;border-top:1px solid ",";"],function(o){var e=o.theme;return e.colors.neutral150}),ma=E.default.div.withConfig({displayName:"SubCategory__CheckboxWrapper",componentId:"sc-akgczm-1"})(["position:relative;word-break:keep-all;",""],function(o){var e=o.hasConditions,n=o.disabled,r=o.theme;return e&&`
    &:before {
      content: '';
      position: absolute;
      top: `.concat(-4/16,`rem;
      left: `).concat(-8/16,`rem;
      width: `).concat(6/16,`rem;
      height: `).concat(6/16,`rem;
      border-radius: `).concat(20/16,`rem;
      background: `).concat(n?r.colors.neutral100:r.colors.primary600,`;
    }
  `)}),un=function(e){var n=e.categoryName,r=e.isFormDisabled,i=e.subCategoryName,l=e.actions,c=e.pathToData,d=(0,t.useState)(!1),g=(0,G.Z)(d,2),f=g[0],C=g[1],S=(0,Q.$_)(),M=S.modifiedData,X=S.onChangeParentCheckbox,R=S.onChangeSimpleCheckbox,I=(0,Z.useIntl)(),P=I.formatMessage,O=ce()(M,c,{}),k=(0,t.useMemo)(function(){return Object.keys(O).reduce(function(pe,Ae){return pe[Ae]=rt(O[Ae]),pe},{})},[O]),_=He(k),fe=_.hasAllActionsSelected,ue=_.hasSomeActionsSelected,ye=function(){C(function(Ae){return!Ae})},Pe=function(){C(!1)},ve=da(l,M,c),Xe=ua(ce()(M,(0,B.Z)(c),{}));return t.createElement(t.Fragment,null,t.createElement(L.Box,null,t.createElement(W.Flex,{justifyContent:"space-between",alignItems:"center"},t.createElement(L.Box,{paddingRight:4},t.createElement(x.Typography,{variant:"sigma",textColor:"neutral600"},i)),t.createElement(pa,null),t.createElement(L.Box,{paddingLeft:4},t.createElement(ln.Checkbox,{name:c.join(".."),disabled:r||ut,onValueChange:function(Ae){X({target:{name:c.join(".."),value:Ae}})},indeterminate:ue,value:fe},P({id:"app.utils.select-all",defaultMessage:"Select all"})))),t.createElement(W.Flex,{paddingTop:6,paddingBottom:6},t.createElement(sn.Grid,{gap:2,style:{flex:1}},ve.map(function(pe){var Ae=pe.checkboxName,oe=pe.value,ge=pe.action,he=pe.displayName,Te=pe.hasConditions;return t.createElement(sn.GridItem,{col:3,key:ge},t.createElement(ma,{disabled:r||ut,hasConditions:Te},t.createElement(ln.Checkbox,{name:Ae,disabled:r||ut,onValueChange:function(Ke){R({target:{name:Ae,value:Ke}})},value:oe},he)))})),t.createElement(Oe,{hasConditions:Xe,onClick:ye}))),f&&t.createElement(Tt,{headerBreadCrumbs:[n,i],actions:ve,isFormDisabled:r,onClosed:Pe,onToggle:ye}))};un.propTypes={actions:s().array.isRequired,categoryName:s().string.isRequired,isFormDisabled:s().bool.isRequired,subCategoryName:s().string.isRequired,pathToData:s().array.isRequired};const ga=un,pt=({childrenForm:o,kind:e,name:n,isOpen:r,isFormDisabled:i,isWhite:l,onOpenCategory:c,pathToData:d})=>{const{formatMessage:g}=(0,Z.useIntl)(),f=()=>{c(n)},C=(0,t.useMemo)(()=>n.split("::").pop(),[n]);return t.createElement(dt.Accordion,{expanded:r,onToggle:f,id:`accordion-${n}`,variant:l?"primary":"secondary"},t.createElement(dt.AccordionToggle,{title:H()(C),description:`${g({id:"Settings.permissions.category"},{category:C})} ${e==="plugins"?"plugin":e}`}),t.createElement(dt.AccordionContent,null,t.createElement(L.Box,{padding:6},o.map(({actions:S,subCategoryName:M,subCategoryId:X})=>t.createElement(ga,{key:M,actions:S,categoryName:C,isFormDisabled:i,subCategoryName:M,pathToData:[...d,X]})))))};pt.defaultProps={},pt.propTypes={childrenForm:s().array.isRequired,isOpen:s().bool.isRequired,isFormDisabled:s().bool.isRequired,isWhite:s().bool.isRequired,kind:s().string.isRequired,name:s().string.isRequired,onOpenCategory:s().func.isRequired,pathToData:s().array.isRequired};const fa=pt,pn=({isFormDisabled:o,kind:e,layout:n})=>{const[r,i]=(0,t.useState)(null),l=c=>{i(c===r?null:c)};return t.createElement(L.Box,{padding:6,background:"neutral0"},n.map(({category:c,categoryId:d,childrenForm:g},f)=>t.createElement(fa,{key:c,childrenForm:g,kind:e,isFormDisabled:o,isOpen:r===c,isWhite:f%2===1,name:c,onOpenCategory:l,pathToData:[e,d]})))};pn.propTypes={isFormDisabled:s().bool.isRequired,kind:s().string.isRequired,layout:s().arrayOf(s().shape({category:s().string.isRequired,categoryId:s().string.isRequired,childrenForm:s().arrayOf(s().shape({actions:s().array.isRequired})).isRequired}).isRequired).isRequired};const mn=pn,gn=(o,e,n)=>o.find(r=>r.action===e&&r.subject===n);var ya=Object.defineProperty,ha=Object.defineProperties,va=Object.getOwnPropertyDescriptors,fn=Object.getOwnPropertySymbols,Ca=Object.prototype.hasOwnProperty,Ea=Object.prototype.propertyIsEnumerable,yn=(o,e,n)=>e in o?ya(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n,hn=(o,e)=>{for(var n in e||(e={}))Ca.call(e,n)&&yn(o,n,e[n]);if(fn)for(var n of fn(e))Ea.call(e,n)&&yn(o,n,e[n]);return o},vn=(o,e)=>ha(o,va(e));const Cn=(o,e=[])=>o.reduce((n,r)=>(n[r.id]=e.indexOf(r.id)!==-1,n),{}),En=({children:o},e,n="")=>o.reduce((r,i)=>{if(i.children)return vn(hn({},r),{[i.value]:En(i,e,`${n}${i.value}.`)});const l=e.indexOf(`${n}${i.value}`)!==-1;return r[i.value]=l,r},{}),ba=(o,e,n)=>o.reduce((r,i)=>{const l=e.properties.find(({value:c})=>c===i);if(l){const c=(0,h.get)(n,["properties",l.value],[]),d=En(l,c);r.properties[i]=d}return r},{properties:{}}),Pa=(o,e)=>e.reduce((n,r)=>{const i=o.find(({uid:l})=>l===r)||null;return i&&(n[r]=i),n},{}),bn=({subjects:o},e,n,r=[])=>e.reduce((i,l)=>{const c=l.subjects,d=Pa(o,c);if((0,h.isEmpty)(d))return i;const g=Object.keys(d).reduce((f,C)=>{const{actionId:S,applyToProperties:M}=l,I=d[C].properties.map(({value:_})=>_).every(_=>(M||[]).indexOf(_)===-1),P=gn(r,S,C),O=Cn(n,(0,h.get)(P,"conditions",[]));if((0,h.isEmpty)(M)||I)return(0,h.set)(f,[C,S],{properties:{enabled:P!==void 0},conditions:O}),f;const k=ba(M,d[C],P);return(0,h.set)(f,[C,S],vn(hn({},k),{conditions:O})),f},{});return(0,h.merge)(i,g)},{}),Aa=(o,e,n)=>o.reduce((r,i)=>{const l=gn(n,i.action,null);return r[i.action]={properties:{enabled:l!==void 0},conditions:Cn(e,(0,h.get)(l,"conditions",[]))},r},{}),Ta=(o,e,n)=>o.reduce((r,i)=>(r[i.subCategoryId]=Aa(i.actions,e,n),r),{}),Pn=(o,e,n=[])=>o.reduce((r,{categoryId:i,childrenForm:l})=>{const c=Ta(l,e,n);return r[i]=c,r},{}),An=o=>o.split(" ").join("-"),Tn=(o,e)=>(0,h.chain)(o).groupBy(e).map((n,r)=>({category:r,categoryId:An(r),childrenForm:(0,h.chain)(n).groupBy("subCategory").map((i,l)=>({subCategoryName:l,subCategoryId:An(l),actions:i})).value()})).value(),Sa=(o,e)=>{const{conditions:n,sections:{collectionTypes:r,singleTypes:i,plugins:l,settings:c}}=o,d={collectionTypes:r,singleTypes:i,plugins:Tn(l,"plugin"),settings:Tn(c,"category")},g={collectionTypes:bn(r,r.actions||[],n,e),singleTypes:bn(i,i.actions||[],n,e),plugins:Pn(d.plugins,n,e),settings:Pn(d.settings,n,e)};return{initialData:g,modifiedData:g,layouts:d}};var Oa=Object.defineProperty,Ra=Object.defineProperties,Da=Object.getOwnPropertyDescriptors,Sn=Object.getOwnPropertySymbols,xa=Object.prototype.hasOwnProperty,Ia=Object.prototype.propertyIsEnumerable,On=(o,e,n)=>e in o?Oa(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n,mt=(o,e)=>{for(var n in e||(e={}))xa.call(e,n)&&On(o,n,e[n]);if(Sn)for(var n of Sn(e))Ia.call(e,n)&&On(o,n,e[n]);return o},gt=(o,e)=>Ra(o,Da(e));const Rn=o=>Object.keys(o).reduce((e,n)=>{const r=o[n];if((0,h.isObject)(r)&&!(0,h.has)(r,"conditions"))return gt(mt({},e),{[n]:Rn(r)});if((0,h.isObject)(r)&&(0,h.has)(r,"conditions")&&!Ye((0,h.omit)(r,"conditions")).some(l=>l)){const l=Object.keys(r.conditions).reduce((c,d)=>(c[d]=!1,c),{});return gt(mt({},e),{[n]:gt(mt({},r),{conditions:l})})}return e[n]=r,e},{}),ft=Rn;var La=Object.defineProperty,Ma=Object.defineProperties,Fa=Object.getOwnPropertyDescriptors,Dn=Object.getOwnPropertySymbols,Ba=Object.prototype.hasOwnProperty,wa=Object.prototype.propertyIsEnumerable,xn=(o,e,n)=>e in o?La(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n,ja=(o,e)=>{for(var n in e||(e={}))Ba.call(e,n)&&xn(o,n,e[n]);if(Dn)for(var n of Dn(e))wa.call(e,n)&&xn(o,n,e[n]);return o},Na=(o,e)=>Ma(o,Fa(e));const In=(o,e)=>Object.keys(o).reduce((n,r)=>{const i=o[r];return r==="conditions"?(n[r]=i,n):(0,h.isObject)(i)?Na(ja({},n),{[r]:In(i,e)}):(n[r]=e,n)},{}),nt=In;var ka=Object.defineProperty,Wa=Object.defineProperties,$a=Object.getOwnPropertyDescriptors,Ln=Object.getOwnPropertySymbols,Va=Object.prototype.hasOwnProperty,Za=Object.prototype.propertyIsEnumerable,Mn=(o,e,n)=>e in o?ka(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n,Ua=(o,e)=>{for(var n in e||(e={}))Va.call(e,n)&&Mn(o,n,e[n]);if(Ln)for(var n of Ln(e))Za.call(e,n)&&Mn(o,n,e[n]);return o},Ga=(o,e)=>Wa(o,$a(e));const Ka={initialData:{},modifiedData:{},layouts:{}},Ha=(o,e)=>(0,$.default)(o,n=>{switch(e.type){case"ON_CHANGE_COLLECTION_TYPE_GLOBAL_ACTION_CHECKBOX":{const{collectionTypeKind:r,actionId:i,value:l}=e,c=["modifiedData",r];Object.keys((0,h.get)(o,c)).forEach(d=>{const g=(0,h.get)(o,[...c,d,i],void 0);if(g){let f=nt(g,l);if(!l&&f.conditions){const C=nt(f.conditions,!1);f=Ga(Ua({},f),{conditions:C})}(0,h.set)(n,[...c,d,i],f)}});break}case"ON_CHANGE_COLLECTION_TYPE_ROW_LEFT_CHECKBOX":{const{pathToCollectionType:r,propertyName:i,rowName:l,value:c}=e;let d=(0,h.cloneDeep)(o.modifiedData);const g=r.split(".."),f=(0,h.get)(d,g,{});Object.keys(f).forEach(C=>{if((0,h.has)(f[C],`properties.${i}`)){const S=(0,h.get)(f,[C,"properties",i,l]),M=[...g,C,"properties",i,l];if(!(0,h.isObject)(S))(0,h.set)(d,M,c);else{const X=nt(S,c);(0,h.set)(d,M,X)}}}),c||(d=ft(d)),(0,h.set)(n,"modifiedData",d);break}case"ON_CHANGE_CONDITIONS":{Object.entries(e.conditions).forEach(r=>{const[i,l]=r;(0,h.set)(n,["modifiedData",...i.split(".."),"conditions"],l)});break}case"ON_CHANGE_SIMPLE_CHECKBOX":{let r=(0,h.cloneDeep)(o.modifiedData);(0,h.set)(r,[...e.keys.split("..")],e.value),e.value||(r=ft(r)),(0,h.set)(n,"modifiedData",r);break}case"ON_CHANGE_TOGGLE_PARENT_CHECKBOX":{const{keys:r,value:i}=e,l=[...r.split("..")];let c=(0,h.cloneDeep)(o.modifiedData);const d=(0,h.get)(c,l,{}),g=nt(d,i);(0,h.set)(c,l,g),i||(c=ft(c)),(0,h.set)(n,["modifiedData"],c);break}case"RESET_FORM":{n.modifiedData=o.initialData;break}case"SET_FORM_AFTER_SUBMIT":{n.initialData=o.modifiedData;break}default:return n}}),yt=o=>Object.entries(o).filter(([,e])=>e).map(([e])=>e),Xa=o=>{const[e,{conditions:n}]=o;return{action:e,subject:null,conditions:yt(n),properties:{}}},za=o=>Object.values(o).reduce((e,n)=>{const r=Object.entries(n).reduce((i,l)=>{const[,{properties:{enabled:c}}]=l;if(!c)return i;const d=Xa(l);return i.push(d),i},[]);return[...e,...r]},[]),Fn=o=>Object.values(o).reduce((e,n)=>{const r=za(n);return[...e,...r]},[]),Bn=(o,e="")=>Object.entries(o).reduce((n,r)=>{const[i,l]=r;return(0,h.isObject)(l)?[...n,...Bn(l,`${e}${i}.`)]:(l&&!(0,h.isObject)(l)&&n.push(`${e}${i}`),n)},[]),Ya=(o,e,{conditions:n,properties:r})=>Object.entries(r).reduce((i,l)=>{const[c,d]=l;return i.properties[c]=Bn(d),i},{action:o,subject:e,conditions:yt(n),properties:{}}),Qa=(o,e,{conditions:n})=>({action:o,subject:e,properties:{},conditions:yt(n)}),Ja=(o,e)=>Object.entries(e).reduce((r,i)=>{const[l,c]=i;if(!Ye(c).some(f=>f))return r;if(!(0,h.has)(c,"properties.enabled")){const f=Ya(l,o,c);return[...r,f]}if(!c.properties.enabled)return r;const g=Qa(l,o,c);return r.push(g),r},[]),wn=o=>Object.entries(o).reduce((n,r)=>{const[i,l]=r,c=Ja(i,l);return[...n,...c]},[]),qa=o=>{const e=Fn(o.plugins),n=Fn(o.settings),r=wn(o.collectionTypes),i=wn(o.singleTypes);return[...e,...n,...r,...i]},_a=[{labelId:"app.components.LeftMenuLinkContainer.collectionTypes",defaultMessage:"Collection Types",id:"collectionTypes"},{labelId:"app.components.LeftMenuLinkContainer.singleTypes",id:"singleTypes",defaultMessage:"Single Types"},{labelId:"app.components.LeftMenuLinkContainer.plugins",defaultMessage:"Plugins",id:"plugins"},{labelId:"app.components.LeftMenuLinkContainer.settings",defaultMessage:"Settings",id:"settings"}];var er=Object.defineProperty,jn=Object.getOwnPropertySymbols,tr=Object.prototype.hasOwnProperty,nr=Object.prototype.propertyIsEnumerable,Nn=(o,e,n)=>e in o?er(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n,kn=(o,e)=>{for(var n in e||(e={}))tr.call(e,n)&&Nn(o,n,e[n]);if(jn)for(var n of jn(e))nr.call(e,n)&&Nn(o,n,e[n]);return o};const ht=(0,t.forwardRef)(({layout:o,isFormDisabled:e,permissions:n},r)=>{const[{initialData:i,layouts:l,modifiedData:c},d]=(0,t.useReducer)(Ha,Ka,()=>Sa(o,n)),{formatMessage:g}=(0,Z.useIntl)();(0,t.useImperativeHandle)(r,()=>({getPermissions:()=>{const R=(0,w.difference)(i.collectionTypes,c.collectionTypes),I=(0,w.difference)(i.singleTypes,c.singleTypes),P=kn(kn({},R),I);let O;return Me()(P)?O=!1:O=Object.values(P).some(k=>Object.values(k).some(_=>Ee()(_,"conditions"))),{permissionsToSend:qa(c),didUpdateConditions:O}},resetForm:()=>{d({type:"RESET_FORM"})},setFormAfterSubmit:()=>{d({type:"SET_FORM_AFTER_SUBMIT"})}}));const f=(R,I,P,O)=>{d({type:"ON_CHANGE_COLLECTION_TYPE_ROW_LEFT_CHECKBOX",pathToCollectionType:R,propertyName:I,rowName:P,value:O})},C=(R,I,P)=>{d({type:"ON_CHANGE_COLLECTION_TYPE_GLOBAL_ACTION_CHECKBOX",collectionTypeKind:R,actionId:I,value:P})},S=R=>{d({type:"ON_CHANGE_CONDITIONS",conditions:R})},M=(0,t.useCallback)(({target:{name:R,value:I}})=>{d({type:"ON_CHANGE_SIMPLE_CHECKBOX",keys:R,value:I})},[]),X=(0,t.useCallback)(({target:{name:R,value:I}})=>{d({type:"ON_CHANGE_TOGGLE_PARENT_CHECKBOX",keys:R,value:I})},[]);return t.createElement(na,{value:{availableConditions:o.conditions,modifiedData:c,onChangeConditions:S,onChangeSimpleCheckbox:M,onChangeParentCheckbox:X,onChangeCollectionTypeLeftActionRowCheckbox:f,onChangeCollectionTypeGlobalActionCheckbox:C}},t.createElement(V.TabGroup,{id:"tabs",label:g({id:"Settings.permissions.users.tabs.label",defaultMessage:"Tabs Permissions"})},t.createElement(V.Tabs,null,_a.map(R=>t.createElement(V.Tab,{key:R.id},g({id:R.labelId,defaultMessage:R.defaultMessage})))),t.createElement(V.TabPanels,{style:{position:"relative"}},t.createElement(V.TabPanel,null,t.createElement(an,{layout:l.collectionTypes,kind:"collectionTypes",isFormDisabled:e})),t.createElement(V.TabPanel,null,t.createElement(an,{layout:l.singleTypes,kind:"singleTypes",isFormDisabled:e})),t.createElement(V.TabPanel,null,t.createElement(mn,{layout:l.plugins,kind:"plugins",isFormDisabled:e})),t.createElement(V.TabPanel,null,t.createElement(mn,{layout:l.settings,kind:"settings",isFormDisabled:e})))))});ht.defaultProps={permissions:[],layout:{conditions:[],sections:{collectionTypes:{},singleTypes:{actions:[]},settings:[],plugins:[]}}},ht.propTypes={layout:s().object,isFormDisabled:s().bool.isRequired,permissions:s().array};const or=(0,t.memo)(ht)},95204:(Y,A,a)=>{a.d(A,{Z:()=>v});const v=!0},6214:(Y,A,a)=>{a.d(A,{Z:()=>t});const t=()=>"todo empty role"},2892:(Y,A,a)=>{a.d(A,{Z:()=>Se});var t=a(32735),v=a(60216),s=a.n(v),w=a(9808),V=a.n(w),Ce=a(19192),Ee=a.n(Ce),ae=a(53214),Me=a.n(ae),Z=a(95602),L=a.n(Z),E=a(20763),le=a.n(E),re=a(10938),G=a.n(re),K=a(5636),$e=a.n(K),Ve=Object.defineProperty,xe=Object.getOwnPropertySymbols,me=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,We=(Q,D,j)=>D in Q?Ve(Q,D,{enumerable:!0,configurable:!0,writable:!0,value:j}):Q[D]=j,ce=(Q,D)=>{for(var j in D||(D={}))me.call(D,j)&&We(Q,j,D[j]);if(xe)for(var j of xe(D))W.call(D,j)&&We(Q,j,D[j]);return Q};const Fe=({id:Q,name:D,description:j,usersCount:de,icons:Be})=>{const{formatMessage:we}=(0,K.useIntl)(),Oe=we({id:"Roles.RoleRow.user-count",defaultMessage:"{number, plural, =0 {#  user} one {#  user} other {# users}}"},{number:de});return t.createElement(ae.Tr,ce({key:Q},(0,re.onRowClick)({fn:Be[1].onClick})),t.createElement(ae.Td,{maxWidth:(0,re.pxToRem)(130)},t.createElement(Z.Typography,{ellipsis:!0,textColor:"neutral800"},D)),t.createElement(ae.Td,{maxWidth:(0,re.pxToRem)(250)},t.createElement(Z.Typography,{ellipsis:!0,textColor:"neutral800"},j)),t.createElement(ae.Td,null,t.createElement(Z.Typography,{textColor:"neutral800"},Oe)),t.createElement(ae.Td,null,t.createElement(Ce.Flex,ce({justifyContent:"flex-end"},re.stopPropagation),Be.map((Ie,je)=>Ie?t.createElement(w.Box,{key:Ie.label,paddingLeft:je===0?0:1},t.createElement(E.IconButton,{onClick:Ie.onClick,label:Ie.label,noBorder:!0,icon:Ie.icon})):null))))};Fe.propTypes={id:s().number.isRequired,name:s().string.isRequired,description:s().string.isRequired,usersCount:s().number.isRequired,icons:s().array.isRequired};const Se=Fe},10333:(Y,A,a)=>{a.d(A,{Z:()=>ke});var t=a(32735),v=a(10938),s=a(79613),w=a(58469),V=a(59290),Ce=a.n(V),Ee=a(76470),ae=a.n(Ee),Me=a(95717),Z=a.n(Me),L=a(68192),E=a.n(L),le=a(44526),re=a(11856),G=a(53214),K=a(95602),$e=a(16540),Ve=a(28004),xe=a(5636),me=a(5141),W=a(2892),We=a(6214),ce=a(60216),Fe=a.n(ce),Se=a(19615),Q=a(64410),D=a(54742),j=a(20763),de=a(61541),Be=a(9808),we=a(19192),Oe=a(90662),Ie=a(82372),je=a.n(Ie),Ue=a(94009),q=a.n(Ue),x=a(378),$=a(19337);const T=Se.default.div`
  position: absolute;
  z-index: 3;
  inset: 0;
  background: ${({theme:m})=>(0,v.setHexOpacity)(m.colors.neutral800,.2)};
  padding: 0 ${({theme:m})=>m.spaces[8]};
`,se=(0,Se.default)(we.Flex)`
  position: relative;
  max-width: ${830/16}rem;
  height: ${415/16}rem;
  margin: 0 auto;
  overflow: hidden;
  margin-top: 10%;
  padding-left: ${64/16}rem;

  img:first-of-type {
    position: absolute;
    right: 0;
    top: 0;
    max-width: ${360/16}rem;
  }

  img:not(:first-of-type) {
    width: ${130/16}rem;
    margin-left: 12%;
    margin-right: ${20/16}rem;
    z-index: 0;
  }
`,ee=(0,Se.default)(Oe.Stack)`
  align-items: flex-start;
  max-width: ${400/16}rem;
  z-index: 0;
`,H=(0,Se.default)(Be.Box)`
  position: absolute;
  right: ${({theme:m})=>m.spaces[4]};
  top: ${({theme:m})=>m.spaces[4]};
`,te=({onClose:m,isOpen:y})=>{(0,v.useLockScroll)(y);const{formatMessage:p}=(0,xe.useIntl)();return y?t.createElement(Q.Portal,null,t.createElement(T,{onClick:m},t.createElement(D.FocusTrap,{onEscape:m},t.createElement(se,{onClick:b=>b.stopPropagation(),"aria-labelledby":"upgrade-plan",background:"neutral0",hasRadius:!0},t.createElement("img",{src:x,alt:"air-balloon"}),t.createElement(H,null,t.createElement(j.IconButton,{onClick:m,"aria-label":"Close",icon:t.createElement(q(),null)})),t.createElement(ee,{spacing:6},t.createElement(K.Typography,{fontWeight:"bold",textColor:"primary600"},p({id:"app.components.UpgradePlanModal.text-ce",defaultMessage:"COMMUNITY EDITION"})),t.createElement(Oe.Stack,{spacing:2},t.createElement(K.Typography,{variant:"alpha",as:"h2",id:"upgrade-plan"},p({id:"app.components.UpgradePlanModal.limit-reached",defaultMessage:"You have reached the limit"})),t.createElement(K.Typography,null,p({id:"app.components.UpgradePlanModal.text-power",defaultMessage:"Unlock the full power of Strapi by upgrading your plan to the Enterprise Edition"}))),t.createElement(de.LinkButton,{href:"https://strapi.io/pricing-self-hosted",isExternal:!0,endIcon:t.createElement(je(),null)},p({id:"app.components.UpgradePlanModal.button",defaultMessage:"Learn more"}))),t.createElement("img",{src:$,alt:"upgrade-arrow"}))))):null};te.propTypes={onClose:Fe().func.isRequired,isOpen:Fe().bool.isRequired};const B=te;var F=a(28492);const z=()=>{const{roles:m,isLoading:y}=(0,F.bF)(),p=(0,v.useQuery)(),b=decodeURIComponent(p.get("_q")||""),u=(0,w.ZP)(m,b,{keys:["name","description"]});return{isLoading:y,sortedRoles:u}},be=()=>{const{formatMessage:m}=(0,xe.useIntl)(),[y,p]=(0,t.useState)(!1),{trackUsage:b}=(0,v.useTracking)(),{push:u}=(0,me.useHistory)(),U=(0,t.useCallback)(ie=>{u(`/settings/roles/${ie}`)},[u]),ne=(0,t.useCallback)(()=>{p(ie=>!ie)},[]),N=(0,t.useCallback)(()=>{b("didShowRBACUpgradeModal"),p(!0)},[b]),J=(0,t.useCallback)(ie=>[{onClick:ne,label:m({id:"app.utils.duplicate",defaultMessage:"Duplicate"}),icon:t.createElement(E(),null)},{onClick:()=>U(ie.id),label:m({id:"app.utils.edit",defaultMessage:"Edit"}),icon:t.createElement(Z(),null)},{onClick:ne,label:m({id:"global.delete",defaultMessage:"Delete"}),icon:t.createElement(ae(),null)}],[m,ne,U]);return{isModalOpen:y,handleToggleModalForCreatingRole:N,handleToggle:ne,getIcons:J}},Ne=()=>{const{formatMessage:m}=(0,xe.useIntl)();(0,v.useFocusWhenNavigate)();const{sortedRoles:y,isLoading:p}=z(),{isModalOpen:b,handleToggle:u,handleToggleModalForCreatingRole:U,getIcons:ne}=be(),N=y.length+1,J=5;return t.createElement($e.Main,null,t.createElement(v.SettingsPageTitle,{name:"Roles"}),t.createElement(re.HeaderLayout,{primaryAction:t.createElement(le.Button,{onClick:U,startIcon:t.createElement(Ce(),null),size:"L"},m({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"})),title:m({id:"global.roles",defaultMessage:"roles"}),subtitle:m({id:"Settings.roles.list.description",defaultMessage:"List of roles"})}),t.createElement(re.ContentLayout,null,t.createElement(G.Table,{colCount:J,rowCount:N,footer:t.createElement(G.TFooter,{onClick:U,icon:t.createElement(Ce(),null)},m({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"}))},t.createElement(G.Thead,null,t.createElement(G.Tr,null,t.createElement(G.Th,null,t.createElement(K.Typography,{variant:"sigma",textColor:"neutral600"},m({id:"global.name",defaultMessage:"Name"}))),t.createElement(G.Th,null,t.createElement(K.Typography,{variant:"sigma",textColor:"neutral600"},m({id:"global.description",defaultMessage:"Description"}))),t.createElement(G.Th,null,t.createElement(K.Typography,{variant:"sigma",textColor:"neutral600"},m({id:"global.users",defaultMessage:"Users"}))),t.createElement(G.Th,null,t.createElement(Ve.VisuallyHidden,null,m({id:"global.actions",defaultMessage:"Actions"}))))),t.createElement(G.Tbody,null,y==null?void 0:y.map(ie=>t.createElement(W.Z,{key:ie.id,id:ie.id,name:ie.name,description:ie.description,usersCount:ie.usersCount,icons:ne(ie)})))),!N&&!p&&t.createElement(We.Z,null)),t.createElement(B,{isOpen:b,onClose:u}))},ke=()=>t.createElement(v.CheckPagePermissions,{permissions:s.Z.settings.roles.main},t.createElement(Ne,null))},23027:(Y,A,a)=>{a.d(A,{Z:()=>v});const v=[]},97971:(Y,A,a)=>{a.d(A,{Z:()=>Ue});var t=a(32735),v=a(53806),s=a.n(v),w=a(10938),V=a(9808),Ce=a(44526),Ee=a(11856),ae=a(78330),Me=a(16540),Z=a(19192),L=a(90662),E=a(95602),le=a(37178),re=a(90353),G=a(98599),K=a.n(G),$e=a(83281),Ve=a(33795),xe=a.n(Ve),me=a(86834),W=a.n(me),We=a(5636),ce=a(5141),Fe=a(19615),Se=a(13806),Q=a(28492),D=a(79613),j=a(5173);const Be=j.Ry().shape({name:j.Z_().required(w.translatedErrors.required),description:j.Z_().required(w.translatedErrors.required)});var we=a(98399),Oe=(q,x,$)=>new Promise((T,se)=>{var ee=B=>{try{te($.next(B))}catch(F){se(F)}},H=B=>{try{te($.throw(B))}catch(F){se(F)}},te=B=>B.done?T(B.value):Promise.resolve(B.value).then(ee,H);te(($=$.apply(q,x)).next())});const Ie=Fe.default.div`
  border: 1px solid ${({theme:q})=>q.colors.primary200};
  background: ${({theme:q})=>q.colors.primary100};
  padding: ${({theme:q})=>`${q.spaces[2]} ${q.spaces[4]}`};
  color: ${({theme:q})=>q.colors.primary600};
  border-radius: ${({theme:q})=>q.borderRadius};
  font-size: ${12/16}rem;
  font-width: bold;
`,je=()=>{const q=(0,w.useNotification)(),{lockApp:x,unlockApp:$}=(0,w.useOverlayBlocker)(),{formatMessage:T}=(0,We.useIntl)(),[se,ee]=(0,t.useState)(!1),{replace:H}=(0,ce.useHistory)(),te=(0,t.useRef)(),{trackUsage:B}=(0,w.useTracking)(),F=(0,ce.useRouteMatch)("/settings/roles/duplicate/:id"),z=xe()(F,"params.id",null),{isLoading:be,data:Re}=(0,Q.U_)(),{permissions:Ne,isLoading:Ze}=(0,Q.Dq)(z),ke=y=>{x(),ee(!0),B(z?"willDuplicateRole":"willCreateNewRole"),Promise.resolve((0,w.request)("/admin/roles",{method:"POST",body:y})).then(p=>Oe(void 0,null,function*(){const{permissionsToSend:b}=te.current.getPermissions();return B(z?"didDuplicateRole":"didCreateNewRole"),p.data.id&&!W()(b)&&(yield(0,w.request)(`/admin/roles/${p.data.id}/permissions`,{method:"PUT",body:{permissions:b}})),p})).then(p=>{ee(!1),q({type:"success",message:{id:"Settings.roles.created",defaultMessage:"created"}}),H(`/settings/roles/${p.data.id}`)}).catch(p=>{we.error(p),ee(!1),q({type:"warning",message:{id:"notification.error"}})}).finally(()=>{$()})},m=`${T({id:"Settings.roles.form.created",defaultMessage:"Created"})} ${s()().format("LL")}`;return t.createElement(Me.Main,null,t.createElement(w.SettingsPageTitle,{name:"Roles"}),t.createElement($e.Formik,{initialValues:{name:"",description:m},onSubmit:ke,validationSchema:Be,validateOnChange:!1},({handleSubmit:y,values:p,errors:b,handleReset:u,handleChange:U})=>t.createElement(w.Form,{noValidate:!0},t.createElement(t.Fragment,null,t.createElement(Ee.HeaderLayout,{primaryAction:t.createElement(L.Stack,{horizontal:!0,spacing:2},t.createElement(Ce.Button,{variant:"secondary",onClick:()=>{u(),te.current.resetForm()},size:"L"},T({id:"app.components.Button.reset",defaultMessage:"Reset"})),t.createElement(Ce.Button,{onClick:y,loading:se,size:"L"},T({id:"global.save",defaultMessage:"Save"}))),title:T({id:"Settings.roles.create.title",defaultMessage:"Create a role"}),subtitle:T({id:"Settings.roles.create.description",defaultMessage:"Define the rights given to the role"}),navigationAction:t.createElement(w.Link,{startIcon:t.createElement(K(),null),to:"/settings/roles"},T({id:"global.back",defaultMessage:"Back"}))}),t.createElement(Ee.ContentLayout,null,t.createElement(L.Stack,{spacing:6},t.createElement(V.Box,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},t.createElement(L.Stack,{spacing:4},t.createElement(Z.Flex,{justifyContent:"space-between"},t.createElement(V.Box,null,t.createElement(V.Box,null,t.createElement(E.Typography,{fontWeight:"bold"},T({id:"global.details",defaultMessage:"Details"}))),t.createElement(V.Box,null,t.createElement(E.Typography,{variant:"pi",textColor:"neutral600"},T({id:"Settings.roles.form.description",defaultMessage:"Name and description of the role"})))),t.createElement(Ie,null,T({id:"Settings.roles.form.button.users-with-role",defaultMessage:"{number, plural, =0 {# users} one {# user} other {# users}} with this role"},{number:0}))),t.createElement(ae.Grid,{gap:4},t.createElement(ae.GridItem,{col:6},t.createElement(le.TextInput,{name:"name",error:b.name&&T({id:b.name}),label:T({id:"global.name",defaultMessage:"Name"}),onChange:U,value:p.name})),t.createElement(ae.GridItem,{col:6},t.createElement(re.Textarea,{label:T({id:"global.description",defaultMessage:"Description"}),name:"description",error:b.description&&T({id:b.description}),onChange:U},p.description))))),!be&&!Ze?t.createElement(V.Box,{shadow:"filterShadow",hasRadius:!0},t.createElement(Se.Z,{isFormDisabled:!1,ref:te,permissions:Ne,layout:Re})):t.createElement(V.Box,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},t.createElement(w.LoadingIndicatorPage,null))))))))},Ue=()=>t.createElement(w.CheckPagePermissions,{permissions:D.Z.settings.roles.create},t.createElement(je,null))},10265:(Y,A,a)=>{a.d(A,{Z:()=>v});const v=!1},47902:(Y,A,a)=>{a.d(A,{Z:()=>v});const v=!1},71231:(Y,A,a)=>{a.d(A,{Z:()=>v});const v=!1},38292:(Y,A,a)=>{a.d(A,{Z:()=>v});const v=!1},66713:(Y,A,a)=>{a.d(A,{Z:()=>v});const v=!1},37582:(Y,A,a)=>{a.d(A,{Z:()=>v});const v=!1},49776:(Y,A,a)=>{a.d(A,{Z:()=>q});var t=a(32735),v=a(10938),s=a(79613),w=a(59290),V=a.n(w),Ce=a(76470),Ee=a.n(Ce),ae=a(68192),Me=a.n(ae),Z=a(95717),L=a.n(Z),E=a(44526),le=a(11856),re=a(28004),G=a(16540),K=a(53214),$e=a(95602),Ve=a(92891),xe=a(58469),me=a(5636),W=a(5141),We=a(81999),ce=a(28492),Fe=a(6214),Se=a(2892),Q=a(49415);const D={roleToDelete:null,showModalConfirmButtonLoading:!1,shouldRefetchData:!1},de=(x,$)=>(0,Q.default)(x,T=>{switch($.type){case"ON_REMOVE_ROLES":{T.showModalConfirmButtonLoading=!0;break}case"ON_REMOVE_ROLES_SUCCEEDED":{T.shouldRefetchData=!0,T.roleToDelete=null;break}case"RESET_DATA_TO_DELETE":{T.shouldRefetchData=!1,T.roleToDelete=null,T.showModalConfirmButtonLoading=!1;break}case"SET_ROLE_TO_DELETE":{T.roleToDelete=$.id;break}default:return T}});var Be=(x,$,T)=>new Promise((se,ee)=>{var H=F=>{try{B(T.next(F))}catch(z){ee(z)}},te=F=>{try{B(T.throw(F))}catch(z){ee(z)}},B=F=>F.done?se(F.value):Promise.resolve(F.value).then(H,te);B((T=T.apply(x,$)).next())});const we=()=>{(0,v.useFocusWhenNavigate)();const{isLoading:x,allowedActions:{canCreate:$,canDelete:T,canRead:se,canUpdate:ee}}=(0,v.useRBAC)(s.Z.settings.roles),{getData:H,roles:te,isLoading:B}=(0,ce.bF)(!1),[{query:F}]=(0,v.useQueryParams)(),z=(F==null?void 0:F._q)||"",be=(0,xe.ZP)(te,z,{keys:["name","description"]});return(0,t.useEffect)(()=>{!x&&se&&H()},[x,se,H]),{isLoadingForPermissions:x,canCreate:$,canDelete:T,canRead:se,canUpdate:ee,isLoading:B,getData:H,sortedRoles:be,roles:te}},Oe=({getData:x,canCreate:$,canDelete:T,canUpdate:se})=>{const{formatMessage:ee}=(0,me.useIntl)(),H=(0,v.useNotification)(),[te,B]=(0,t.useState)(!1),{push:F}=(0,W.useHistory)(),[{selectedRoles:z,showModalConfirmButtonLoading:be,roleToDelete:Re},Ne]=(0,t.useReducer)(de,D),Ze=()=>Be(void 0,null,function*(){try{Ne({type:"ON_REMOVE_ROLES"}),yield We.be.post("/admin/roles/batch-delete",{ids:[Re]}),yield x(),Ne({type:"RESET_DATA_TO_DELETE"})}catch(N){const J=(0,Ve.get)(N,["response","payload","data","ids"],null);if(J&&Array.isArray(J)){const ie=J.join(`
`);H({type:"warning",message:ie})}else H({type:"warning",message:{id:"notification.error"}})}p()}),ke=(0,t.useCallback)(N=>{F(`/settings/roles/duplicate/${N}`)},[F]),m=()=>F("/settings/roles/new"),y=(0,t.useCallback)(N=>{Ne({type:"SET_ROLE_TO_DELETE",id:N}),p()},[]),p=()=>B(N=>!N),b=(0,t.useCallback)(N=>{F(`/settings/roles/${N}`)},[F]),u=(0,t.useCallback)((N,J)=>{N.preventDefault(),N.stopPropagation(),J.usersCount?H({type:"info",message:{id:"Roles.ListPage.notification.delete-not-allowed"}}):y(J.id)},[H,y]),U=(0,t.useCallback)((N,J)=>{N.preventDefault(),N.stopPropagation(),ke(J.id)},[ke]),ne=(0,t.useCallback)(N=>[...$?[{onClick:J=>U(J,N),label:ee({id:"app.utils.duplicate",defaultMessage:"Duplicate"}),icon:t.createElement(Me(),null)}]:[],...se?[{onClick:()=>b(N.id),label:ee({id:"app.utils.edit",defaultMessage:"Edit"}),icon:t.createElement(L(),null)}]:[],...T?[{onClick:J=>u(J,N),label:ee({id:"global.delete",defaultMessage:"Delete"}),icon:t.createElement(Ee(),null)}]:[]],[ee,u,U,b,$,se,T]);return{handleNewRoleClick:m,getIcons:ne,selectedRoles:z,isWarningDeleteAllOpened:te,showModalConfirmButtonLoading:be,handleToggleModal:p,handleDeleteData:Ze}},je=()=>{const{formatMessage:x}=(0,me.useIntl)(),{isLoadingForPermissions:$,canCreate:T,canRead:se,canDelete:ee,canUpdate:H,isLoading:te,getData:B,sortedRoles:F}=we(),{handleNewRoleClick:z,getIcons:be,isWarningDeleteAllOpened:Re,showModalConfirmButtonLoading:Ne,handleToggleModal:Ze,handleDeleteData:ke}=Oe({getData:B,canCreate:T,canDelete:ee,canUpdate:H}),m=F.length+1,y=6;if($)return t.createElement(G.Main,null,t.createElement(v.LoadingIndicatorPage,null));const p=x({id:"global.roles",defaultMessage:"roles"});return t.createElement(G.Main,null,t.createElement(v.SettingsPageTitle,{name:"Roles"}),t.createElement(le.HeaderLayout,{primaryAction:T?t.createElement(E.Button,{onClick:z,startIcon:t.createElement(V(),null),size:"L"},x({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"})):null,title:p,subtitle:x({id:"Settings.roles.list.description",defaultMessage:"List of roles"}),as:"h2"}),se&&t.createElement(le.ActionLayout,{startActions:t.createElement(v.SearchURLQuery,{label:x({id:"app.component.search.label",defaultMessage:"Search for {target}"},{target:p})})}),se&&t.createElement(le.ContentLayout,null,t.createElement(K.Table,{colCount:y,rowCount:m,footer:T?t.createElement(K.TFooter,{onClick:z,icon:t.createElement(V(),null)},x({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"})):null},t.createElement(K.Thead,null,t.createElement(K.Tr,null,t.createElement(K.Th,null,t.createElement($e.Typography,{variant:"sigma",textColor:"neutral600"},x({id:"global.name",defaultMessage:"Name"}))),t.createElement(K.Th,null,t.createElement($e.Typography,{variant:"sigma",textColor:"neutral600"},x({id:"global.description",defaultMessage:"Description"}))),t.createElement(K.Th,null,t.createElement($e.Typography,{variant:"sigma",textColor:"neutral600"},x({id:"global.users",defaultMessage:"Users"}))),t.createElement(K.Th,null,t.createElement(re.VisuallyHidden,null,x({id:"global.actions",defaultMessage:"Actions"}))))),t.createElement(K.Tbody,null,F==null?void 0:F.map(b=>t.createElement(Se.Z,{key:b.id,id:b.id,name:b.name,description:b.description,usersCount:b.usersCount,icons:be(b)})))),!m&&!te&&t.createElement(Fe.Z,null)),t.createElement(v.ConfirmDialog,{isOpen:Re,onConfirm:ke,isConfirmButtonLoading:Ne,onToggleDialog:Ze}))},q=()=>t.createElement(v.CheckPagePermissions,{permissions:s.Z.settings.roles.main},t.createElement(je,null))},78251:(Y,A,a)=>{a.d(A,{Z:()=>w});var t=(V,Ce,Ee)=>new Promise((ae,Me)=>{var Z=le=>{try{E(Ee.next(le))}catch(re){Me(re)}},L=le=>{try{E(Ee.throw(le))}catch(re){Me(re)}},E=le=>le.done?ae(le.value):Promise.resolve(le.value).then(Z,L);E((Ee=Ee.apply(V,Ce)).next())});const w=[...strapi.features.isEnabled(strapi.features.SSO)?[{Component:()=>t(void 0,null,function*(){return yield a.e(302).then(a.bind(a,80482))}),to:"/settings/single-sign-on",exact:!0}]:[]]},378:(Y,A,a)=>{Y.exports=a.p+"c3de6118ef47086ad05c.png"},19337:(Y,A,a)=>{Y.exports=a.p+"bd81ba6c07827282255d.png"}}]);
