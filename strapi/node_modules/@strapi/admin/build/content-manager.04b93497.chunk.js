(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[994],{96481:(Oc,it)=>{var p=function(){var r={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(g,X,oe,A,Ee,se,De){var pe=se.length-1;switch(Ee){case 1:this.$=g.replace(/\\(\\|")/g,"$1").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(g);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=se[pe-1];case 13:this.$={};break;case 14:this.$=se[pe-1];break;case 15:this.$=[se[pe-2],se[pe]];break;case 16:this.$={},this.$[se[pe][0]]=se[pe][1];break;case 17:this.$=se[pe-2],se[pe-2][se[pe][0]]=se[pe][1];break;case 18:this.$=[];break;case 19:this.$=se[pe-1];break;case 20:this.$=[se[pe]];break;case 21:this.$=se[pe-2],se[pe-2].push(se[pe]);break}},table:[{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],12:1,13:2,15:7,16:8,17:[1,14],23:[1,15]},{1:[3]},{14:[1,16]},{14:[2,7],18:[2,7],22:[2,7],24:[2,7]},{14:[2,8],18:[2,8],22:[2,8],24:[2,8]},{14:[2,9],18:[2,9],22:[2,9],24:[2,9]},{14:[2,10],18:[2,10],22:[2,10],24:[2,10]},{14:[2,11],18:[2,11],22:[2,11],24:[2,11]},{14:[2,12],18:[2,12],22:[2,12],24:[2,12]},{14:[2,3],18:[2,3],22:[2,3],24:[2,3]},{14:[2,4],18:[2,4],22:[2,4],24:[2,4]},{14:[2,5],18:[2,5],22:[2,5],24:[2,5]},{14:[2,1],18:[2,1],21:[2,1],22:[2,1],24:[2,1]},{14:[2,2],18:[2,2],22:[2,2],24:[2,2]},{3:20,4:[1,12],18:[1,17],19:18,20:19},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:23,15:7,16:8,17:[1,14],23:[1,15],24:[1,21],25:22},{1:[2,6]},{14:[2,13],18:[2,13],22:[2,13],24:[2,13]},{18:[1,24],22:[1,25]},{18:[2,16],22:[2,16]},{21:[1,26]},{14:[2,18],18:[2,18],22:[2,18],24:[2,18]},{22:[1,28],24:[1,27]},{22:[2,20],24:[2,20]},{14:[2,14],18:[2,14],22:[2,14],24:[2,14]},{3:20,4:[1,12],20:29},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:30,15:7,16:8,17:[1,14],23:[1,15]},{14:[2,19],18:[2,19],22:[2,19],24:[2,19]},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:31,15:7,16:8,17:[1,14],23:[1,15]},{18:[2,17],22:[2,17]},{18:[2,15],22:[2,15]},{22:[2,21],24:[2,21]}],defaultActions:{16:[2,6]},parseError:function(g,X){throw new Error(g)},parse:function(g){var X=this,oe=[0],A=[null],Ee=[],se=this.table,De="",pe=0,v=0,Te=0,xe=2,o=1;this.lexer.setInput(g),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var Ot=this.lexer.yylloc;Ee.push(Ot),typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);function Nt(L){oe.length=oe.length-2*L,A.length=A.length-L,Ee.length=Ee.length-L}function Vt(){var L;return L=X.lexer.lex()||1,typeof L!="number"&&(L=X.symbols_[L]||L),L}for(var Oe,tt,we,Ie,so,Pt,ze={},nt,Pe,S,w;;){we=oe[oe.length-1],this.defaultActions[we]?Ie=this.defaultActions[we]:(Oe==null&&(Oe=Vt()),Ie=se[we]&&se[we][Oe]);e:if(typeof Ie=="undefined"||!Ie.length||!Ie[0]){if(!Te){w=[];for(nt in se[we])this.terminals_[nt]&&nt>2&&w.push("'"+this.terminals_[nt]+"'");var j="";this.lexer.showPosition?j="Parse error on line "+(pe+1)+`:
`+this.lexer.showPosition()+`
Expecting `+w.join(", ")+", got '"+this.terminals_[Oe]+"'":j="Parse error on line "+(pe+1)+": Unexpected "+(Oe==1?"end of input":"'"+(this.terminals_[Oe]||Oe)+"'"),this.parseError(j,{text:this.lexer.match,token:this.terminals_[Oe]||Oe,line:this.lexer.yylineno,loc:Ot,expected:w})}if(Te==3){if(Oe==o)throw new Error(j||"Parsing halted.");v=this.lexer.yyleng,De=this.lexer.yytext,pe=this.lexer.yylineno,Ot=this.lexer.yylloc,Oe=Vt()}for(;!(xe.toString()in se[we]);){if(we==0)throw new Error(j||"Parsing halted.");Nt(1),we=oe[oe.length-1]}tt=Oe,Oe=xe,we=oe[oe.length-1],Ie=se[we]&&se[we][xe],Te=3}if(Ie[0]instanceof Array&&Ie.length>1)throw new Error("Parse Error: multiple actions possible at state: "+we+", token: "+Oe);switch(Ie[0]){case 1:oe.push(Oe),A.push(this.lexer.yytext),Ee.push(this.lexer.yylloc),oe.push(Ie[1]),Oe=null,tt?(Oe=tt,tt=null):(v=this.lexer.yyleng,De=this.lexer.yytext,pe=this.lexer.yylineno,Ot=this.lexer.yylloc,Te>0&&Te--);break;case 2:if(Pe=this.productions_[Ie[1]][1],ze.$=A[A.length-Pe],ze._$={first_line:Ee[Ee.length-(Pe||1)].first_line,last_line:Ee[Ee.length-1].last_line,first_column:Ee[Ee.length-(Pe||1)].first_column,last_column:Ee[Ee.length-1].last_column},Pt=this.performAction.call(ze,De,v,pe,this.yy,Ie[1],A,Ee),typeof Pt!="undefined")return Pt;Pe&&(oe=oe.slice(0,-1*Pe*2),A=A.slice(0,-1*Pe),Ee=Ee.slice(0,-1*Pe)),oe.push(this.productions_[Ie[1]][0]),A.push(ze.$),Ee.push(ze._$),S=se[oe[oe.length-2]][oe[oe.length-1]],oe.push(S);break;case 3:return!0}}return!0}},lt=function(){var te={EOF:1,parseError:function(X,oe){if(this.yy.parseError)this.yy.parseError(X,oe);else throw new Error(X)},setInput:function(g){return this._input=g,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var g=this._input[0];this.yytext+=g,this.yyleng++,this.match+=g,this.matched+=g;var X=g.match(/\n/);return X&&this.yylineno++,this._input=this._input.slice(1),g},unput:function(g){return this._input=g+this._input,this},more:function(){return this._more=!0,this},less:function(g){this._input=this.match.slice(g)+this._input},pastInput:function(){var g=this.matched.substr(0,this.matched.length-this.match.length);return(g.length>20?"...":"")+g.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var g=this.match;return g.length<20&&(g+=this._input.substr(0,20-g.length)),(g.substr(0,20)+(g.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var g=this.pastInput(),X=new Array(g.length+1).join("-");return g+this.upcomingInput()+`
`+X+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var g,X,oe,A,Ee,se;this._more||(this.yytext="",this.match="");for(var De=this._currentRules(),pe=0;pe<De.length&&(oe=this._input.match(this.rules[De[pe]]),!(oe&&(!X||oe[0].length>X[0].length)&&(X=oe,A=pe,!this.options.flex)));pe++);if(X)return se=X[0].match(/\n.*/g),se&&(this.yylineno+=se.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:se?se[se.length-1].length-1:this.yylloc.last_column+X[0].length},this.yytext+=X[0],this.match+=X[0],this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(X[0].length),this.matched+=X[0],g=this.performAction.call(this,this.yy,this,De[A],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),g||void 0;if(this._input==="")return this.EOF;this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var X=this.next();return typeof X!="undefined"?X:this.lex()},begin:function(X){this.conditionStack.push(X)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(X){this.begin(X)}};return te.options={},te.performAction=function(X,oe,A,Ee){var se=Ee;switch(A){case 0:break;case 1:return 6;case 2:return oe.yytext=oe.yytext.substr(1,oe.yyleng-2),4;break;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},te.rules=[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],te.conditions={INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}},te}();return r.lexer=lt,r}();it.parser=p,it.parse=function(){return p.parse.apply(p,arguments)},it.main=function(lt){if(!lt[1])throw new Error("Usage: "+lt[0]+" FILE")}},19415:(Oc,it,p)=>{"use strict";p.r(it),p.d(it,{App:()=>vc,default:()=>iO});var r=p(32735),lt=p(99357),te=p(5141),g=p(10938),X=p(11856),oe=p(16540),A=p(5636),Ee=p(98978),se=p.n(Ee),De=p(79613);const v=e=>`content-manager.${e}`;var Te=p(74506),xe=p(60216),o=p.n(xe);const Nt=(0,r.createContext)();var Vt=Object.defineProperty,Oe=Object.getOwnPropertySymbols,tt=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable,Ie=(e,t,n)=>t in e?Vt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,so=(e,t)=>{for(var n in t||(t={}))tt.call(t,n)&&Ie(e,n,t[n]);if(Oe)for(var n of Oe(t))we.call(t,n)&&Ie(e,n,t[n]);return e},Pt=(e,t)=>{var n={};for(var a in e)tt.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&Oe)for(var a of Oe(e))t.indexOf(a)<0&&we.call(e,a)&&(n[a]=e[a]);return n};function ze(e){var t=e,{attributes:n,buttonData:a,children:s,goTo:i,layout:l,metadatas:u,moveItem:c,moveRow:d,onAddData:m,relationsLayout:f,removeField:y,selectedItemName:h,setEditFieldToSelect:b}=t,E=Pt(t,["attributes","buttonData","children","goTo","layout","metadatas","moveItem","moveRow","onAddData","relationsLayout","removeField","selectedItemName","setEditFieldToSelect"]);return r.createElement(Nt.Provider,{value:so({attributes:n,buttonData:a,goTo:i,layout:l,metadatas:u,moveItem:c,moveRow:d,onAddData:m,relationsLayout:f,removeField:y,selectedItemName:h,setEditFieldToSelect:b},E)},s)}ze.defaultProps={attributes:{},buttonData:[],goTo:()=>{},layout:[],metadatas:{},moveItem:()=>{},moveRow:()=>{},onAddData:()=>{},relationsLayout:[],removeField:()=>{},selectedItemName:null,setEditFieldToSelect:()=>{}},ze.propTypes={attributes:o().object,buttonData:o().array,children:o().node.isRequired,goTo:o().func,layout:o().array,metadatas:o().object,moveItem:o().func,moveRow:o().func,onAddData:o().func,relationsLayout:o().array,removeField:o().func,selectedItemName:o().string,setEditFieldToSelect:o().func};const nt=ze,Pe={COMPONENT:"component",EDIT_FIELD:"editField",EDIT_RELATION:"editRelation",FIELD:"field",RELATION:"relation"};var S=p(19615),w=p(9808),j=p(19192),L=p(95602),Me=p(20763),Pc=p(76470),qe=p.n(Pc),Rc=p(64198),rt=p.n(Rc),Mc=p(60672),hn=p.n(Mc);const Tc=(0,S.default)(w.Box)`
  border: 1px solid ${({theme:e})=>e.colors.neutral200};
`,wc=(0,S.default)(w.Box)`
  height: ${32/16}rem;
  width: ${32/16}rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;

  svg {
    height: ${6/16}rem;
    width: ${11/16}rem;
    > path {
      fill: ${({theme:e})=>e.colors.neutral600};
    }
  }
`,Ic=S.default.button`
  border: none;
  background: transparent;
  display: block;
  width: 100%;
  text-align: unset;
  padding: 0;
`,io=({displayedValue:e})=>r.createElement(Tc,{paddingLeft:3,paddingRight:3,paddingTop:3,paddingBottom:3,hasRadius:!0,background:"neutral0",width:(0,g.pxToRem)(300)},r.createElement(j.Flex,{justifyContent:"space-between"},r.createElement(Ic,{type:"button"},r.createElement(j.Flex,null,r.createElement(wc,{background:"neutral200"},r.createElement(hn(),null)),r.createElement(w.Box,{paddingLeft:6,maxWidth:(0,g.pxToRem)(150)},r.createElement(L.Typography,{textColor:"neutral700",ellipsis:!0},e)))),r.createElement(w.Box,{paddingLeft:3},r.createElement(j.Flex,null,r.createElement(Me.IconButton,{icon:r.createElement(qe(),null)}),r.createElement(w.Box,{paddingLeft:2},r.createElement(Me.IconButton,{icon:r.createElement(rt(),null)}))))));io.propTypes={displayedValue:o().string.isRequired};const Dc=io;var ae=p(90662),xc=p(95717),ct=p.n(xc),Sc=p(94009),bn=p.n(Sc);const lo=e=>e.length>20?`${e.substring(0,20)}...`:e,En=(0,S.default)(j.Flex)`
  height: ${({theme:e})=>e.spaces[7]};

  &:last-child {
    padding: 0 ${({theme:e})=>e.spaces[3]};
  }
`,co=(0,S.default)(En)`
  padding: 0 ${({theme:e})=>e.spaces[3]};
  border-right: 1px solid ${({theme:e})=>e.colors.neutral150};
  cursor: all-scroll;

  svg {
    width: ${12/16}rem;
    height: ${12/16}rem;
  }
`,Lc=(0,S.default)(j.Flex)`
  display: inline-flex;
  max-height: ${32/16}rem;
  opacity: ${({transparent:e})=>e?0:1};
  background-color: ${({theme:e,isSibling:t})=>t?e.colors.neutral100:e.colors.primary100};
  border: 1px solid
    ${({theme:e,isSibling:t})=>t?e.colors.neutral150:e.colors.primary200};

  svg {
    width: ${10/16}rem;
    height: ${10/16}rem;

    path {
      fill: ${({theme:e,isSibling:t})=>t?void 0:e.colors.primary600};
    }
  }

  ${L.Typography} {
    color: ${({theme:e,isSibling:t})=>t?void 0:e.colors.primary600};
  }

  ${co} {
    border-right: 1px solid
      ${({theme:e,isSibling:t})=>t?e.colors.neutral150:e.colors.primary200};
  }
`,vn=({labelField:e,transparent:t,isSibling:n})=>{const a=lo(e);return r.createElement(Lc,{hasRadius:!0,justifyContent:"space-between",transparent:t,isSibling:n},r.createElement(ae.Stack,{horizontal:!0,spacing:3},r.createElement(co,{alignItems:"center"},r.createElement(rt(),null)),r.createElement(L.Typography,{fontWeight:"bold"},a)),r.createElement(j.Flex,{paddingLeft:3},r.createElement(En,{alignItems:"center"},r.createElement(ct(),null)),r.createElement(En,{alignItems:"center"},r.createElement(bn(),null))))};vn.defaultProps={isSibling:!1,transparent:!1},vn.propTypes={isSibling:o().bool,labelField:o().string.isRequired,transparent:o().bool};const Cn=vn,Fc={position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,width:"100%",height:"100%"};function kc(e,t,n){if(!e||!t)return{display:"none"};const{x:a,y:s}=n,i=`translate(${a}px, ${s}px)`;return{transform:i,WebkitTransform:i}}const Ac=()=>{const{itemType:e,isDragging:t,item:n,initialOffset:a,currentOffset:s,mouseOffset:i}=(0,Te.useDragLayer)(l=>({item:l.getItem(),itemType:l.getItemType(),initialOffset:l.getInitialSourceClientOffset(),currentOffset:l.getSourceClientOffset(),isDragging:l.isDragging(),mouseOffset:l.getClientOffset()}));return t?r.createElement(nt,null,r.createElement("div",{style:Fc},r.createElement("div",{style:kc(a,s,i),className:"col-md-2"},[Pe.EDIT_RELATION,Pe.EDIT_FIELD,Pe.FIELD].includes(e)&&r.createElement(Cn,{labelField:n.labelField}),e===Pe.COMPONENT&&r.createElement(Dc,{displayedValue:n.displayedValue})))):null},uo=(0,r.createContext)();var jc=p(18522),q=p(92891);const po=(0,r.createContext)(),pO=(0,r.createContext)(),mO=null;var fe=p(4409);const mo=e=>e["content-manager_editViewLayoutManager"].currentLayout;var $c=Object.defineProperty,Bc=Object.defineProperties,Nc=Object.getOwnPropertyDescriptors,fo=Object.getOwnPropertySymbols,Vc=Object.prototype.hasOwnProperty,qc=Object.prototype.propertyIsEnumerable,go=(e,t,n)=>t in e?$c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wc=(e,t)=>{for(var n in t||(t={}))Vc.call(t,n)&&go(e,n,t[n]);if(fo)for(var n of fo(t))qc.call(t,n)&&go(e,n,t[n]);return e},zc=(e,t)=>Bc(e,Nc(t));const ut=()=>{const e=(0,fe.v9)(mo),t=(0,r.useCallback)(n=>(0,q.get)(e,["components",n],{}),[e]);return zc(Wc({},e),{getComponentLayout:t})};var Uc=p(43653),Se=p.n(Uc),ge=p(81999),Hc=p(99381),Ue=p.n(Hc);const Rt=(e,t,n)=>{if(Array.isArray(e)&&t>=0&&n>=0&&t<=e.length-1&&n<=e.length-1){const a=Ue()(e),s=a.splice(t,1);return a.splice(n,0,s[0]),a}return e},yo=e=>{const t=e.type;return t==="relation"?!(0,q.toLower)(e.relationType).includes("morph"):!["json","dynamiczone","richtext","password"].includes(t)&&!!t},ho=(e,t)=>Object.keys(e).reduce((n,a)=>{const s=(0,q.get)(e,[a],{}),{default:i,component:l,type:u,required:c,min:d,repeatable:m}=s;if(u==="json"&&(n[a]=null),u==="json"&&c===!0&&(n[a]={}),i!==void 0&&(n[a]=i),u==="component"){const f=(0,q.get)(t,[l,"attributes"],{}),y=ho(f,t);if(c===!0&&(n[a]=m===!0?[]:y),d&&m===!0&&c){n[a]=[];for(let h=0;h<d;h+=1)n[a].push(y)}}return u==="dynamiczone"&&c===!0&&(n[a]=[]),n},{}),qt=ho;var _c=Object.defineProperty,Zc=Object.defineProperties,Gc=Object.getOwnPropertyDescriptors,Wt=Object.getOwnPropertySymbols,bo=Object.prototype.hasOwnProperty,Eo=Object.prototype.propertyIsEnumerable,vo=(e,t,n)=>t in e?_c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,On=(e,t)=>{for(var n in t||(t={}))bo.call(t,n)&&vo(e,n,t[n]);if(Wt)for(var n of Wt(t))Eo.call(t,n)&&vo(e,n,t[n]);return e},Pn=(e,t)=>Zc(e,Gc(t)),Qc=(e,t)=>{var n={};for(var a in e)bo.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&Wt)for(var a of Wt(e))t.indexOf(a)<0&&Eo.call(e,a)&&(n[a]=e[a]);return n};const zt=e=>{var t=e,{layouts:n,metadatas:a}=t,s=Qc(t,["layouts","metadatas"]);const i=n.list.map(d=>d.name?d.name:d),l=n.editRelations.map(({name:d})=>d),u=Object.keys(a).reduce((d,m)=>{const f=(0,q.get)(a,[m],{});let y=f.edit;return y.mainField&&(y=Pn(On({},y),{mainField:f.edit.mainField.name})),Pn(On({},d),{[m]:{edit:y,list:(0,q.omit)(f.list,["mainField"])}})},{}),c=n.edit.map(d=>d.map(({name:m,size:f})=>({name:m,size:f})));return Pn(On({},s),{layouts:{edit:c,editRelations:l,list:i},metadatas:u})};var Kc=Object.defineProperty,Yc=Object.defineProperties,Jc=Object.getOwnPropertyDescriptors,Co=Object.getOwnPropertySymbols,Xc=Object.prototype.hasOwnProperty,eu=Object.prototype.propertyIsEnumerable,Oo=(e,t,n)=>t in e?Kc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tu=(e,t)=>{for(var n in t||(t={}))Xc.call(t,n)&&Oo(e,n,t[n]);if(Co)for(var n of Co(t))eu.call(t,n)&&Oo(e,n,t[n]);return e},nu=(e,t)=>Yc(e,Jc(t));const ru=(e,t)=>e.map(n=>nu(tu({},n),{subject:t})),Po=e=>{const t={create:[{action:"plugin::content-manager.explorer.create",subject:null}],delete:[{action:"plugin::content-manager.explorer.delete",subject:null}],publish:[{action:"plugin::content-manager.explorer.publish",subject:null}],read:[{action:"plugin::content-manager.explorer.read",subject:null}],update:[{action:"plugin::content-manager.explorer.update",subject:null}]};return Object.keys(t).reduce((n,a)=>(n[a]=ru(t[a],e),n),{})},Ro=e=>e.split(".").filter(t=>(0,q.isNaN)(parseInt(t,10))),Mo=e=>e.length===0?-1:Math.max.apply(Math,e.map(t=>t.__temp_key__)),ve=e=>`/content-manager/${e}`;var ou=Object.defineProperty,To=Object.getOwnPropertySymbols,au=Object.prototype.hasOwnProperty,su=Object.prototype.propertyIsEnumerable,wo=(e,t,n)=>t in e?ou(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ut=(e,t)=>{for(var n in t||(t={}))au.call(t,n)&&wo(e,n,t[n]);if(To)for(var n of To(t))su.call(t,n)&&wo(e,n,t[n]);return e};const Io=(e,t,n)=>{const a=u=>t.find(c=>c.uid===u),s=Object.assign({},e),i=e[n].uid,l=a(i);return(0,q.set)(s,[n],Ut(Ut({},e[n]),l)),Object.keys(e.components).forEach(u=>{const c=a(u);(0,q.set)(s,["components",u],Ut(Ut({},e.components[u]),c))}),s};var iu=Object.defineProperty,lu=Object.defineProperties,cu=Object.getOwnPropertyDescriptors,Do=Object.getOwnPropertySymbols,uu=Object.prototype.hasOwnProperty,du=Object.prototype.propertyIsEnumerable,xo=(e,t,n)=>t in e?iu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Rn=(e,t)=>{for(var n in t||(t={}))uu.call(t,n)&&xo(e,n,t[n]);if(Do)for(var n of Do(t))du.call(t,n)&&xo(e,n,t[n]);return e},Mn=(e,t)=>lu(e,cu(t));const Mt=(e,t)=>e&&Object.keys(e).reduce((n,a)=>{const s=n[a];return s===null?n:Array.isArray(s)?Array.isArray(n)?(n[a]=Mt(s,t),n):Mn(Rn({},n),{[a]:s.map(i=>Mt(i,t))}):typeof s=="object"?s._isAMomentObject===!0?Mn(Rn({},n),{[a]:s}):Array.isArray(n)?(n[a]=Mt(s,t),n):Mn(Rn({},n),{[a]:Mt(s,t)}):(a===t&&delete n[a],n)},e),pu=Mt,So=(e,t,n)=>{const a=(s,i)=>Object.keys(s).reduce((l,u)=>{const c=(0,g.getType)(i,u),d=(0,q.get)(s,u),m=(0,g.getOtherInfos)(i,[u,"component"]),f=(0,g.getOtherInfos)(i,[u,"repeatable"]);return c==="dynamiczone"?(l[u]=d.map(y=>a(y,n[y.__component])),l):c==="component"?(f?l[u]=d&&d.map(y=>a(y,n[m])):l[u]=d&&a(d,n[m]),l):(c!=="password"&&(l[u]=d),l)},{});return a(e,t)};var mu=Object.defineProperty,fu=Object.defineProperties,gu=Object.getOwnPropertyDescriptors,Lo=Object.getOwnPropertySymbols,yu=Object.prototype.hasOwnProperty,hu=Object.prototype.propertyIsEnumerable,Fo=(e,t,n)=>t in e?mu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tt=(e,t)=>{for(var n in t||(t={}))yu.call(t,n)&&Fo(e,n,t[n]);if(Lo)for(var n of Lo(t))hu.call(t,n)&&Fo(e,n,t[n]);return e},wt=(e,t)=>fu(e,gu(t));const Tn=(e,t)=>t.find(n=>n.uid===e),bu=(e,t)=>e.layouts.editRelations.reduce((a,s)=>{const i=(0,q.get)(e,["attributes",s],{}),l=(0,q.get)(e,["attributes",s,"targetModel"],null),c=Tn(l,t).pluginOptions||{},d=(0,q.get)(e,["metadatas",s,"edit"],{}),m=6,f=Ao(e,s,t);return a.push({name:s,size:m,fieldSchema:i,metadatas:d,queryInfos:f,targetModelPluginOptions:c}),a},[]),Eu=(e,t)=>{const n=vu(e,t),a=ko(n.contentType,null,t),s=n.contentType.uid,i=bu(n.contentType,t),l=Cu(n.contentType,n.components);return(0,q.set)(n,["contentType","layouts","edit"],a),(0,q.set)(n,["contentType","layouts","editRelations"],i),(0,q.set)(n,["contentType","layouts","list"],l),Object.keys(n.components).forEach(u=>{const c=ko(n.components[u],s,t);(0,q.set)(n,["components",u,"layouts","edit"],c)}),n},vu=(e,t)=>{const n=Io((0,q.cloneDeep)(e),t,"contentType"),{components:a,contentType:s}=n,i=l=>Object.keys(l.metadatas).reduce((u,c)=>{const d=(0,q.get)(l,["attributes",c],{});let m=l.metadatas[c];if(d.type==="relation"){const f=Tn(d.targetModel,t),y=m.edit.mainField,h={name:y,schema:(0,q.get)(f,["attributes",y])};m={list:wt(Tt({},m.list),{mainField:h}),edit:wt(Tt({},m.edit),{mainField:h})}}return u[c]=m,u},{});return(0,q.set)(n,["contentType","metadatas"],i(s)),Object.keys(a).forEach(l=>{const u=a[l],c=i(u);(0,q.set)(n,["components",l,"metadatas"],c)}),n},ko=(e,t,n)=>e.layouts.edit.reduce((s,i)=>{const l=i.map(u=>{const c=(0,q.get)(e,["attributes",u.name],{}),d=wt(Tt({},u),{fieldSchema:c,metadatas:(0,q.get)(e,["metadatas",u.name,"edit"],{})});if(c.type==="relation"){const m=c.targetModel,y=Tn(m,n).pluginOptions||{},h=t?Ou(e,u.name,t,n):Ao(e,u.name,n);(0,q.set)(d,"targetModelPluginOptions",y),(0,q.set)(d,"queryInfos",h)}return d});return s.push(l),s},[]),Cu=(e,t)=>e.layouts.list.reduce((a,s)=>{const i=(0,q.get)(e,["attributes",s],{}),l=(0,q.get)(e,["metadatas",s,"list"],{}),u=i.type;if(u==="relation"){const c={endPoint:`collection-types/${e.uid}`,defaultParams:{}};return a.push({key:`__${s}_key__`,name:s,fieldSchema:i,metadatas:l,queryInfos:c}),a}if(u==="component"){const c=t[i.component],d=c.settings.mainField,m=c.attributes[d];return a.push({key:`__${s}_key__`,name:s,fieldSchema:i,metadatas:wt(Tt({},l),{mainField:wt(Tt({},m),{name:d})})}),a}return a.push({key:`__${s}_key__`,name:s,fieldSchema:i,metadatas:l}),a},[]),Ao=(e,t,n)=>{const a=e.uid,s=ve(`relations/${a}/${t}`),i=(0,q.get)(e,["metadatas",t,"edit","mainField","name"],""),l=(0,q.get)(e,["attributes",t,"targetModel"],""),u=jo(n).indexOf(l)!==-1;return{endPoint:s,containsKey:`${i}`,defaultParams:{},shouldDisplayRelationLink:u}},Ou=(e,t,n,a)=>{const s=ve(`relations/${n}/${t}`),i=(0,q.get)(e,["metadatas",t,"edit","mainField","name"],""),l=(0,q.get)(e,["attributes",t,"targetModel"],""),u=jo(a).indexOf(l)!==-1;return{endPoint:s,containsKey:`${i}`,defaultParams:{_component:e.uid},shouldDisplayRelationLink:u}},jo=e=>e.filter(t=>t.isDisplayed).map(({uid:t})=>t),$o=Eu;var Ht=p(49415),Pu=Object.defineProperty,Ru=Object.defineProperties,Mu=Object.getOwnPropertyDescriptors,Bo=Object.getOwnPropertySymbols,Tu=Object.prototype.hasOwnProperty,wu=Object.prototype.propertyIsEnumerable,No=(e,t,n)=>t in e?Pu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_t=(e,t)=>{for(var n in t||(t={}))Tu.call(t,n)&&No(e,n,t[n]);if(Bo)for(var n of Bo(t))wu.call(t,n)&&No(e,n,t[n]);return e},Vo=(e,t)=>Ru(e,Mu(t));const Iu={error:null,isLoading:!0,layout:{},layouts:{}},Du=(e,t)=>(0,Ht.default)(e,n=>{switch(t.type){case"GET_DATA":{n.isLoading=!0,n.error=null,n.layout={};break}case"GET_DATA_SUCCEEDED":{const a=t.data.contentType.uid;n.layout=t.data,n.layouts[a]=t.data,n.isLoading=!1;break}case"GET_DATA_ERROR":{n.isLoading=!1,n.error=t.error;break}case"SET_LAYOUT_FROM_STATE":{n.error=null,n.layout=e.layouts[t.uid];break}case"UPDATE_LAYOUT":{const a=e.layout;n.layout=Vo(_t({},a),{contentType:_t({uid:a.contentType.uid},t.newLayout.contentType)}),n.layouts[a.contentType.uid]=Vo(_t({},a),{contentType:_t({uid:a.contentType.uid},t.newLayout.contentType)});break}default:return n}});var wn=p(12463),xu=p(87774);const It=()=>e=>e["content-manager_app"]||xu.E,TO=()=>createSelector(It(),e=>e),wO=()=>createSelector(It(),e=>e.models),Su=()=>(0,wn.P1)(It(),e=>({collectionTypeLinks:e.collectionTypeLinks,singleTypeLinks:e.singleTypeLinks})),In=()=>(0,wn.P1)(It(),({components:e,models:t})=>({schemas:[...e,...t]})),IO=null;var Lu=p(98399),Fu=(e,t,n)=>new Promise((a,s)=>{var i=c=>{try{u(n.next(c))}catch(d){s(d)}},l=c=>{try{u(n.throw(c))}catch(d){s(d)}},u=c=>c.done?a(c.value):Promise.resolve(c.value).then(i,l);u((n=n.apply(e,t)).next())});const qo=e=>{const[{error:t,isLoading:n,layout:a,layouts:s},i]=(0,r.useReducer)(Du,Iu),l=(0,r.useMemo)(In,[]),{schemas:u}=(0,fe.v9)(f=>l(f),fe.wU),c=(0,r.useRef)(!0),d=(0,r.useCallback)((f,y)=>Fu(void 0,null,function*(){if(s[f]){i({type:"SET_LAYOUT_FROM_STATE",uid:f});return}i({type:"GET_DATA"});try{const h=ve(`content-types/${f}/configuration`),{data:{data:b}}=yield ge.be.get(h,{cancelToken:y.token});i({type:"GET_DATA_SUCCEEDED",data:$o(b,u)})}catch(h){if(Se().isCancel(h))return;c.current&&Lu.error(h),c.current&&i({type:"GET_DATA_ERROR",error:h})}}),[s,u]);(0,r.useEffect)(()=>()=>{c.current=!1},[]),(0,r.useEffect)(()=>{const y=Se().CancelToken.source();return d(e,y),()=>{y.cancel("Operation canceled by the user.")}},[e,d]);const m=(0,r.useCallback)(f=>{i({type:"UPDATE_LAYOUT",newLayout:$o({contentType:f,components:{}},u)})},[u]);return{error:t,isLoading:n,layout:a,updateLayout:m}},ku=e=>e["content-manager_app"].collectionTypeLinks;var We=p(96365),Au=p(33795),R=p.n(Au),ju=p(85973),Wo=p.n(ju),$u=Object.defineProperty,Bu=Object.defineProperties,Nu=Object.getOwnPropertyDescriptors,zo=Object.getOwnPropertySymbols,Vu=Object.prototype.hasOwnProperty,qu=Object.prototype.propertyIsEnumerable,Uo=(e,t,n)=>t in e?$u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wu=(e,t)=>{for(var n in t||(t={}))Vu.call(t,n)&&Uo(e,n,t[n]);if(zo)for(var n of zo(t))qu.call(t,n)&&Uo(e,n,t[n]);return e},zu=(e,t)=>Bu(e,Nu(t));const Ho=(e,t)=>Object.keys(e).reduce((n,a)=>{const s=e[a],i=R()(t,[a],s);return Wo()(s)?zu(Wu({},n),{[a]:Ho(s,i)}):(n[a]=i,n)},{}),Uu=(e,t,n)=>{const a=e.find(({to:m})=>m.includes(t));if(!a)return"/";const{to:s,search:i}=a,l=(0,We.parse)(i),u=(0,We.parse)(n.substring(1)),c=Ho(l,u);return`${s}?${(0,We.stringify)(c,{encode:!1})}`},_o=e=>{const[{rawQuery:t}]=(0,g.useQueryParams)(),n=(0,fe.v9)(ku);return Uu(n,e,t)},Qe=()=>(0,r.useContext)(Nt),Zo=()=>{const{search:e}=(0,te.useLocation)(),t=e?(0,We.parse)(e.substring(1)):{};return t.plugins?(0,We.stringify)({plugins:t.plugins},{encode:!1}):""};var Go=p(67234);const Hu=(e,t,n)=>({type:Go.m,permissions:e,__meta__:{plugins:t,containerName:n}}),_u=()=>({type:Go.Q}),Zu=e=>e["content-manager_rbacManager"].permissions,Gu=e=>e.rbacProvider.collectionTypesRelatedPermissions,Qo=(e,t,n="listView")=>{const a=(0,fe.v9)(Gu),s=(0,fe.v9)(Zu),i=(0,fe.I0)(),l=a[t];return(0,r.useEffect)(()=>l?(i(Hu(l,e?e.plugins:null,n)),()=>{i(_u())}):()=>{},[l,i,e,n]),s},jO=()=>useContext(WysiwygContext),$O=null;var Zt=p(10373),Ko=p(16566);const Qu=()=>({type:Ko.c}),Ku=(e,t)=>({type:Ko.O,layout:e,query:t});var Yu=p(8266),He=p.n(Yu),Gt=p(27635),le=p(78330),Ju=p(70404),Xu=p.n(Ju),ed=p(64564);const td=()=>(0,r.useContext)(ed.ux),Yo=e=>{const{getAdminInjectedComponents:t}=td(),[n,a,s]=e.split(".");return t(n,a,s)};var nd=Object.defineProperty,Qt=Object.getOwnPropertySymbols,Jo=Object.prototype.hasOwnProperty,Xo=Object.prototype.propertyIsEnumerable,ea=(e,t,n)=>t in e?nd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rd=(e,t)=>{for(var n in t||(t={}))Jo.call(t,n)&&ea(e,n,t[n]);if(Qt)for(var n of Qt(t))Xo.call(t,n)&&ea(e,n,t[n]);return e},od=(e,t)=>{var n={};for(var a in e)Jo.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&Qt)for(var a of Qt(e))t.indexOf(a)<0&&Xo.call(e,a)&&(n[a]=e[a]);return n};const ta=e=>{var t=e,{area:n}=t,a=od(t,["area"]);return Yo(n).map(i=>r.createElement(i.Component,rd({key:i.name},a)))};ta.propTypes={area:o().string.isRequired};const Kt=ta;var ad=Object.defineProperty,na=Object.getOwnPropertySymbols,sd=Object.prototype.hasOwnProperty,id=Object.prototype.propertyIsEnumerable,ra=(e,t,n)=>t in e?ad(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oa=(e,t)=>{for(var n in t||(t={}))sd.call(t,n)&&ra(e,n,t[n]);if(na)for(var n of na(t))id.call(t,n)&&ra(e,n,t[n]);return e};function ld(e,t){return function(n){const a=t(n.name);return r.createElement(e,oa(oa({},n),a))}}const cd=ld;function ud(e){const{addComponentToDynamicZone:t,createActionAllowedFields:n,isCreatingEntry:a,formErrors:s,modifiedData:i,moveComponentUp:l,moveComponentDown:u,removeComponentFromDynamicZone:c,readActionAllowedFields:d,updateActionAllowedFields:m}=(0,g.useCMEditViewDataManager)(),f=(0,r.useMemo)(()=>(0,q.get)(i,[e],[]).map(b=>b.__component),[i,e]),y=(0,r.useMemo)(()=>(a?n:m).includes(e),[e,a,n,m]),h=(0,r.useMemo)(()=>(a?[]:d).includes(e),[e,a,d]);return{addComponentToDynamicZone:t,formErrors:s,isCreatingEntry:a,isFieldAllowed:y,isFieldReadable:h,moveComponentUp:l,moveComponentDown:u,removeComponentFromDynamicZone:c,dynamicDisplayedComponents:f}}const dd=ud;var pd=p(51542),aa=p.n(pd),Dn=p(98195);const xn=(0,S.default)(aa())`
  transform: ${({$isOpen:e})=>e?"rotate(45deg)":"rotate(0deg)"};
  > circle {
    fill: ${({theme:e,$hasError:t})=>t?e.colors.danger200:e.colors.neutral150};
  }
  > path {
    fill: ${({theme:e,$hasError:t})=>t?e.colors.danger600:e.colors.neutral600};
  }
`,md=(0,S.default)(Dn.BaseButton)`
  border-radius: 26px;
  border-color: ${({theme:e})=>e.colors.neutral150};
  background: ${({theme:e})=>e.colors.neutral0};
  padding-top: ${({theme:e})=>e.spaces[3]};
  padding-right: ${({theme:e})=>e.spaces[4]};
  padding-bottom: ${({theme:e})=>e.spaces[3]};
  padding-left: ${({theme:e})=>e.spaces[4]};

  box-shadow: ${({theme:e})=>e.shadows.filterShadow};

  svg {
    height: ${({theme:e})=>e.spaces[6]};
    width: ${({theme:e})=>e.spaces[6]};
    > path {
      fill: ${({theme:e})=>e.colors.neutral600};
    }
  }
  &:hover {
    color: ${({theme:e})=>e.colors.primary600} !important;
    ${L.Typography} {
      color: ${({theme:e})=>e.colors.primary600} !important;
    }

    ${xn} {
      > circle {
        fill: ${({theme:e})=>e.colors.primary600};
      }
      > path {
        fill: ${({theme:e})=>e.colors.neutral100};
      }
    }
  }
  &:active {
    ${L.Typography} {
      color: ${({theme:e})=>e.colors.primary600};
    }
    ${xn} {
      > circle {
        fill: ${({theme:e})=>e.colors.primary600};
      }
      > path {
        fill: ${({theme:e})=>e.colors.neutral100};
      }
    }
  }
`,fd=(0,S.default)(w.Box)`
  height: 100%;
`,Sn=({hasError:e,hasMaxError:t,hasMinError:n,isDisabled:a,isOpen:s,label:i,missingComponentNumber:l,name:u,onClick:c})=>{const{formatMessage:d}=(0,A.useIntl)(),m=d({id:v("components.DynamicZone.add-component"),defaultMessage:"Add a component to {componentName}"},{componentName:i||u}),f=d({id:"app.utils.close-label",defaultMessage:"Close"});let y=s?f:m;return t&&!s&&(y=d({id:"components.Input.error.validation.max",defaultMessage:"The value is too high."})),n&&!s&&(y=d({id:v("components.DynamicZone.missing-components"),defaultMessage:"There {number, plural, =0 {are # missing components} one {is # missing component} other {are # missing components}}"},{number:l})),r.createElement(r.Fragment,null,r.createElement(j.Flex,{justifyContent:"center"},r.createElement(w.Box,{style:{cursor:a?"not-allowed":"pointer"}},r.createElement(md,{type:"button",onClick:c,disabled:a,hasError:e},r.createElement(j.Flex,null,r.createElement(fd,{"aria-hidden":!0,paddingRight:2},r.createElement(xn,{$isOpen:s,$hasError:e&&!s})),r.createElement(L.Typography,{variant:"pi",fontWeight:"bold",textColor:e&&!s?"danger600":"neutral500"},y))))))};Sn.defaultProps={label:"",missingComponentNumber:0},Sn.propTypes={label:o().string,hasError:o().bool.isRequired,hasMaxError:o().bool.isRequired,hasMinError:o().bool.isRequired,isDisabled:o().bool.isRequired,isOpen:o().bool.isRequired,missingComponentNumber:o().number,name:o().string.isRequired,onClick:o().func.isRequired};const gd=Sn,yd=(0,S.default)(w.Box)`
  border-radius: ${(0,g.pxToRem)(26)};
`,Ln=({label:e,labelAction:t,name:n,numberOfComponents:a,required:s,intlDescription:i})=>{const{formatMessage:l}=(0,A.useIntl)(),u=l({id:e||n,defaultMessage:e||n});return r.createElement(j.Flex,{justifyContent:"center"},r.createElement(w.Box,null,r.createElement(yd,{paddingTop:3,paddingBottom:3,paddingRight:4,paddingLeft:4,background:"neutral0",shadow:"filterShadow",color:"neutral500"},r.createElement(j.Flex,{direction:"column",justifyContent:"center"},r.createElement(j.Flex,{maxWidth:(0,g.pxToRem)(356)},r.createElement(L.Typography,{variant:"pi",textColor:"neutral600",fontWeight:"bold",ellipsis:!0},u,"\xA0"),r.createElement(L.Typography,{variant:"pi",textColor:"neutral600",fontWeight:"bold"},"(",a,")"),s&&r.createElement(L.Typography,{textColor:"danger600"},"*"),t&&r.createElement(w.Box,{paddingLeft:1},t)),i&&r.createElement(w.Box,{paddingTop:1,maxWidth:(0,g.pxToRem)(356)},r.createElement(L.Typography,{variant:"pi",textColor:"neutral600",ellipsis:!0},l(i)))))))};Ln.defaultProps={intlDescription:void 0,label:"",labelAction:void 0,required:!1},Ln.propTypes={intlDescription:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired}),label:o().string,labelAction:o().element,name:o().string.isRequired,numberOfComponents:o().number.isRequired,required:o().bool};const hd=Ln;var Fn=p(16925),_e=p(12001),kn=p(54742),bd=p(78325),Ed=p.n(bd),vd=p(30857),Cd=p.n(vd),Od=p(61868),Pd=p.n(Od),Rd=Object.defineProperty,sa=Object.getOwnPropertySymbols,Md=Object.prototype.hasOwnProperty,Td=Object.prototype.propertyIsEnumerable,ia=(e,t,n)=>t in e?Rd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wd=(e,t)=>{for(var n in t||(t={}))Md.call(t,n)&&ia(e,n,t[n]);if(sa)for(var n of sa(t))Td.call(t,n)&&ia(e,n,t[n]);return e};const Id=S.default.span`
  > svg {
    width: ${(0,g.pxToRem)(24)};
    height: ${(0,g.pxToRem)(24)};
    > circle {
      fill: ${({theme:e})=>e.colors.primary200};
    }
    > path {
      fill: ${({theme:e})=>e.colors.primary600};
    }
  }
`,An=({error:e,isReadOnly:t,onClick:n})=>{const{formatMessage:a}=(0,A.useIntl)();return r.createElement(r.Fragment,null,r.createElement(w.Box,{as:"button",background:"neutral100",borderColor:e?"danger600":"neutral200",disabled:t,hasRadius:!0,onClick:n,paddingTop:9,paddingBottom:9,type:"button"},r.createElement(ae.Stack,{spacing:2},r.createElement(j.Flex,{justifyContent:"center",style:{cursor:t?"not-allowed":"inherit"}},r.createElement(Id,null,r.createElement(aa(),null))),r.createElement(j.Flex,{justifyContent:"center"},r.createElement(L.Typography,{textColor:"primary600",variant:"pi",fontWeight:"bold"},a({id:v("components.empty-repeatable"),defaultMessage:"No entry yet. Click on the button below to add one."}))))),(e==null?void 0:e.id)&&r.createElement(L.Typography,{textColor:"danger600",variant:"pi"},a({id:e.id,defaultMessage:e.id},wd({},e.values))))};An.defaultProps={error:void 0,isReadOnly:!1},An.propTypes={error:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),isReadOnly:o().bool,onClick:o().func.isRequired};const la=An;var Dd=p(9086),xd=p.n(Dd),Sd=p(88708),Yt=p.n(Sd),Ld=p(27509),Jt=p.n(Ld),VO=p(40795),Fd=p(88591),kd=p.n(Fd),jn=p(59845),Ad=p(20871),jd=p.n(Ad),$d=p(48375),ca=p.n($d),Bd=p(31089),Nd=p.n(Bd),Vd=p(16043),qd=p.n(Vd),Wd=p(5109),zd=p.n(Wd),Ud=p(47955),Hd=p.n(Ud),_d=p(95706),Zd=p.n(_d),Gd=p(6658),Qd=p.n(Gd),Kd=p(36407),Yd=p.n(Kd),Jd=(e,t,n)=>new Promise((a,s)=>{var i=c=>{try{u(n.next(c))}catch(d){s(d)}},l=c=>{try{u(n.throw(c))}catch(d){s(d)}},u=c=>c.done?a(c.value):Promise.resolve(c.value).then(i,l);u((n=n.apply(e,t)).next())});(()=>Jd(void 0,null,function*(){yield p.e(7347).then(p.bind(p,98362))}))();const dt=new(kd())({html:!0,xhtmlOut:!1,breaks:!0,langPrefix:"language-",linkify:!0,typographer:!0,highlight:(e,t)=>{if(t&&t!=="auto"&&(0,jn.getLanguage)(t))return'<pre class="hljs language-'+dt.utils.escapeHtml(t.toLowerCase())+'"><code>'+(0,jn.highlight)(t,e,!0).value+"</code></pre>";if(t==="auto"){const n=(0,jn.highlightAuto)(e);return'<pre class="hljs language-'+dt.utils.escapeHtml(n.language)+'"><code>'+n.value+"</code></pre>"}return'<pre class="hljs"><code>'+dt.utils.escapeHtml(e)+"</code></pre>"}}).use(jd()).use(ca(),"warning").use(ca(),"tip").use(Nd()).use(qd()).use(zd()).use(Hd()).use(Zd()).use(Qd()).use(Yd());dt.renderer.rules.footnote_ref=(e,t,n,a,s)=>{const i=s.rules.footnote_caption(e,t,n,a,s);return'<sup class="footnote-ref"><span>'+i+"</span></sup>"},dt.renderer.rules.footnote_anchor=()=>' <span class="footnote-backref">\u21A9\uFE0E</span>';const Xd=dt;var ep=p(13993),ua=p.n(ep),tp=Object.defineProperty,np=Object.defineProperties,rp=Object.getOwnPropertyDescriptors,da=Object.getOwnPropertySymbols,op=Object.prototype.hasOwnProperty,ap=Object.prototype.propertyIsEnumerable,pa=(e,t,n)=>t in e?tp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sp=(e,t)=>{for(var n in t||(t={}))op.call(t,n)&&pa(e,n,t[n]);if(da)for(var n of da(t))ap.call(t,n)&&pa(e,n,t[n]);return e},ip=(e,t)=>np(e,rp(t));const lp=ip(sp({},ua().defaults),{allowedTags:!1,allowedAttributes:{"*":["href","align","alt","center","width","height","type","controls","target"],img:["src","alt"],source:["src","type"]}}),cp=e=>ua()(e,lp),up=S.default.div`
  position: absolute;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  padding: ${({theme:e})=>`${e.spaces[3]} ${e.spaces[4]}`};
  font-size: ${14/16}rem;
  background-color: ${({theme:e})=>e.colors.neutral0};
  z-index: 2;
  cursor: not-allowed;
  color: ${({theme:e})=>e.colors.neutral800};

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    margin-block-start: 10px;
    margin-block-end: 10px;
  }

  p {
    margin-bottom: 10px;
  }

  h1 {
    font-size: ${36/16}rem;
    font-weight: 600;
  }

  h2 {
    font-size: ${30/16}rem;
    font-weight: 500;
  }

  h3 {
    font-size: ${24/16}rem;
    font-weight: 500;
  }

  h4 {
    font-size: ${20/16}rem;
    font-weight: 500;
  }

  strong {
    font-weight: 800;
  }

  em {
    font-style: italic;
  }

  blockquote {
    margin-top: 41px;
    margin-bottom: 34px;
    font-size: ${14/16}rem;
    font-weight: 400;
    border-left: 5px solid #eee;
    font-style: italic;
    padding: 10px 20px;
  }

  img {
    max-width: 100%;
  }

  table {
    font-size: 13px;
    thead {
      background: rgb(243, 243, 243);
      tr {
        height: 43px;
      }
    }
    tr {
      border: 1px solid #c6cbd1;
    }
    th,
    td {
      padding: 0 25px;
      border: 1px solid #c6cbd1;
      border-bottom: 0;
      border-top: 0;
    }

    tbody {
      tr {
        height: 54px;
      }
    }
  }

  pre,
  code {
    font-size: 13px;
    border-radius: 3px;
    background-color: #002b36;
  }

  /* Inline code */
  p,
  pre,
  td {
    > code {
      color: #839496;
    }
  }

  .warning {
    background-color: #faa684;
    padding: 30px;
    border-radius: 3px;
  }
  .tip {
    padding: 30px;
    border-radius: 3px;
  }

  .footnote-ref,
  .footnote-backref {
    color: #007bff;
  }

  ol {
    list-style-type: decimal;
    margin-block-start: ${({theme:e})=>e.spaces[4]};
    margin-block-end: ${({theme:e})=>e.spaces[4]};
    margin-inline-start: 0px;
    margin-inline-end: 0px;
    padding-inline-start: ${({theme:e})=>e.spaces[4]};
    ol,
    ul {
      margin-block-start: 0px;
      margin-block-end: 0px;
    }
  }

  ul {
    list-style-type: disc;
    margin-block-start: ${({theme:e})=>e.spaces[4]};
    margin-block-end: ${({theme:e})=>e.spaces[4]};
    margin-inline-start: 0px;
    margin-inline-end: 0px;
    padding-inline-start: ${({theme:e})=>e.spaces[4]};
    ul,
    ol {
      margin-block-start: 0px;
      margin-block-end: 0px;
    }
  }
`,$n=({data:e})=>{const t=(0,r.useMemo)(()=>cp(Xd.render(e||"")),[e]);return r.createElement(up,null,r.createElement("div",{dangerouslySetInnerHTML:{__html:t}}))};$n.defaultProps={data:""},$n.propTypes={data:o().string};const ma=(0,r.memo)($n),dp=S.default.div`
  cursor: ${({disabled:e})=>e?"not-allowed !important":"auto"};
  height: 100%;
  /* BASICS */
  .CodeMirror-placeholder {
    color: ${({theme:e})=>e.colors.neutral600} !important;
  }

  .CodeMirror {
    /* Set height, width, borders, and global font properties here */
    font-size: ${14/16}rem;
    height: ${({isExpandMode:e})=>e?"100%":"290px"};
    color: ${({theme:e})=>e.colors.neutral800};
    direction: ltr;
    font-family: --apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell,
      'Open Sans', 'Helvetica Neue', sans-serif;
  }

  /* PADDING */

  .CodeMirror-lines {
    padding: ${({theme:e})=>`${e.spaces[3]} ${e.spaces[4]}`};
    /* Vertical padding around content */
  }

  .CodeMirror-scrollbar-filler,
  .CodeMirror-gutter-filler {
    /* The little square between H and V scrollbars */
    background-color: ${({theme:e})=>`${e.colors.neutral0}`};
  }

  /* GUTTER */

  .CodeMirror-gutters {
    border-right: 1px solid #ddd;
    background-color: #f7f7f7;
    white-space: nowrap;
  }
  .CodeMirror-linenumbers {
  }
  .CodeMirror-linenumber {
    padding: 0 3px 0 5px;
    min-width: 20px;
    text-align: right;
    color: #999;
    white-space: nowrap;
  }

  .CodeMirror-guttermarker {
    color: black;
  }
  .CodeMirror-guttermarker-subtle {
    color: #999;
  }

  /* CURSOR */

  .CodeMirror-cursor {
    border-left: 1px solid black;
    border-right: none;
    width: 0;
  }
  /* Shown when moving in bi-directional text */
  .CodeMirror div.CodeMirror-secondarycursor {
    border-left: 1px solid silver;
  }
  .cm-fat-cursor .CodeMirror-cursor {
    width: auto;
    border: 0 !important;
    background: #7e7;
  }
  .cm-fat-cursor div.CodeMirror-cursors {
    /* z-index: 1; */
  }

  .cm-fat-cursor-mark {
    background-color: rgba(20, 255, 20, 0.5);
    -webkit-animation: blink 1.06s steps(1) infinite;
    -moz-animation: blink 1.06s steps(1) infinite;
    animation: blink 1.06s steps(1) infinite;
  }
  .cm-animate-fat-cursor {
    width: auto;
    border: 0;
    -webkit-animation: blink 1.06s steps(1) infinite;
    -moz-animation: blink 1.06s steps(1) infinite;
    animation: blink 1.06s steps(1) infinite;
    background-color: #7e7;
  }

  /* Can style cursor different in overwrite (non-insert) mode */
  .CodeMirror-overwrite .CodeMirror-cursor {
  }

  .cm-tab {
    display: inline-block;
    text-decoration: inherit;
  }

  .CodeMirror-rulers {
    position: absolute;
    left: 0;
    right: 0;
    top: -50px;
    bottom: 0;
    overflow: hidden;
  }
  .CodeMirror-ruler {
    border-left: 1px solid #ccc;
    top: 0;
    bottom: 0;
    position: absolute;
  }

  /* DEFAULT THEME */

  .cm-header,
  .cm-strong {
    font-weight: bold;
  }
  .cm-em {
    font-style: italic;
  }
  .cm-link {
    text-decoration: underline;
  }
  .cm-strikethrough {
    text-decoration: line-through;
  }

  .CodeMirror-composing {
    border-bottom: 2px solid;
  }

  /* Default styles for common addons */

  div.CodeMirror span.CodeMirror-matchingbracket {
    color: #0b0;
  }
  div.CodeMirror span.CodeMirror-nonmatchingbracket {
    color: #a22;
  }
  .CodeMirror-matchingtag {
    background: rgba(255, 150, 0, 0.3);
  }
  .CodeMirror-activeline-background {
    background: #e8f2ff;
  }

  /* STOP */

  /* The rest of this file contains styles related to the mechanics of
    the editor. You probably shouldn't touch them. */

  .CodeMirror {
    position: relative;
    overflow: hidden;
    background: ${({theme:e})=>`${e.colors.neutral0}`};
  }

  .CodeMirror-scroll {
    overflow: scroll !important; /* Things will break if this is overridden */
    /* 50px is the magic margin used to hide the element's real scrollbars */
    /* See overflow: hidden in .CodeMirror */
    margin-bottom: -50px;
    margin-right: -50px;
    padding-bottom: 50px;
    height: 100%;
    outline: none; /* Prevent dragging from highlighting the element */
    position: relative;
  }
  .CodeMirror-sizer {
    position: relative;
    border-right: 50px solid transparent;
  }

  /* The fake, visible scrollbars. Used to force redraw during scrolling
    before actual scrolling happens, thus preventing shaking and
    flickering artifacts. */
  .CodeMirror-vscrollbar,
  .CodeMirror-hscrollbar,
  .CodeMirror-scrollbar-filler,
  .CodeMirror-gutter-filler {
    position: absolute;
    z-index: 1;
    display: none;
    outline: none;
  }

  .CodeMirror-vscrollbar {
    right: 0;
    top: 0;
    overflow-x: hidden;
    overflow-y: scroll;
  }
  .CodeMirror-hscrollbar {
    bottom: 0;
    left: 0;
    overflow-y: hidden;
    overflow-x: scroll;
  }
  .CodeMirror-scrollbar-filler {
    right: 0;
    bottom: 0;
  }

  .CodeMirror-lines {
    cursor: text;
    min-height: 1px; /* prevents collapsing before first draw */
  }
  /* Reset some styles that the rest of the page might have set */
  .CodeMirror pre.CodeMirror-line,
  .CodeMirror pre.CodeMirror-line-like {
    -moz-border-radius: 0;
    -webkit-border-radius: 0;
    border-radius: 0;
    border-width: 0;
    background: transparent;
    font-family: inherit;
    font-size: inherit;
    margin: 0;
    white-space: pre;
    word-wrap: normal;
    line-height: 1.5;
    color: inherit;
    /* z-index: 2; */
    position: relative;
    overflow: visible;
    -webkit-tap-highlight-color: transparent;
    -webkit-font-variant-ligatures: contextual;
    font-variant-ligatures: contextual;
  }

  .CodeMirror pre.CodeMirror-line-like {
    z-index: 2;
  }

  .CodeMirror-wrap pre.CodeMirror-line,
  .CodeMirror-wrap pre.CodeMirror-line-like {
    word-wrap: break-word;
    white-space: pre-wrap;
    word-break: normal;
  }

  .CodeMirror-linebackground {
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    z-index: 0;
  }

  .CodeMirror-linewidget {
    position: relative;
    /* z-index: 2; */
    padding: 0.1px; /* Force widget margins to stay inside of the container */
  }

  .CodeMirror-widget {
  }

  .CodeMirror-rtl pre {
    direction: rtl;
  }

  .CodeMirror-code {
    outline: none;
  }

  /* Force content-box sizing for the elements where we expect it */
  .CodeMirror-scroll,
  .CodeMirror-sizer,
  .CodeMirror-gutter,
  .CodeMirror-gutters,
  .CodeMirror-linenumber {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
  }

  .CodeMirror-measure {
    position: absolute;
    width: 100%;
    height: 0;
    overflow: hidden;
    visibility: hidden;
  }

  .CodeMirror-cursor {
    position: absolute;
    pointer-events: none;
    border-color: ${({theme:e})=>`${e.colors.neutral800}`};
  }
  .CodeMirror-measure pre {
    position: static;
  }

  div.CodeMirror-cursors {
    visibility: hidden;
    position: relative;
    + div {
      z-index: 0 !important;
    }
  }

  div.CodeMirror-dragcursors {
    visibility: visible;
  }

  .CodeMirror-focused div.CodeMirror-cursors {
    visibility: visible;
  }

  .CodeMirror-selected {
    background: ${({theme:e})=>e.colors.neutral200};
    /* z-index: -10; */
  }
  .CodeMirror-crosshair {
    cursor: crosshair;
  }

  /* Used to force a border model for a node */
  .cm-force-border {
    padding-right: 0.1px;
  }

  /* See issue #2901 */
  .cm-tab-wrap-hack:after {
    content: '';
  }

  /* Help users use markselection to safely style text background */
  span.CodeMirror-selectedtext {
    background: none;
  }

  span {
    color: ${({theme:e})=>e.colors.neutral800} !important;
  }
`,Le=(0,S.default)(Me.IconButton)`
  padding: ${({theme:e})=>e.spaces[2]};
  /* Trick to prevent the outline from overflowing because of the general outline-offset */
  outline-offset: -2px !important;

  svg {
    width: ${18/16}rem;
    height: ${18/16}rem;
  }
`,pp=(0,S.default)(Le)`
  svg {
    width: ${8/16}rem;
    height: ${8/16}rem;
  }
`,fa=(0,S.default)(Me.IconButtonGroup)`
  margin-left: ${({theme:e})=>e.spaces[4]};
`,ga=(0,S.default)(Me.IconButton)`
  margin: ${({theme:e})=>`0 ${e.spaces[2]}`};
  padding: ${({theme:e})=>e.spaces[2]};

  svg {
    width: ${18/16}rem;
    height: ${18/16}rem;
  }
`,mp=(0,S.default)(Me.IconButtonGroup)`
  margin-right: ${({theme:e})=>`${e.spaces[2]}`};
`,fp=S.default.div`
  position: relative;
  height: calc(100% - 48px);
`,gp=(0,S.default)(Dn.BaseButton)`
  background-color: transparent;
  border: none;
  align-items: center;

  svg {
    margin-left: ${({theme:e})=>`${e.spaces[2]}`};
    path {
      fill: ${({theme:e})=>e.colors.neutral700};
      width: ${12/16}rem;
      height: ${12/16}rem;
    }
  }
`;var Xt=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,yp=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,hp=/[*+-]\s/;function bp(e){if(e.getOption("disableInput"))return Jt().Pass;for(var t=e.listSelections(),n=[],a=0;a<t.length;a++){var s=t[a].head,i=e.getStateAfter(s.line),l=i.list!==!1,u=i.quote!==0,c=e.getLine(s.line),d=Xt.exec(c),m=/^\s*$/.test(c.slice(0,s.ch));if(!t[a].empty()||!l&&!u||!d||m){e.execCommand("newlineAndIndent");return}if(yp.test(c)){var f=u&&/>\s*$/.test(c),y=!/>\s*$/.test(c);(f||y)&&e.replaceRange("",{line:s.line,ch:0},{line:s.line,ch:s.ch+1}),n[a]=`
`}else{var h=d[1],b=d[5],E=!(hp.test(d[2])||d[2].indexOf(">")>=0),O=E?parseInt(d[3],10)+1+d[4]:d[2].replace("x"," ");n[a]=`
`+h+O+b,E&&Ep(e,s)}}e.replaceSelections(n)}function Ep(e,t){var n=t.line,a=0,s=0,i=Xt.exec(e.getLine(n)),l=i[1];do{a+=1;var u=n+a,c=e.getLine(u),d=Xt.exec(c);if(d){var m=d[1],f=parseInt(i[3],10)+a-s,y=parseInt(d[3],10),h=y;if(l===m&&!isNaN(y))f===y&&(h=y+1),f>y&&(h=f+1),e.replaceRange(c.replace(Xt,m+h+d[4]+d[5]),{line:u,ch:0},{line:u,ch:c.length});else{if(l.length>m.length||l.length<m.length&&a===1)return;s+=1}}}while(d)}const vp=bp,Bn=({disabled:e,editorRef:t,error:n,isPreviewMode:a,isExpandMode:s,name:i,onChange:l,placeholder:u,textareaRef:c,value:d})=>{const m=(0,r.useRef)(l);return(0,r.useEffect)(()=>{t.current=Jt().fromTextArea(c.current,{lineWrapping:!0,extraKeys:{Enter:"newlineAndIndentContinueMarkdownList",Tab:!1,"Shift-Tab":!1},readOnly:!1,smartIndent:!1,placeholder:u,spellcheck:!0,inputStyle:"contenteditable"}),Jt().commands.newlineAndIndentContinueMarkdownList=vp,t.current.on("change",f=>{m.current({target:{name:i,value:f.getValue(),type:"wysiwyg"}})})},[t,c,i,u]),(0,r.useEffect)(()=>{d&&!t.current.state.focused&&t.current.setValue(d)},[t,d]),(0,r.useEffect)(()=>{a||e?t.current.setOption("readOnly","nocursor"):t.current.setOption("readOnly",!1)},[e,a,t]),(0,r.useEffect)(()=>{n?t.current.setOption("screenReaderLabel",n):t.current.setOption("screenReaderLabel","Editor")},[t,n]),r.createElement(fp,null,r.createElement(dp,{isExpandMode:s,disabled:e||a},r.createElement("textarea",{ref:c})),a&&r.createElement(ma,{data:d}))};Bn.defaultProps={disabled:!1,error:void 0,isPreviewMode:!1,isExpandMode:!1,placeholder:"",value:""},Bn.propTypes={disabled:o().bool,editorRef:o().shape({current:o().any}).isRequired,error:o().string,isPreviewMode:o().bool,isExpandMode:o().bool,name:o().string.isRequired,onChange:o().func.isRequired,placeholder:o().string,textareaRef:o().shape({current:o().any}).isRequired,value:o().string};const Cp=Bn;var ye=p(44526),ue=p(25716),Op=p(37853),Pp=p(19882),ya=p.n(Pp),Rp=p(61980),ha=p.n(Rp),Mp=p(70052),ba=p.n(Mp),Tp=p(15053),wp=p.n(Tp),Ip=p(18767),Dp=p.n(Ip),xp=p(83358),Sp=p.n(xp),Lp=p(69822),Fp=p.n(Lp),kp=p(88467),Ap=p.n(kp),jp=p(83262),$p=p.n(jp),Bp=p(49157),Np=p.n(Bp),Vp=p(75400),Ea=p.n(Vp);const Nn=({disabled:e,editorRef:t,isExpandMode:n,isPreviewMode:a,onActionClick:s,onToggleMediaLib:i,onTogglePreviewMode:l})=>{const[u,c]=(0,r.useState)(!1),{formatMessage:d}=(0,A.useIntl)(),m=d({id:"components.Wysiwyg.selectOptions.title",defaultMessage:"Add a title"}),f=(0,r.useRef)(),y=()=>{c(h=>!h)};return e||a?r.createElement(w.Box,{padding:2,background:"neutral100"},r.createElement(j.Flex,{justifyContent:"space-between"},r.createElement(j.Flex,null,r.createElement(ue.Select,{disabled:!0,id:"selectTitle",placeholder:m,size:"S","aria-label":m},r.createElement(ue.Option,{value:"h1"},"h1"),r.createElement(ue.Option,{value:"h2"},"h2"),r.createElement(ue.Option,{value:"h3"},"h3"),r.createElement(ue.Option,{value:"h4"},"h4"),r.createElement(ue.Option,{value:"h5"},"h5"),r.createElement(ue.Option,{value:"h6"},"h6")),r.createElement(fa,null,r.createElement(Le,{disabled:!0,id:"Bold",label:"Bold",name:"Bold",icon:r.createElement(ya(),null)}),r.createElement(Le,{disabled:!0,id:"Italic",label:"Italic",name:"Italic",icon:r.createElement(ha(),null)}),r.createElement(Le,{disabled:!0,id:"Underline",label:"Underline",name:"Underline",icon:r.createElement(ba(),null)})),r.createElement(ga,{disabled:!0,id:"more",label:"More",icon:r.createElement(Ea(),null)})),!n&&r.createElement(ye.Button,{onClick:l,variant:"tertiary",id:"preview"},d({id:"components.Wysiwyg.ToggleMode.markdown-mode",defaultMessage:"Markdown mode"})))):r.createElement(w.Box,{padding:2,background:"neutral100"},r.createElement(j.Flex,{justifyContent:"space-between"},r.createElement(j.Flex,null,r.createElement(ue.Select,{id:"selectTitle",placeholder:m,size:"S",onChange:h=>s(h,t)},r.createElement(ue.Option,{value:"h1"},"h1"),r.createElement(ue.Option,{value:"h2"},"h2"),r.createElement(ue.Option,{value:"h3"},"h3"),r.createElement(ue.Option,{value:"h4"},"h4"),r.createElement(ue.Option,{value:"h5"},"h5"),r.createElement(ue.Option,{value:"h6"},"h6")),r.createElement(fa,null,r.createElement(Le,{onClick:()=>s("Bold",t),id:"Bold",label:"Bold",name:"Bold",icon:r.createElement(ya(),null)}),r.createElement(Le,{onClick:()=>s("Italic",t),id:"Italic",label:"Italic",name:"Italic",icon:r.createElement(ha(),null)}),r.createElement(Le,{onClick:()=>s("Underline",t),id:"Underline",label:"Underline",name:"Underline",icon:r.createElement(ba(),null)})),r.createElement(ga,{ref:f,onClick:y,id:"more",label:"More",icon:r.createElement(Ea(),null)}),u&&r.createElement(Op.Popover,{centered:!0,source:f,spacing:4,id:"popover"},r.createElement(kn.FocusTrap,{onEscape:y,restoreFocus:!1},r.createElement(j.Flex,null,r.createElement(mp,null,r.createElement(Le,{onClick:()=>s("Strikethrough",t,y),id:"Strikethrough",label:"Strikethrough",name:"Strikethrough",icon:r.createElement(wp(),null)}),r.createElement(Le,{onClick:()=>s("BulletList",t,y),id:"BulletList",label:"BulletList",name:"BulletList",icon:r.createElement(Dp(),null)}),r.createElement(Le,{onClick:()=>s("NumberList",t,y),id:"NumberList",label:"NumberList",name:"NumberList",icon:r.createElement(Sp(),null)})),r.createElement(Me.IconButtonGroup,null,r.createElement(Le,{onClick:()=>s("Code",t,y),id:"Code",label:"Code",name:"Code",icon:r.createElement(Fp(),null)}),r.createElement(Le,{onClick:()=>{y(),i()},id:"Image",label:"Image",name:"Image",icon:r.createElement(Ap(),null)}),r.createElement(pp,{onClick:()=>s("Link",t,y),id:"Link",label:"Link",name:"Link",icon:r.createElement($p(),null)}),r.createElement(Le,{onClick:()=>s("Quote",t,y),id:"Quote",label:"Quote",name:"Quote",icon:r.createElement(Np(),null)})))))),l&&r.createElement(ye.Button,{onClick:l,variant:"tertiary",id:"preview"},d({id:"components.Wysiwyg.ToggleMode.preview-mode",defaultMessage:"Preview mode"}))))};Nn.defaultProps={isPreviewMode:!1,onActionClick:()=>{},onToggleMediaLib:()=>{},onTogglePreviewMode:void 0},Nn.propTypes={disabled:o().bool.isRequired,editorRef:o().shape({current:o().any}).isRequired,isExpandMode:o().bool.isRequired,isPreviewMode:o().bool,onActionClick:o().func,onToggleMediaLib:o().func,onTogglePreviewMode:o().func};const qp=Nn;var Wp=p(39766),zp=p.n(Wp);const Vn=({onToggleExpand:e})=>{const{formatMessage:t}=(0,A.useIntl)();return r.createElement(w.Box,{padding:2,background:"neutral100",hasRadius:!0},r.createElement(j.Flex,{justifyContent:"flex-end",alignItems:"flex-end"},r.createElement(gp,{id:"expand",onClick:e},r.createElement(L.Typography,null,t({id:"components.WysiwygBottomControls.fullscreen",defaultMessage:"Expand"})),r.createElement(zp(),null))))};Vn.defaultProps={onToggleExpand:()=>{}},Vn.propTypes={onToggleExpand:o().func};const Up=Vn;var Hp=Object.defineProperty,va=Object.getOwnPropertySymbols,_p=Object.prototype.hasOwnProperty,Zp=Object.prototype.propertyIsEnumerable,Ca=(e,t,n)=>t in e?Hp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Gp=(e,t)=>{for(var n in t||(t={}))_p.call(t,n)&&Ca(e,n,t[n]);if(va)for(var n of va(t))Zp.call(t,n)&&Ca(e,n,t[n]);return e};const qn=({id:e,error:t,name:n,description:a})=>{const{formatMessage:s}=(0,A.useIntl)(),i=a?s({id:a.id,defaultMessage:a.defaultMessage},Gp({},a.values)):"";return!i||t?null:r.createElement(L.Typography,{as:"p",variant:"pi",id:`${e||n}-hint`,textColor:"neutral600"},i)};qn.defaultProps={id:void 0,description:void 0,error:void 0},qn.propTypes={description:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),error:o().string,id:o().string,name:o().string.isRequired};const Qp=qn,Oa=(e,t)=>{let n;switch(e){case"Strikethrough":n=`~~${t}~~`;break;case"Bold":n=`**${t}**`;break;case"Italic":n=`_${t}_`;break;case"Underline":n=`<u>${t}</u>`;break;case"Code":n=`\`\`\`
${t}
\`\`\``;break;case"Link":n=`[${t}](link)`;break;case"Quote":n=`>${t}`;break;default:n=t}return n},Pa=e=>{let t,n={start:e.length,end:0};switch(e){case"Strikethrough":t=`~~${e}~~`,n.end=2;break;case"Bold":t=`**${e}**`,n.end=2;break;case"Italic":t=`_${e}_`,n.end=1;break;case"alt":t=`[${e}]()`,n.end=3;break;case"Underline":t=`<u>${e}</u>`,n.end=4;break;case"Code":t=`\`\`\`
${e}
\`\`\``,n.end=3;break;case"Link":t=`[${e}](link)`,n.end=7;break;case"Quote":t=`>${e}`,n.end=0;break;default:t=""}return{editedText:t,selection:n}},Ra=e=>{let t;switch(e){case"BulletList":t="- ";break;case"NumberList":t="1. ";break;case"h1":t="# ";break;case"h2":t="## ";break;case"h3":t="### ";break;case"h4":t="#### ";break;case"h5":t="##### ";break;case"h6":t="###### ";break;default:return""}return t},Ma=(e,t)=>{const n=e.current.getSelection();let a;if(n){const s=Oa(t,n);e.current.replaceSelection(s),e.current.focus()}else{a=Pa(t),e.current.replaceSelection(a.editedText),e.current.focus();const{line:s,ch:i}=e.current.getCursor(),l=i-a.selection.end,u=i-a.selection.end-a.selection.start;e.current.setSelection({line:s,ch:u},{line:s,ch:l})}},Kp=(e,t)=>{const n=e.current.getDoc(),a=t==="BulletList"?"- ":"1. ";if(n.somethingSelected()){const s=n.listSelections();let i=null;e.current.operation(function(){s.forEach(function(l){const u=[l.head.line,l.anchor.line].sort();i==null&&(i=n.getLine(u[0]).startsWith(a));for(let c=u[0];c<=u[1];c++)if(i)n.getLine(c).startsWith(a)&&n.replaceRange("",{line:c,ch:0},{line:c,ch:a.length});else{const d=t==="BulletList"?"- ":`${c+1}. `;n.replaceRange(d,{line:c,ch:0})}})})}else{let{line:s}=n.getCursor();const i=Ra(t),l=e.current.getLine(s),u=i+l;e.current.setSelection({line:s,ch:0},{line:s,ch:l.length}),e.current.replaceSelection(u)}e.current.focus()},Yp=(e,t)=>{let{line:n}=e.current.getCursor();const a=Ra(t),s=e.current.getLine(n),i=s.replace(/#{1,6}\s/g,"").trim(),l=a+i;e.current.setSelection({line:n,ch:0},{line:n,ch:s.length}),e.current.replaceSelection(l),setTimeout(()=>{const u=e.current.getLine(n).length;e.current.focus(),e.current.setCursor({line:n,ch:u})},0)},Jp=(e,t)=>{let{line:n,ch:a}=e.current.getCursor();t.forEach((s,i)=>{let l=e.current.getLine(n).length;e.current.setCursor({line:n,ch:l}),(i>0||i===0&&a!==0)&&(l=e.current.getLine(n).length,e.current.setCursor({line:n,ch:l}),n++,e.current.replaceSelection(`
`)),s.mime.includes("image")?e.current.replaceSelection(`![${s.alt}](${s.url})`):e.current.replaceSelection(`[${s.alt}](${s.url})`)}),setTimeout(()=>e.current.focus(),0)},Xp=(e,t,n,a,s)=>{const i=Oa(t,s),l=e.current.getRange({line:n+1,ch:0},{line:1/0,ch:1/0});if(e.current.replaceRange("",{line:n+1,ch:0},{line:1/0,ch:1/0}),e.current.replaceSelection(""),e.current.setCursor({line:n,ch:a}),e.current.replaceSelection(`
`),e.current.replaceSelection(i),t==="Code"){let{line:u}=e.current.getCursor();e.current.setCursor({line:u-1,ch:s.length})}e.current.replaceRange(l,{line:n+4,ch:0},{line:1/0,ch:1/0}),e.current.focus()},em=(e,t,n,a)=>{const s=Pa(t),i=e.current.getRange({line:n+1,ch:0},{line:1/0,ch:1/0});if(e.current.replaceRange("",{line:n+1,ch:0},{line:1/0,ch:1/0}),e.current.setCursor({line:n,ch:a}),e.current.replaceSelection(`
`),e.current.replaceSelection(s.editedText),t==="Code")n+=2,e.current.setSelection({line:n,ch:0},{line:n,ch:4});else{n+=1;let{ch:l}=e.current.getCursor(),u=l-s.selection.end,c=l-s.selection.end-s.selection.start;e.current.setSelection({line:n,ch:c},{line:n,ch:u})}e.current.replaceRange(i,{line:n+2,ch:0},{line:1/0,ch:1/0}),e.current.focus()},tm=(e,t)=>{const n=e.current.getSelection();let{line:a}=e.current.getCursor(),s=e.current.getLine(a).length;n?Xp(e,t,a,s,n):em(e,t,a,s)};var nm=p(64410),rm=p(43768),om=p.n(rm);const am=(e,t)=>`${e}${Math.floor(t*255).toString(16).padStart(2,0)}`,sm=(0,S.default)(j.Flex)`
  background: ${({theme:e})=>am(e.colors.neutral800,.2)};
`,im=(0,S.default)(w.Box)`
  border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
`,lm=(0,S.default)(Dn.BaseButton)`
  background-color: transparent;
  border: none;
  align-items: center;

  svg {
    margin-left: ${({theme:e})=>`${e.spaces[2]}`};
    path {
      fill: ${({theme:e})=>e.colors.neutral700};
      width: ${12/16}rem;
      height: ${12/16}rem;
    }
  }
`,Wn=({children:e,isExpandMode:t,error:n,previewContent:a,onCollapse:s})=>{const{formatMessage:i}=(0,A.useIntl)();return(0,r.useEffect)(()=>{const l=document.body;return t&&l.classList.add("lock-body-scroll"),()=>{t&&l.classList.remove("lock-body-scroll")}},[t]),t?r.createElement(nm.Portal,{role:"dialog","aria-modal":!1},r.createElement(kn.FocusTrap,{onEscape:s},r.createElement(sm,{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:4,justifyContent:"center",onClick:s},r.createElement(w.Box,{id:"wysiwyg-expand",background:"neutral0",hasRadius:!0,shadow:"popupShadow",overflow:"hidden",width:"70%",height:"70%",onClick:l=>l.stopPropagation()},r.createElement(j.Flex,{height:"100%",alignItems:"flex-start"},r.createElement(im,{flex:"1",height:"100%"},e),r.createElement(w.Box,{flex:"1",height:"100%"},r.createElement(j.Flex,{height:(0,g.pxToRem)(48),background:"neutral100",justifyContent:"flex-end"},r.createElement(lm,{id:"collapse",onClick:s},r.createElement(L.Typography,null,i({id:"components.Wysiwyg.collapse",defaultMessage:"Collapse"})),r.createElement(om(),null))),r.createElement(w.Box,{position:"relative",height:"100%"},r.createElement(ma,{data:a})))))))):r.createElement(w.Box,{borderColor:n?"danger600":"neutral200",borderStyle:"solid",borderWidth:"1px",hasRadius:!0},e)};Wn.defaultProps={error:void 0,previewContent:""},Wn.propTypes={children:o().node.isRequired,error:o().string,isExpandMode:o().bool.isRequired,previewContent:o().string,onCollapse:o().func.isRequired};var cm=Object.defineProperty,Ta=Object.getOwnPropertySymbols,um=Object.prototype.hasOwnProperty,dm=Object.prototype.propertyIsEnumerable,wa=(e,t,n)=>t in e?cm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ia=(e,t)=>{for(var n in t||(t={}))um.call(t,n)&&wa(e,n,t[n]);if(Ta)for(var n of Ta(t))dm.call(t,n)&&wa(e,n,t[n]);return e};const pm=(0,S.default)(w.Box)`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,mm=(0,S.default)(L.Typography)`
  line-height: 0;
`,zn=({description:e,disabled:t,error:n,intlLabel:a,labelAction:s,name:i,onChange:l,placeholder:u,value:c,required:d})=>{const{formatMessage:m}=(0,A.useIntl)(),f=(0,r.useRef)(null),y=(0,r.useRef)(null),[h,b]=(0,r.useState)(!1),[E,O]=(0,r.useState)(!1),[I,C]=(0,r.useState)(!1),{components:x}=(0,g.useLibrary)(),D=x["media-library"],W=()=>O(k=>!k),F=()=>b(k=>!k),$=()=>{b(!1),C(k=>!k)},N=(k,Z,B)=>{switch(k){case"Link":case"Strikethrough":{Ma(Z,k),B();break}case"Code":case"Quote":{tm(Z,k),B();break}case"Bold":case"Italic":case"Underline":{Ma(Z,k);break}case"BulletList":case"NumberList":{Kp(Z,k),B();break}case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":{Yp(Z,k);break}default:}},G=k=>{const Z=k.map(B=>({alt:B.alternativeText||B.name,url:(0,g.prefixFileUrlWithBackendUrl)(B.url),mime:B.mime}));Jp(y,Z),O(!1)},V=u?m({id:u.id,defaultMessage:u.defaultMessage},Ia({},u.values)):"",_=a.id?m({id:a.id,defaultMessage:a.defaultMessage},Ia({},a.values)):i;return r.createElement(r.Fragment,null,r.createElement(ae.Stack,{spacing:1},r.createElement(ae.Stack,{horizontal:!0,spacing:1},r.createElement(L.Typography,{variant:"pi",fontWeight:"bold",textColor:"neutral800"},_,d&&r.createElement(mm,{textColor:"danger600"},"*")),s&&r.createElement(pm,{paddingLeft:1},s)),r.createElement(Wn,{isExpandMode:I,error:n,previewContent:c,onCollapse:$},r.createElement(qp,{isExpandMode:I,editorRef:y,isPreviewMode:h,onActionClick:N,onToggleMediaLib:W,onTogglePreviewMode:I?void 0:F,disabled:t}),r.createElement(Cp,{disabled:t,isExpandMode:I,editorRef:y,error:n,isPreviewMode:h,name:i,onChange:l,placeholder:V,textareaRef:f,value:c}),!I&&r.createElement(Up,{onToggleExpand:$})),r.createElement(Qp,{description:e,name:i,error:n})),n&&r.createElement(w.Box,{paddingTop:1},r.createElement(L.Typography,{variant:"pi",textColor:"danger600","data-strapi-field-error":!0},n)),E&&r.createElement(D,{onClose:W,onSelectAssets:G}))};zn.defaultProps={description:null,disabled:!1,error:"",labelAction:void 0,placeholder:null,required:!1,value:""},zn.propTypes={description:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),disabled:o().bool,error:o().string,intlLabel:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}).isRequired,labelAction:o().element,name:o().string.isRequired,onChange:o().func.isRequired,placeholder:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),required:o().bool,value:o().string};const fm=zn;var gm=p(16285),ym=p.n(gm),Dt=p(20001),hm=p(96481);const bm=S.default.div`
  cursor: ${({disabled:e})=>e?"not-allowed !important":"auto"};
  /* BASICS */

  .colored {
    background-color: yellow;
    color: black !important;
  }

  > div {
    border-radius: 3px;
    > div:last-of-type {
      min-height: 253px;
      max-height: 506px;
    }
  }

  .CodeMirror {
    /* Set height, width, borders, and global font properties here */
    font-size: ${14/16}rem;
    direction: ltr;
    z-index: 0;
  }
`,Em=(0,S.default)(w.Box)`
  border-radius: ${({theme:e})=>e.borderRadius};
  border: 1px solid ${({theme:e,error:t})=>t?e.colors.danger600:"transparent"};
`;var vm=Object.defineProperty,Da=Object.getOwnPropertySymbols,Cm=Object.prototype.hasOwnProperty,Om=Object.prototype.propertyIsEnumerable,xa=(e,t,n)=>t in e?vm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Pm=(e,t)=>{for(var n in t||(t={}))Cm.call(t,n)&&xa(e,n,t[n]);if(Da)for(var n of Da(t))Om.call(t,n)&&xa(e,n,t[n]);return e};const Rm=(0,S.default)(w.Box)`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,Un=({intlLabel:e,labelAction:t,name:n,required:a})=>{const{formatMessage:s}=(0,A.useIntl)(),i=e!=null&&e.id?s({id:e.id,defaultMessage:e.defaultMessage},Pm({},e.values)):n;return r.createElement(j.Flex,null,r.createElement(Dt.FieldLabel,{required:a},i),t&&r.createElement(Rm,{paddingLeft:1},t))};Un.defaultProps={id:void 0,intlLabel:void 0,labelAction:void 0,required:!1},Un.propTypes={id:o().string,intlLabel:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),labelAction:o().element,name:o().string.isRequired,required:o().bool};const Mm=Un,Hn=({name:e,hint:t,error:n,children:a})=>{const{formatMessage:s}=(0,A.useIntl)(),i=n?s({id:n,defaultMessage:n}):"";return r.createElement(Dt.Field,{name:e,hint:t&&s(t),error:i,id:e},a)};Hn.defaultProps={hint:void 0,error:""},Hn.propTypes={name:o().string.isRequired,hint:o().shape({id:o().string,defaultMessage:o().string}),error:o().string,children:o().node.isRequired};const Tm=Hn;var wm=Object.defineProperty,Im=(e,t,n)=>t in e?wm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ze=(e,t,n)=>(Im(e,typeof t!="symbol"?t+"":t,n),n),Dm=(e,t,n)=>new Promise((a,s)=>{var i=c=>{try{u(n.next(c))}catch(d){s(d)}},l=c=>{try{u(n.throw(c))}catch(d){s(d)}},u=c=>c.done?a(c.value):Promise.resolve(c.value).then(i,l);u((n=n.apply(e,t)).next())});const xm=600,Sm="blackboard";(()=>Dm(void 0,null,function*(){yield p.e(3860).then(p.t.bind(p,70296,23)),yield p.e(2781).then(p.t.bind(p,80249,23)),yield p.e(953).then(p.t.bind(p,54745,23)),yield p.e(5178).then(p.t.bind(p,3903,23)),yield p.e(5509).then(p.t.bind(p,59577,23)),yield p.e(3973).then(p.bind(p,65701)),yield p.e(2218).then(p.bind(p,88333))}))();class _n extends r.Component{constructor(t){super(t),Ze(this,"timer",null),Ze(this,"setInitValue",()=>{const{value:n}=this.props;try{return n===null?this.codeMirror.setValue(""):this.codeMirror.setValue(n)}catch(a){return this.setState({error:!0})}}),Ze(this,"setSize",()=>this.codeMirror.setSize("100%","auto")),Ze(this,"getContentAtLine",n=>this.codeMirror.getLine(n)),Ze(this,"getEditorOption",n=>this.codeMirror.getOption(n)),Ze(this,"getValue",()=>this.codeMirror.getValue()),Ze(this,"markSelection",({message:n})=>{let a=parseInt(n.split(":")[0].split("line ")[1],10)-1,s=this.getContentAtLine(a);s==="{"&&(a+=1,s=this.getContentAtLine(a));const i=s.length,l=i-ym()(s," ").length,u=this.codeMirror.markText({line:a,ch:l},{line:a,ch:i},{className:"colored"});this.setState({markedText:u})}),Ze(this,"handleChange",(n,a)=>{if(a.origin==="setValue")return;const{name:s,onChange:i}=this.props;let l=n.getValue();l===""&&(l=null),i({target:{name:s,value:l,type:"json"}}),this.state.markedText&&(this.state.markedText.clear(),this.setState({markedText:null,error:null})),clearTimeout(this.timer),this.timer=setTimeout(()=>this.testJSON(n.getValue()),xm)}),Ze(this,"testJSON",n=>{try{hm.parse(n)}catch(a){this.markSelection(a)}}),this.editor=r.createRef(),this.state={error:!1,markedText:null}}componentDidMount(){this.codeMirror=Jt().fromTextArea(this.editor.current,{autoCloseBrackets:!0,lineNumbers:!0,matchBrackets:!0,mode:"application/json",readOnly:this.props.disabled,smartIndent:!0,styleSelectedText:!0,tabSize:2,theme:Sm,fontSize:"13px"}),this.codeMirror.on("change",this.handleChange),this.setSize(),this.setInitValue()}componentDidUpdate(t){t.value!==this.props.value&&!this.codeMirror.state.focused&&this.setInitValue()}render(){return this.state.error?r.createElement("div",null,"error json"):r.createElement(Tm,{name:this.props.name,hint:this.props.description,error:this.props.error},r.createElement(ae.Stack,{spacing:1},r.createElement(Mm,{intlLabel:this.props.intlLabel,labelAction:this.props.labelAction,name:this.props.name,required:this.props.required}),r.createElement(Em,{error:this.props.error},r.createElement(bm,{disabled:this.props.disabled},r.createElement("textarea",{ref:this.editor,autoComplete:"off",id:this.props.id||this.props.name,defaultValue:""}))),r.createElement(Dt.FieldHint,null),r.createElement(Dt.FieldError,null)))}}_n.defaultProps={description:null,disabled:!1,id:void 0,error:void 0,intlLabel:void 0,labelAction:void 0,onChange:()=>{},value:null,required:!1},_n.propTypes={description:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),disabled:o().bool,error:o().string,id:o().string,intlLabel:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),labelAction:o().element,name:o().string.isRequired,onChange:o().func,value:o().any,required:o().bool};const Lm=_n;var Zn=p(37178),Fm=p(23101),km=p.n(Fm),Am=p(14356),jm=p.n(Am),$m=p(50678),xt=p.n($m),Bm=p(103),Nm=p.n(Bm);const Sa=(e,t)=>{const[n,a]=(0,r.useState)(e);return(0,r.useEffect)(()=>{const s=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(s)}},[e,t]),n},Vm=new RegExp(/^[A-Za-z0-9-_.~]*$/),qm=(0,S.default)(w.Box)`
  position: relative;
`,Wm=(0,S.default)(Dt.FieldAction)`
  svg {
    height: 1rem;
    width: 1rem;
    path {
      fill: ${({theme:e})=>e.colors.neutral400};
    }
  }

  svg:hover {
    path {
      fill: ${({theme:e})=>e.colors.primary600};
    }
  }
`,Gn=(0,S.default)(j.Flex)`
  position: absolute;
  right: ${({theme:e})=>e.spaces[6]};
  width: 100px;
  pointer-events: none;

  svg {
    margin-right: ${({theme:e})=>e.spaces[1]};
    height: ${12/16}rem;
    width: ${12/16}rem;
    path {
      fill: ${({theme:e,notAvailable:t})=>t?e.colors.danger600:e.colors.success600};
    }
  }
`,zm=S.keyframes`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(359deg);
  }
`,Um=(0,S.default)(j.Flex)`
  animation: ${zm} 2s infinite linear;
`;var Hm=Object.defineProperty,La=Object.getOwnPropertySymbols,_m=Object.prototype.hasOwnProperty,Zm=Object.prototype.propertyIsEnumerable,Fa=(e,t,n)=>t in e?Hm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qn=(e,t)=>{for(var n in t||(t={}))_m.call(t,n)&&Fa(e,n,t[n]);if(La)for(var n of La(t))Zm.call(t,n)&&Fa(e,n,t[n]);return e},ka=(e,t,n)=>new Promise((a,s)=>{var i=c=>{try{u(n.next(c))}catch(d){s(d)}},l=c=>{try{u(n.throw(c))}catch(d){s(d)}},u=c=>c.done?a(c.value):Promise.resolve(c.value).then(i,l);u((n=n.apply(e,t)).next())});const Kn=({attribute:e,contentTypeUID:t,description:n,disabled:a,error:s,intlLabel:i,labelAction:l,name:u,onChange:c,value:d,placeholder:m,required:f})=>{const{modifiedData:y,initialData:h,layout:b}=(0,g.useCMEditViewDataManager)(),[E,O]=(0,r.useState)(!1),[I,C]=(0,r.useState)(null),x=Sa(d,300),D=(0,r.useRef)(),W=h[u],{formatMessage:F}=(0,A.useIntl)(),$=R()(b,["options","timestamps",0]),N=!h[$],G=Sa(y[e.targetField],300),[V,_]=(0,r.useState)(!1),[k,Z]=(0,r.useState)(null),B=i.id?F({id:i.id,defaultMessage:i.defaultMessage},Qn({},i.values)):u,Y=n?F({id:n.id,defaultMessage:n.defaultMessage},Qn({},n.values)):"",T=m?F({id:m.id,defaultMessage:m.defaultMessage},Qn({},m.values)):"";D.current=(M=!1)=>ka(void 0,null,function*(){O(!0);const H=ve("uid/generate");try{const{data:{data:re}}=yield ge.be.post(H,{contentTypeUID:t,field:u,data:y});c({target:{name:u,value:re,type:"text"}},M),O(!1)}catch(re){O(!1)}});const z=()=>ka(void 0,null,function*(){O(!0);const M=ve("uid/check-availability");if(!!d)try{const{data:H}=yield ge.be.post(M,{contentTypeUID:t,field:u,value:d?d.trim():""});C(H),O(!1)}catch(H){O(!1)}});(0,r.useEffect)(()=>{!d&&e.required&&D.current(!0)},[]),(0,r.useEffect)(()=>{x&&x.trim().match(Vm)&&x!==W&&z(),x||C(null)},[x,W]),(0,r.useEffect)(()=>{let M;return I&&I.isAvailable&&(M=setTimeout(()=>{C(null)},4e3)),()=>{M&&clearTimeout(M)}},[I]),(0,r.useEffect)(()=>{!V&&N&&G&&y[e.targetField]&&!d&&D.current(!0)},[G,V,N]);const Q=()=>{Z(F({id:"content-manager.components.uid.regenerate",defaultMessage:"Regenerate"}))},K=()=>{Z(null)},P=M=>{M.target.value&&N&&_(!0),c(M)};return r.createElement(Zn.TextInput,{disabled:a,error:s,endAction:r.createElement(qm,null,I&&I.isAvailable&&!k&&r.createElement(Gn,{alignItems:"center",justifyContent:"flex-end"},r.createElement(jm(),null),r.createElement(L.Typography,{textColor:"success600",variant:"pi"},F({id:"content-manager.components.uid.available",defaultMessage:"Available"}))),I&&!I.isAvailable&&!k&&r.createElement(Gn,{notAvailable:!0,alignItems:"center",justifyContent:"flex-end"},r.createElement(xt(),null),r.createElement(L.Typography,{textColor:"danger600",variant:"pi"},F({id:"content-manager.components.uid.unavailable",defaultMessage:"Unavailable"}))),k&&r.createElement(Gn,{alignItems:"center",justifyContent:"flex-end"},r.createElement(L.Typography,{textColor:"primary600",variant:"pi"},k)),r.createElement(Wm,{onClick:()=>D.current(),label:"regenerate",onMouseEnter:Q,onMouseLeave:K},E?r.createElement(Um,null,r.createElement(Nm(),null)):r.createElement(km(),null))),hint:Y,label:B,labelAction:l,name:u,onChange:P,placeholder:T,value:d||"",required:f})};Kn.propTypes={attribute:o().shape({targetField:o().string,required:o().bool}).isRequired,contentTypeUID:o().string.isRequired,description:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),disabled:o().bool,error:o().string,intlLabel:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}).isRequired,labelAction:o().element,name:o().string.isRequired,onChange:o().func.isRequired,value:o().string,placeholder:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),required:o().bool},Kn.defaultProps={description:void 0,disabled:!1,error:void 0,labelAction:void 0,placeholder:void 0,value:"",required:!1};const Gm=Kn;var Qm=p(28611),Km=p.n(Qm),Ym=p(77236),Aa=p.n(Ym),Jm=p(86834),Re=p.n(Jm),Xm=p(3040),ne=p.n(Xm);const ef=(0,S.default)(w.Box)`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,Yn=({intlLabel:e,id:t,labelAction:n,link:a,name:s,numberOfEntries:i,isSingle:l})=>{const{formatMessage:u}=(0,A.useIntl)(),c=e!=null&&e.id?u(e):s;return r.createElement(j.Flex,{justifyContent:"space-between"},r.createElement(j.Flex,null,r.createElement(L.Typography,{textColor:"neutral800",htmlFor:t||s,variant:"pi",fontWeight:"bold",as:"label"},c,!l&&r.createElement(r.Fragment,null,"\xA0(",i,")")),n&&r.createElement(ef,{paddingLeft:1},n)),a)};Yn.defaultProps={id:void 0,labelAction:void 0,link:null,numberOfEntries:0},Yn.propTypes={id:o().string,intlLabel:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}).isRequired,isSingle:o().bool.isRequired,labelAction:o().element,link:o().element,name:o().string.isRequired,numberOfEntries:o().number};const tf=Yn;var nf=p(7787),rf=p.n(nf),pt=p(65384),of=p(23973),ja=p.n(of),af=Object.defineProperty,$a=Object.getOwnPropertySymbols,sf=Object.prototype.hasOwnProperty,lf=Object.prototype.propertyIsEnumerable,Ba=(e,t,n)=>t in e?af(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Na=(e,t)=>{for(var n in t||(t={}))sf.call(t,n)&&Ba(e,n,t[n]);if($a)for(var n of $a(t))lf.call(t,n)&&Ba(e,n,t[n]);return e};const cf=S.default.div`
  width: ${(0,g.pxToRem)(6)};
  height: ${(0,g.pxToRem)(6)};
  margin-right: ${({theme:e})=>e.spaces[2]};
  background: ${({theme:e,isDraft:t})=>e.colors[t?"secondary700":"success200"]};
  border-radius: 50%;
  cursor: pointer;
`,Va=e=>{const{formatMessage:t}=(0,A.useIntl)(),n=pt.wx.SingleValue,a=ja()(R()(e,"data.value"),"publishedAt"),s=Re()(R()(e,"data.value.publishedAt"));if(a){const i={id:v("components.Select.draft-info-title"),defaultMessage:"State: Draft"},l={id:v("components.Select.publish-info-title"),defaultMessage:"State: Published"},u=t(s?i:l);return r.createElement(n,Na({},e),r.createElement(j.Flex,null,r.createElement(cf,{title:u,isDraft:s}),r.createElement(L.Typography,{ellipsis:!0},e.data.label||"-")))}return r.createElement(n,Na({},e),e.data.label||"-")};Va.propTypes={data:o().object.isRequired,selectProps:o().shape({mainField:o().shape({name:o().string.isRequired,schema:o().shape({type:o().string.isRequired}).isRequired}).isRequired}).isRequired};const uf=Va;var df=Object.defineProperty,pf=Object.defineProperties,mf=Object.getOwnPropertyDescriptors,qa=Object.getOwnPropertySymbols,ff=Object.prototype.hasOwnProperty,gf=Object.prototype.propertyIsEnumerable,Wa=(e,t,n)=>t in e?df(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yf=(e,t)=>{for(var n in t||(t={}))ff.call(t,n)&&Wa(e,n,t[n]);if(qa)for(var n of qa(t))gf.call(t,n)&&Wa(e,n,t[n]);return e},hf=(e,t)=>pf(e,mf(t));function Jn({components:e,mainField:t,name:n,isDisabled:a,isLoading:s,onChange:i,onInputChange:l,onMenuClose:u,onMenuOpen:c,onMenuScrollToBottom:d,options:m,placeholder:f,styles:y,value:h,description:b}){const{formatMessage:E}=(0,A.useIntl)();return r.createElement(ae.Stack,{spacing:1},r.createElement(pt.ZP,{components:hf(yf({},e),{SingleValue:uf}),id:n,isClearable:!0,isDisabled:a,isLoading:s,mainField:t,options:m,onChange:i,onInputChange:l,onMenuClose:u,onMenuOpen:c,onMenuScrollToBottom:d,placeholder:E(f||{id:"global.select",defaultMessage:"Select..."}),styles:y,value:rf()(h)?null:{label:R()(h,[t.name],""),value:h}}),b&&r.createElement(L.Typography,{variant:"pi",textColor:"neutral600"},b))}Jn.defaultProps={description:"",components:{},placeholder:null,value:null},Jn.propTypes={components:o().object,isDisabled:o().bool.isRequired,isLoading:o().bool.isRequired,mainField:o().shape({name:o().string.isRequired,schema:o().shape({type:o().string.isRequired}).isRequired}).isRequired,name:o().string.isRequired,onChange:o().func.isRequired,onInputChange:o().func.isRequired,onMenuClose:o().func.isRequired,onMenuOpen:o().func.isRequired,onMenuScrollToBottom:o().func.isRequired,options:o().array.isRequired,placeholder:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired}),styles:o().object.isRequired,value:o().object,description:o().string};const bf=(0,r.memo)(Jn),Ef=S.default.div`
  width: ${(0,g.pxToRem)(6)};
  height: ${(0,g.pxToRem)(6)};
  background: ${({theme:e,isDraft:t})=>e.colors[t?"secondary600":"success600"]};
  border-radius: 50%;
  cursor: pointer;
`;function Xn({data:e,displayNavigationLink:t,isDisabled:n,mainField:a,onRemove:s,searchToPersist:i,targetModel:l}){const{formatMessage:u}=(0,A.useIntl)(),c=`/content-manager/collectionType/${l}/${e.id}`;let d="pointer";n&&(d="not-allowed"),t||(d="default");const m=ja()(e,"publishedAt"),f=Re()(e.publishedAt),y=e[a.name],h={id:v("components.Select.draft-info-title"),defaultMessage:"State: Draft"},b={id:v("components.Select.publish-info-title"),defaultMessage:"State: Published"},E=u(f?h:b),{pathname:O}=(0,te.useLocation)();return r.createElement(j.Flex,{as:"li",alignItems:"center"},r.createElement(j.Flex,{style:{flex:1},alignItems:"center"},m&&r.createElement(w.Box,{paddingRight:2},r.createElement(Ef,{isDraft:f,title:E})),t?r.createElement(g.Link,{to:{pathname:c,state:{from:O},search:i},style:{textTransform:"none"}},y||e.id):r.createElement(L.Typography,{variant:"pi"},y||e.id)),r.createElement(g.RemoveRoundedButton,{onClick:s,label:"Remove",style:{cursor:d}}))}Xn.defaultProps={onRemove:()=>{},searchToPersist:null,targetModel:""},Xn.propTypes={data:o().object.isRequired,displayNavigationLink:o().bool.isRequired,isDisabled:o().bool.isRequired,mainField:o().shape({name:o().string.isRequired,schema:o().shape({type:o().string.isRequired}).isRequired}).isRequired,onRemove:o().func,searchToPersist:o().string,targetModel:o().string};const vf=(0,r.memo)(Xn);function er({addRelation:e,components:t,displayNavigationLink:n,mainField:a,name:s,isDisabled:i,isLoading:l,onInputChange:u,onMenuClose:c,onMenuOpen:d,onMenuScrollToBottom:m,onRemove:f,options:y,placeholder:h,searchToPersist:b,styles:E,targetModel:O,value:I,description:C}){const{formatMessage:x}=(0,A.useIntl)(),D={ignoreCase:!0,ignoreAccents:!0,trim:!1,matchFrom:"any"};return r.createElement(ae.Stack,{spacing:1},r.createElement(pt.ZP,{components:t,isDisabled:i,id:s,filterOption:(W,F)=>!Re()(I)&&I.findIndex(N=>N.id===W.value.id)!==-1?!1:F?(0,pt.cj)(D)(W,F):!0,mainField:a,isLoading:l,isMulti:!0,isSearchable:!0,options:y,onChange:e,onInputChange:u,onMenuClose:c,onMenuOpen:d,onMenuScrollToBottom:m,placeholder:x(h||{id:"global.select",defaultMessage:"Select..."}),styles:E,value:[]}),r.createElement(w.Box,{paddingTop:3,style:{overflow:"auto"}},r.createElement(ae.Stack,{as:"ul",spacing:4,style:{maxHeight:"128px",overflowX:"hidden"}},I==null?void 0:I.map((W,F)=>r.createElement(vf,{key:W.id,data:W,displayNavigationLink:n,isDisabled:i,mainField:a,onRemove:()=>{i||f(`${s}.${F}`)},searchToPersist:b,targetModel:O})))),C&&r.createElement(L.Typography,{variant:"pi",textColor:"neutral600"},C))}er.defaultProps={description:"",components:{},placeholder:null,searchToPersist:null,value:null},er.propTypes={addRelation:o().func.isRequired,components:o().object,displayNavigationLink:o().bool.isRequired,isDisabled:o().bool.isRequired,isLoading:o().bool.isRequired,mainField:o().shape({name:o().string.isRequired,schema:o().shape({type:o().string.isRequired}).isRequired}).isRequired,name:o().string.isRequired,onInputChange:o().func.isRequired,onMenuClose:o().func.isRequired,onMenuOpen:o().func.isRequired,onMenuScrollToBottom:o().func.isRequired,onRemove:o().func.isRequired,options:o().array.isRequired,placeholder:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired}),searchToPersist:o().string,styles:o().object.isRequired,targetModel:o().string.isRequired,value:o().array,description:o().string};const Cf=(0,r.memo)(er),za=(0,S.default)(w.Box)`
  background: transparent;
  border: none;
  position: relative;
  z-index: 1;

  svg {
    height: ${11/16}rem;
    width: ${11/16}rem;
  }

  svg path {
    fill: ${({theme:e})=>e.colors.neutral600};
  }
`;var Of=Object.defineProperty,Ua=Object.getOwnPropertySymbols,Pf=Object.prototype.hasOwnProperty,Rf=Object.prototype.propertyIsEnumerable,Ha=(e,t,n)=>t in e?Of(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mf=(e,t)=>{for(var n in t||(t={}))Pf.call(t,n)&&Ha(e,n,t[n]);if(Ua)for(var n of Ua(t))Rf.call(t,n)&&Ha(e,n,t[n]);return e};const Tf=e=>{const t=pt.wx.ClearIndicator;return r.createElement(t,Mf({},e),r.createElement(za,{as:"button",type:"button"},r.createElement(bn(),null)))},wf=(0,S.default)(za)`
  display: flex;
  background: none;
  border: none;

  svg {
    width: ${6/16}rem;
  }
`,If=()=>r.createElement(wf,{as:"button",type:"button",paddingRight:3},r.createElement(hn(),null)),Df=()=>null;var xf=Object.defineProperty,_a=Object.getOwnPropertySymbols,Sf=Object.prototype.hasOwnProperty,Lf=Object.prototype.propertyIsEnumerable,Za=(e,t,n)=>t in e?xf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ga=(e,t)=>{for(var n in t||(t={}))Sf.call(t,n)&&Za(e,n,t[n]);if(_a)for(var n of _a(t))Lf.call(t,n)&&Za(e,n,t[n]);return e};const Ff=S.default.div`
  width: ${(0,g.pxToRem)(6)};
  height: ${(0,g.pxToRem)(6)};
  margin-right: ${({theme:e})=>e.spaces[2]};
  background: ${({theme:e,isDraft:t})=>e.colors[t?"secondary600":"success600"]};
  border-radius: 50%;
  cursor: pointer;
`,tr=e=>{const{formatMessage:t}=(0,A.useIntl)(),n=pt.wx.Option,a=(0,q.has)((0,q.get)(e,"data.value"),"publishedAt"),s=(0,q.isEmpty)((0,q.get)(e,"data.value.publishedAt"));if(a&&a){const i={id:v("components.Select.draft-info-title"),defaultMessage:"State: Draft"},l={id:v("components.Select.publish-info-title"),defaultMessage:"State: Published"},u=t(s?i:l);return r.createElement(n,Ga({},e),r.createElement(j.Flex,null,r.createElement(Ff,{title:u,isDraft:s}),r.createElement(L.Typography,{ellipsis:!0},e.label||"-")))}return r.createElement(n,Ga({},e),e.label||"-")};tr.defaultProps={label:""},tr.propTypes={label:o().oneOfType([o().string,o().number]),isFocused:o().bool.isRequired,selectProps:o().shape({hasDraftAndPublish:o().bool,mainField:o().shape({name:o().string.isRequired,schema:o().shape({type:o().string.isRequired}).isRequired}).isRequired}).isRequired};const kf=tr;var Af=Object.defineProperty,Qa=Object.getOwnPropertySymbols,jf=Object.prototype.hasOwnProperty,$f=Object.prototype.propertyIsEnumerable,Ka=(e,t,n)=>t in e?Af(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ya=(e,t)=>{for(var n in t||(t={}))jf.call(t,n)&&Ka(e,n,t[n]);if(Qa)for(var n of Qa(t))$f.call(t,n)&&Ka(e,n,t[n]);return e};function Bf(e,t){return function(n){const a=t(n);return r.createElement(e,Ya(Ya({},n),a))}}const Nf=Bf;function Vf({isUserAllowedToEditField:e,isUserAllowedToReadField:t,name:n}){const{isCreatingEntry:a,createActionAllowedFields:s,readActionAllowedFields:i,updateActionAllowedFields:l}=(0,g.useCMEditViewDataManager)(),u=(0,r.useMemo)(()=>e===!0?!0:(a?s:l).includes(n),[a,s,n,e,l]),c=(0,r.useMemo)(()=>t?!0:(a?[]:i).includes(n),[a,t,n,i]);return{isCreatingEntry:a,isFieldAllowed:u,isFieldReadable:c}}const qf=Vf;var Wf=Object.defineProperty,zf=Object.defineProperties,Uf=Object.getOwnPropertyDescriptors,Ja=Object.getOwnPropertySymbols,Hf=Object.prototype.hasOwnProperty,_f=Object.prototype.propertyIsEnumerable,Xa=(e,t,n)=>t in e?Wf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,je=(e,t)=>{for(var n in t||(t={}))Hf.call(t,n)&&Xa(e,n,t[n]);if(Ja)for(var n of Ja(t))_f.call(t,n)&&Xa(e,n,t[n]);return e},$e=(e,t)=>zf(e,Uf(t));const Zf=e=>({clearIndicator:t=>$e(je({},t),{padding:0,paddingRight:e.spaces[3]}),container:t=>$e(je({},t),{background:e.colors.neutral0,fontFamily:"Arial",lineHeight:"normal"}),control:(t,n)=>{let a,s,i;return n.isFocused?a=`1px solid ${e.colors.primary600} !important`:a=`1px solid ${e.colors.neutral200} !important`,n.menuIsOpen===!0&&(s=`1px solid ${e.colors.primary600} !important`),n.isDisabled&&(i="#fafafb !important"),$e(je({},t),{fontSize:14,height:40,border:a,outline:0,boxShadow:0,borderRadius:"2px !important",borderBottom:s,backgroundColor:i,borderTopLeftRadius:"4px !important",borderTopRightRadius:"4px !important",borderBottomLeftRadius:"4px !important",borderBottomRightRadius:"4px !important"})},indicatorContainer:t=>$e(je({},t),{padding:0,paddingRight:e.spaces[3]}),input:t=>$e(je({},t),{margin:0,padding:0,color:e.colors.neutral800}),menu:t=>$e(je({},t),{width:"100%",marginTop:e.spaces[1],backgroundColor:e.colors.neutral0,color:e.colors.neutral800,borderRadius:"4px !important",borderTopLeftRadius:"4px !important",borderTopRightRadius:"4px !important",border:`1px solid ${e.colors.neutral200} !important`,boxShadow:0,fontSize:"14px",fontFamily:"Arial",zIndex:2}),menuList:t=>$e(je({},t),{paddingLeft:e.spaces[1],paddingTop:e.spaces[1],paddingRight:e.spaces[1],paddingBottom:e.spaces[1]}),option:(t,n)=>{let a=t.backgroundColor;return n.isFocused&&(a=e.colors.primary100),$e(je({},t),{lineHeight:e.spaces[5],backgroundColor:a,borderRadius:4})},placeholder:t=>$e(je({},t),{marginLeft:0}),singleValue:t=>$e(je({},t),{marginLeft:0,color:e.colors.neutral800}),valueContainer:t=>$e(je({},t),{padding:0,paddingLeft:e.spaces[4],marginLeft:0,marginRight:0})});var Gf=Object.defineProperty,Qf=Object.defineProperties,Kf=Object.getOwnPropertyDescriptors,es=Object.getOwnPropertySymbols,Yf=Object.prototype.hasOwnProperty,Jf=Object.prototype.propertyIsEnumerable,ts=(e,t,n)=>t in e?Gf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nr=(e,t)=>{for(var n in t||(t={}))Yf.call(t,n)&&ts(e,n,t[n]);if(es)for(var n of es(t))Jf.call(t,n)&&ts(e,n,t[n]);return e},rr=(e,t)=>Qf(e,Kf(t)),Xf=(e,t,n)=>new Promise((a,s)=>{var i=c=>{try{u(n.next(c))}catch(d){s(d)}},l=c=>{try{u(n.throw(c))}catch(d){s(d)}},u=c=>c.done?a(c.value):Promise.resolve(c.value).then(i,l);u((n=n.apply(e,t)).next())});const ns={contains:"",limit:20,start:0},eg=(e,t)=>t?t.reduce((n,a)=>{const s=R()(e,a,null);return s&&ne()(n,a,s),n},{}):{};function or({description:e,editable:t,labelAction:n,intlLabel:a,isCreatingEntry:s,isFieldAllowed:i,isFieldReadable:l,mainField:u,name:c,relationType:d,targetModel:m,placeholder:f,queryInfos:y}){const{formatMessage:h}=(0,A.useIntl)(),[{query:b}]=(0,g.useQueryParams)(),E=(0,r.useMemo)(()=>d.toLowerCase().includes("morph"),[d]),{addRelation:O,modifiedData:I,moveRelation:C,onChange:x,onRemoveRelation:D}=(0,g.useCMEditViewDataManager)(),{pathname:W}=(0,te.useLocation)(),F=(0,S.useTheme)(),$=R()(I,c,null),[N,G]=(0,r.useState)(ns),[V,_]=(0,r.useState)([]),[k,Z]=(0,r.useState)(!1),[B,Y]=(0,r.useState)(!1),T=(0,r.useMemo)(()=>V.filter(Ce=>Re()($)?!0:Array.isArray($)?Km()($,Ne=>Ne.id===Ce.value.id)===-1:R()($,"id","")!==Ce.value.id),[V,$]),{endPoint:z,containsKey:Q,defaultParams:K,shouldDisplayRelationLink:P,paramsToKeep:M}=y,H=["oneWay","oneToOne","manyToOne","oneToManyMorph","oneToOneMorph"].includes(d),re=(0,r.useMemo)(()=>$?H?[$.id]:$.map(Ce=>Ce.id):[],[H,$]),ce=(0,r.useCallback)(Ce=>Xf(this,null,function*(){if(E){Z(!1);return}if(!i){Z(!1);return}Z(!0);const Ne=rr(nr({limit:N.limit},K),{start:N.start});N.contains&&(Ne[`filters[${Q}][$contains]`]=N.contains);try{const{data:Xe}=yield ge.be.post(z,{idsToOmit:re},{params:Ne,cancelToken:Ce.token}),oo=Xe.map(et=>({value:et,label:et[u.name]}));_(et=>et.concat(oo).filter((ee,J)=>et.findIndex(Ve=>Ve.value.id===ee.value.id)===-1?!0:et.findIndex(Ve=>Ve.value.id===ee.value.id)===J)),Z(!1)}catch(Xe){Z(!1)}}),[Q,K,z,re,i,E,u.name,N.contains,N.limit,N.start]);(0,r.useEffect)(()=>{const Ne=Se().CancelToken.source();return B&&ce(Ne),()=>Ne.cancel("Operation canceled by the user.")},[ce,B]);const me=(Ce,{action:Ne})=>(Ne==="input-change"&&G(Xe=>Xe.contains===Ce?Xe:rr(nr({},Xe),{contains:Ce,start:0})),Ce),Fe=()=>{G(Ce=>rr(nr({},Ce),{start:Ce.start+20}))},st=()=>{G(ns),Y(!1)},U=Ce=>{x({target:{name:c,value:Ce&&Ce.value}})},de=Ce=>{Re()(Ce)||O({target:{name:c,value:Ce}})},Be=()=>{Y(!0)},Je=`/content-manager/collectionType/${m}/${$?$.id:null}`,vt=(0,We.stringify)(eg(b,M),{encode:!1});let Ge=null;H&&$&&P&&(Ge=r.createElement(g.Link,{to:{pathname:Je,state:{from:W},search:vt}},h({id:v("containers.Edit.seeDetails"),defaultMessage:"Details"})));const eo=H?bf:Cf,to=Aa()($)?$.length:0,no=(0,r.useMemo)(()=>E?!0:s?!t:!i&&l||!t,[E,s,t,i,l]);if(!i&&s)return r.createElement(g.NotAllowedInput,{intlLabel:a,labelAction:n});if(!s&&!i&&!l)return r.createElement(g.NotAllowedInput,{intlLabel:a,labelAction:n});const ro=Zf(F);return r.createElement(ae.Stack,{spacing:1},r.createElement(tf,{intlLabel:a,isSingle:H,labelAction:n,link:Ge,name:c,numberOfEntries:to}),r.createElement(eo,{addRelation:de,components:{ClearIndicator:Tf,DropdownIndicator:If,IndicatorSeparator:Df,Option:kf},displayNavigationLink:P,id:c,isDisabled:no,isLoading:k,isClearable:!0,mainField:u,move:C,name:c,options:T,onChange:U,onInputChange:me,onMenuClose:st,onMenuOpen:Be,onMenuScrollToBottom:Fe,onRemove:D,placeholder:f,searchToPersist:vt,styles:ro,targetModel:m,value:$,description:e}))}or.defaultProps={editable:!0,description:"",labelAction:null,isFieldAllowed:!0,placeholder:null},or.propTypes={editable:o().bool,description:o().string,intlLabel:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}).isRequired,labelAction:o().element,isCreatingEntry:o().bool.isRequired,isFieldAllowed:o().bool,isFieldReadable:o().bool.isRequired,mainField:o().shape({name:o().string.isRequired,schema:o().shape({type:o().string.isRequired}).isRequired}).isRequired,name:o().string.isRequired,placeholder:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),relationType:o().string.isRequired,targetModel:o().string.isRequired,queryInfos:o().shape({containsKey:o().string.isRequired,defaultParams:o().object,endPoint:o().string.isRequired,shouldDisplayRelationLink:o().bool.isRequired,paramsToKeep:o().array}).isRequired};const tg=(0,r.memo)(or),rs=Nf(tg,qf);var ng=Object.defineProperty,os=Object.getOwnPropertySymbols,rg=Object.prototype.hasOwnProperty,og=Object.prototype.propertyIsEnumerable,as=(e,t,n)=>t in e?ng(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ss=(e,t)=>{for(var n in t||(t={}))rg.call(t,n)&&as(e,n,t[n]);if(os)for(var n of os(t))og.call(t,n)&&as(e,n,t[n]);return e};function ag(e,t){return function(n){const a=t(n.keys);return r.createElement(e,ss(ss({},n),a))}}const sg=ag,ig=(e,t=!1)=>[{metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"},disabled:t,hidden:t},key:"__enum_option_null",value:""},...e.map(n=>({metadatas:{intlLabel:{id:n,defaultMessage:n},hidden:!1,disabled:!1},key:n,value:n}))],lg=(e="")=>{switch((0,q.toLower)(e)){case"boolean":return"bool";case"biginteger":return"text";case"decimal":case"float":case"integer":return"number";case"date":case"datetime":case"time":return e;case"email":return"email";case"enumeration":return"select";case"password":return"password";case"string":return"text";case"text":return"textarea";case"media":case"file":case"files":return"media";case"json":return"json";case"wysiwyg":case"WYSIWYG":case"richtext":return"wysiwyg";case"uid":return"uid";default:return e||"text"}},cg=e=>{let t;return e==="float"||e==="decimal"?t=.01:t=1,t};function ug(e){const{createActionAllowedFields:t,formErrors:n,isCreatingEntry:a,modifiedData:s,onChange:i,readActionAllowedFields:l,shouldNotRunValidations:u,updateActionAllowedFields:c}=(0,g.useCMEditViewDataManager)(),d=(0,r.useMemo)(()=>a?t:c,[a,t,c]),m=(0,r.useMemo)(()=>a?[]:l,[a,l]),f=(0,q.get)(s,e,null);return{allowedFields:d,formErrors:n,isCreatingEntry:a,onChange:i,readableFields:m,shouldNotRunValidations:u,value:f}}const dg=ug,is=["type","model","via","collection","default","plugin","enum","regex","pluginOptions"];var pg=Object.defineProperty,mg=Object.defineProperties,fg=Object.getOwnPropertyDescriptors,ls=Object.getOwnPropertySymbols,gg=Object.prototype.hasOwnProperty,yg=Object.prototype.propertyIsEnumerable,cs=(e,t,n)=>t in e?pg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ar=(e,t)=>{for(var n in t||(t={}))gg.call(t,n)&&cs(e,n,t[n]);if(ls)for(var n of ls(t))yg.call(t,n)&&cs(e,n,t[n]);return e},hg=(e,t)=>mg(e,fg(t));function sr({allowedFields:e,fieldSchema:t,formErrors:n,isCreatingEntry:a,keys:s,labelAction:i,metadatas:l,onChange:u,readableFields:c,shouldNotRunValidations:d,queryInfos:m,value:f}){const{fields:y}=(0,g.useLibrary)(),{formatMessage:h}=(0,A.useIntl)(),{contentType:b}=ut(),E=(0,r.useMemo)(()=>!R()(l,"editable",!0),[l]),O=t.type,I=R()(n,[s],null),C=(0,r.useMemo)(()=>Ro(s),[s]),x=(0,r.useMemo)(()=>{const Q=xd()(t,d?[...is,"required","minLength"]:is),K=t.regex||null;if(K){const P=new RegExp(K);P&&(Q.regex=P)}return Q},[t,d]),D=(0,r.useMemo)(()=>R()(x,["required"],!1),[x]),W=(0,r.useMemo)(()=>{const Q=R()(b,["attributes"],{});return R()(Q,[C[0],"type"],null)==="dynamiczone"},[b,C]),F=(0,r.useMemo)(()=>lg(O),[O]),$=(0,r.useMemo)(()=>O==="media"&&!f?[]:f,[O,f]),N=(0,r.useMemo)(()=>cg(O),[O]),G=(0,r.useMemo)(()=>{const Q=C.join(".");if(e.includes(Q))return!0;if(W)return e.includes(C[0]);if(C.length>1){const P=Yt()(C,C.length-1).join(".");return e.includes(P)}return!1},[e,C,W]),V=(0,r.useMemo)(()=>{const Q=C.join(".");if(c.includes(Q))return!0;if(W)return c.includes(C[0]);if(C.length>1){const P=Yt()(C,C.length-1).join(".");return c.includes(P)}return!1},[c,C,W]),_=(0,r.useMemo)(()=>V||G,[G,V]),k=(0,r.useMemo)(()=>a?E:V&&!G?!0:E,[E,a,G,V]),Z=(0,r.useMemo)(()=>ig(t.enum||[],D),[t,D]),{label:B,description:Y,placeholder:T,visible:z}=l;return z===!1?null:_?O==="relation"?r.createElement(rs,hg(ar(ar({},l),t),{description:l.description?h({id:l.description,defaultMessage:l.description}):void 0,intlLabel:{id:l.label,defaultMessage:l.label},labelAction:i,isUserAllowedToEditField:G,isUserAllowedToReadField:V,name:s,placeholder:l.placeholder?{id:l.placeholder,defaultMessage:l.placeholder}:null,queryInfos:m,value:f,error:I&&h(I)})):r.createElement(g.GenericInput,{attribute:t,autoComplete:"new-password",intlLabel:{id:B,defaultMessage:B},isNullable:F==="bool"&&[null,void 0].includes(t.default),description:Y?{id:Y,defaultMessage:Y}:null,disabled:k,error:I,labelAction:i,contentTypeUID:b.uid,customInputs:ar({json:Lm,uid:Gm,media:y.media,wysiwyg:fm},y),multiple:t.multiple||!1,name:s,onChange:u,options:Z,placeholder:T?{id:T,defaultMessage:T}:null,required:t.required||!1,step:N,type:F,value:$,withDefaultValue:!1}):r.createElement(g.NotAllowedInput,{description:Y?{id:Y,defaultMessage:Y}:null,intlLabel:{id:B,defaultMessage:B},labelAction:i,error:I&&h(I),name:s,required:D})}sr.defaultProps={formErrors:{},labelAction:void 0,queryInfos:{},value:null},sr.propTypes={allowedFields:o().array.isRequired,fieldSchema:o().object.isRequired,formErrors:o().object,keys:o().string.isRequired,isCreatingEntry:o().bool.isRequired,labelAction:o().element,metadatas:o().object.isRequired,onChange:o().func.isRequired,readableFields:o().array.isRequired,shouldNotRunValidations:o().bool.isRequired,queryInfos:o().shape({containsKey:o().string,defaultParams:o().object,endPoint:o().string}),value:o().any};const bg=(0,r.memo)(sr,He()),ir=sg(bg,dg),lr=({componentUid:e,isFromDynamicZone:t,isNested:n,name:a})=>{const{getComponentLayout:s}=ut(),l=(0,r.useMemo)(()=>s(e),[e,s]).layouts.edit;return r.createElement(w.Box,{background:t?"":"neutral100",paddingLeft:6,paddingRight:6,paddingTop:6,paddingBottom:6,hasRadius:n,borderColor:n?"neutral200":""},r.createElement(ae.Stack,{spacing:6},l.map((u,c)=>r.createElement(le.Grid,{gap:4,key:c},u.map(({name:d,size:m,metadatas:f,fieldSchema:y,queryInfos:h})=>{const b=y.type==="component",E=`${a}.${d}`;if(b){const O=y.component;return r.createElement(le.GridItem,{col:m,s:12,xs:12,key:d},r.createElement(tn,{componentUid:O,intlLabel:{id:f.label,defaultMessage:f.label},isNested:!0,isRepeatable:y.repeatable,max:y.max,min:y.min,name:E,required:y.required||!1}))}return r.createElement(le.GridItem,{col:m,key:d,s:12,xs:12},r.createElement(ir,{keys:E,fieldSchema:y,metadatas:f,queryInfos:h}))})))))};lr.defaultProps={isFromDynamicZone:!1,isNested:!1},lr.propTypes={componentUid:o().string.isRequired,isFromDynamicZone:o().bool,isNested:o().bool,name:o().string.isRequired};const Eg=lr;var us=p(74201),vg=p(59290),mt=p.n(vg),Cg=Object.defineProperty,ds=Object.getOwnPropertySymbols,Og=Object.prototype.hasOwnProperty,Pg=Object.prototype.propertyIsEnumerable,ps=(e,t,n)=>t in e?Cg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ms=(e,t)=>{for(var n in t||(t={}))Og.call(t,n)&&ps(e,n,t[n]);if(ds)for(var n of ds(t))Pg.call(t,n)&&ps(e,n,t[n]);return e};function Rg(e,t){return function(n){const a=t(n);return r.createElement(e,ms(ms({},n),a))}}const Mg=Rg;function Tg(){const{addRepeatableComponentToField:e,formErrors:t}=(0,g.useCMEditViewDataManager)();return{addRepeatableComponentToField:e,formErrors:t}}const wg=Tg;function Ig(e,t){return Object.keys(t).filter(n=>n.startsWith(e)).map(n=>n.split(".").slice(0,e.split(".").length+1).join("."))}var en=p(51968),Dg=p(41119),fs=p.n(Dg),cr=p(44826);const xg=S.default.span`
  display: block;
  background-color: ${({theme:e})=>e.colors.primary100};
  outline: 1px dashed ${({theme:e})=>e.colors.primary500};
  outline-offset: -1px;
  padding: ${({theme:e})=>e.spaces[6]};
`,Sg=()=>r.createElement(xg,{padding:6,background:"primary100"});var Lg=p(78752);const Fg=(0,S.default)(Me.IconButton)`
  background-color: transparent;

  svg {
    path {
      fill: ${({theme:e,expanded:t})=>t?e.colors.primary600:e.colors.neutral600};
    }
  }

  &:hover {
    svg {
      path {
        fill: ${({theme:e})=>e.colors.primary600};
      }
    }
  }
`,gs=(0,S.default)(Me.IconButton)`
  background-color: transparent;

  svg {
    path {
      fill: ${({theme:e,expanded:t})=>t?e.colors.primary600:e.colors.neutral600};
    }
  }
`,kg=S.default.span`
  display: flex;
  justify-content: space-between;
  padding-left: ${({theme:e})=>e.spaces[4]};
  padding-right: ${({theme:e})=>e.spaces[4]};
  background-color: ${({theme:e})=>e.colors.neutral0};
  height: ${50/16}rem;
`,Ag=(0,S.default)(us.TextButton)`
  text-align: left;

  svg {
    width: ${14/16}rem;
    height: ${14/16}rem;

    path {
      fill: ${({theme:e,expanded:t})=>t?e.colors.primary600:e.colors.neutral500};
    }
  }
`,ys=({displayedValue:e})=>r.createElement(kg,null,r.createElement(ae.Stack,{horizontal:!0,spacing:3,flex:1},r.createElement(j.Flex,{justifyContent:"center",borderRadius:"50%",height:`${24/16}rem}`,width:`${24/16}rem}`,"aria-hidden":!0,as:"span",background:"neutral200"},r.createElement(Lg.Icon,{as:hn(),width:`${8/16}rem}`,color:"neutral600"})),r.createElement(Ag,{onClick:()=>{},flex:1},r.createElement(L.Typography,{fontWeight:"bold",textColor:"neutral700"},e))),r.createElement(ae.Stack,{horizontal:!0,spacing:0},r.createElement(gs,{noBorder:!0,onClick:()=>{},icon:r.createElement(qe(),null)}),r.createElement(gs,{icon:r.createElement(rt(),null),noBorder:!0})));ys.propTypes={displayedValue:o().string.isRequired};const jg=ys;var $g=Object.defineProperty,hs=Object.getOwnPropertySymbols,Bg=Object.prototype.hasOwnProperty,Ng=Object.prototype.propertyIsEnumerable,bs=(e,t,n)=>t in e?$g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Es=(e,t)=>{for(var n in t||(t={}))Bg.call(t,n)&&bs(e,n,t[n]);if(hs)for(var n of hs(t))Ng.call(t,n)&&bs(e,n,t[n]);return e};function Vg(e,t){return function(n){const a=t(n);return r.createElement(e,Es(Es({},n),a))}}const qg=Vg;function Wg({schema:e,componentFieldName:t}){const{checkFormErrors:n,modifiedData:a,moveComponentField:s,removeRepeatableField:i,triggerFormValidation:l}=(0,g.useCMEditViewDataManager)(),u=(0,r.useMemo)(()=>(0,q.get)(e,["settings","mainField"],"id"),[e]);return{displayedValue:(0,q.toString)((0,q.get)(a,[...t.split("."),u],"")),mainField:u,checkFormErrors:n,moveComponentField:s,removeRepeatableField:i,schema:e,triggerFormValidation:l}}const zg=Wg,Ug=S.default.span`
  display: flex;
  align-items: center;
  height: ${({theme:e})=>e.spaces[7]};

  padding: 0 ${({theme:e})=>e.spaces[3]};
  cursor: all-scroll;

  svg {
    width: ${12/16}rem;
    height: ${12/16}rem;
  }
`,ur=({componentFieldName:e,hasErrorMessage:t,hasErrors:n,isDraggingSibling:a,isOpen:s,isReadOnly:i,onClickToggle:l,schema:u,toggleCollapses:c,moveComponentField:d,removeRepeatableField:m,setIsDraggingSibling:f,triggerFormValidation:y,displayedValue:h})=>{const b=(0,r.useRef)(null),E=(0,r.useRef)(null),[,O]=(0,r.useState)(!1),{formatMessage:I}=(0,A.useIntl)(),C=u.layouts.edit,[,x]=(0,Te.useDrop)({accept:Pe.COMPONENT,canDrop(){return!1},hover(V,_){if(!E.current)return;const k=V.originalPath,Z=e,B=k.split("."),Y=B.slice().splice(-1).join(""),T=Z.split(".").splice(-1).join(""),z=B.slice(0,B.length-1),Q=parseInt(Y,10),K=parseInt(T,10);if(Q===K)return;const P=E.current.getBoundingClientRect(),M=(P.bottom-P.top)/2,re=_.getClientOffset().y-P.top;Q<K&&re<M||Q>K&&re>M||k.split(".").length===Z.split(".").length&&(d(z,Q,K),V.originalPath=Z)}}),[{isDragging:D},W,F]=(0,Te.useDrag)({type:Pe.COMPONENT,item:()=>(c(-1),{displayedValue:h,originalPath:e}),end:()=>{y(),f(!1)},collect:V=>({isDragging:V.isDragging()})});(0,r.useEffect)(()=>{F((0,en.rX)(),{captureDraggingState:!1})},[F]),(0,r.useEffect)(()=>{D&&f(!0)},[D,f]),(0,r.useEffect)(()=>{a||O(V=>!V)},[a]);const $={dragRef:W(b),dropRef:x(E)},N=fs()(h),G=n?"error":void 0;return r.createElement(w.Box,{ref:$?$.dropRef:null},D&&r.createElement(Sg,null),!D&&a&&r.createElement(jg,{displayedValue:N,componentFieldName:e}),!D&&!a&&r.createElement(_e.Accordion,{error:G,hasErrorMessage:t,expanded:s,onToggle:l,id:e,size:"S"},r.createElement(_e.AccordionToggle,{action:i?null:r.createElement(ae.Stack,{horizontal:!0,spacing:0},r.createElement(Fg,{expanded:s,noBorder:!0,onClick:()=>{m(e),c()},label:I({id:v("containers.Edit.delete"),defaultMessage:"Delete"}),icon:r.createElement(qe(),null)}),r.createElement(cr.Tooltip,{description:I({id:v("components.DragHandle-label"),defaultMessage:"Drag"})},r.createElement(Ug,{role:"button",tabIndex:-1,ref:$.dragRef,onClick:V=>V.stopPropagation()},r.createElement(rt(),null)))),title:N,togglePosition:"left"}),r.createElement(_e.AccordionContent,null,r.createElement(ae.Stack,{background:"neutral100",padding:6,spacing:6},C.map((V,_)=>r.createElement(le.Grid,{gap:4,key:_},V.map(({name:k,fieldSchema:Z,metadatas:B,queryInfos:Y,size:T})=>{const z=Z.type==="component",Q=`${e}.${k}`;if(z){const K=Z.component;return r.createElement(le.GridItem,{col:T,s:12,xs:12,key:k},r.createElement(tn,{componentUid:K,intlLabel:{id:B.label,defaultMessage:B.label},isRepeatable:Z.repeatable,isNested:!0,name:Q,max:Z.max,min:Z.min,required:Z.required}))}return r.createElement(le.GridItem,{key:Q,col:T,s:12,xs:12},r.createElement(ir,{fieldSchema:Z,keys:Q,metadatas:B,queryInfos:Y}))})))))))};ur.defaultProps={isDraggingSibling:!1,isOpen:!1,setIsDraggingSibling:()=>{},toggleCollapses:()=>{}},ur.propTypes={componentFieldName:o().string.isRequired,hasErrorMessage:o().bool.isRequired,hasErrors:o().bool.isRequired,isDraggingSibling:o().bool,isOpen:o().bool,isReadOnly:o().bool.isRequired,onClickToggle:o().func.isRequired,schema:o().object.isRequired,toggleCollapses:o().func,moveComponentField:o().func.isRequired,removeRepeatableField:o().func.isRequired,setIsDraggingSibling:o().func,triggerFormValidation:o().func.isRequired,displayedValue:o().string.isRequired};const Hg=(0,r.memo)(ur),_g=qg(Hg,zg);var vs=p(87910),Zg=Object.defineProperty,Cs=Object.getOwnPropertySymbols,Gg=Object.prototype.hasOwnProperty,Qg=Object.prototype.propertyIsEnumerable,Os=(e,t,n)=>t in e?Zg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Kg=(e,t)=>{for(var n in t||(t={}))Gg.call(t,n)&&Os(e,n,t[n]);if(Cs)for(var n of Cs(t))Qg.call(t,n)&&Os(e,n,t[n]);return e};const Yg=(0,S.default)(w.Box)`
  overflow: hidden;
  border-bottom: 1px solid ${({theme:e})=>e.colors.neutral200};
  border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
  border-left: 1px solid ${({theme:e})=>e.colors.neutral200};
  border-radius: 0 0 ${({theme:e})=>e.borderRadius} ${({theme:e})=>e.borderRadius};
`,Jg=(0,S.default)(w.Box)`
  > div {
    & > * {
      border-radius: unset;
      border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
      border-left: 1px solid ${({theme:e})=>e.colors.neutral200};
      border-bottom: 1px solid ${({theme:e})=>e.colors.neutral200};
    }
    > div {
      > div:first-of-type {
        border-radius: unset;
      }
    }
  }

  > div:first-of-type {
    > div {
      border-radius: ${({theme:e})=>e.borderRadius} ${({theme:e})=>e.borderRadius} 0 0;
      > div:first-of-type {
        border-radius: ${({theme:e})=>e.borderRadius} ${({theme:e})=>e.borderRadius} 0 0;
      }
    }

    > div:not([data-strapi-expanded='true']) {
      border-top: 1px solid ${({theme:e})=>e.colors.neutral200};

      &:hover {
        border-top: 1px solid ${({theme:e})=>e.colors.primary600};
      }
    }

    > span {
      border-radius: ${({theme:e})=>e.borderRadius} ${({theme:e})=>e.borderRadius} 0 0;
      border-top: 1px solid ${({theme:e})=>e.colors.neutral200};
    }
  }

  & [data-strapi-expanded='true'] {
    border: 1px solid ${({theme:e})=>e.colors.primary600};
  }

  ${({theme:e,footer:t})=>`
    &:not(${t}) {
      & > *:last-of-type {
        border-radius: 0 0 ${e.borderRadius} ${e.borderRadius};
      }
    }
  `}
`,Xg=(0,S.default)(w.Box)`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,dr=({children:e,footer:t,label:n,labelAction:a,error:s})=>{const{formatMessage:i}=(0,A.useIntl)(),l=r.Children.toArray(e).map(u=>(0,r.cloneElement)(u,{hasErrorMessage:!1}));return r.createElement(vs.KeyboardNavigable,{attributeName:"data-strapi-accordion-toggle"},n&&r.createElement(j.Flex,{paddingBottom:1},r.createElement(L.Typography,{as:"label",textColor:"neutral800",variant:"pi",fontWeight:"bold"},n),a&&r.createElement(Xg,{paddingLeft:1},a)),r.createElement(Jg,{footer:t},l),t&&r.createElement(Yg,null,t),s&&r.createElement(w.Box,{paddingTop:1},r.createElement(L.Typography,{variant:"pi",textColor:"danger600"},i({id:s.id,defaultMessage:s.id},Kg({},s.values)))))};dr.defaultProps={error:void 0,footer:null,label:null,labelAction:void 0},dr.propTypes={children:o().node.isRequired,error:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),footer:o().node,label:o().string,labelAction:o().node};const ey=dr,ty=(0,S.default)(us.TextButton)`
  height: 100%;
  width: 100%;
  border-radius: 0 0 4px 4px;
  display: flex;
  justify-content: center;
  span {
    font-weight: 600;
    font-size: 14px;
  }
`,pr=({addRepeatableComponentToField:e,formErrors:t,componentUid:n,componentValue:a,componentValueLength:s,isReadOnly:i,max:l,min:u,name:c})=>{const d=(0,g.useNotification)(),{formatMessage:m}=(0,A.useIntl)(),[f,y]=(0,r.useState)(""),[h,b]=(0,r.useState)(!1),[,E]=(0,Te.useDrop)({accept:Pe.COMPONENT}),{getComponentLayout:O}=ut(),I=(0,r.useMemo)(()=>O(n),[n,O]),C=(0,r.useMemo)(()=>Mo(a||[])+1,[a]),x=Ig(c,t),D=()=>{y("")},W=u-s,F=R()(t,c,{id:""}).id.includes("min"),$=(0,r.useCallback)(()=>{i||(s<l?(e(c,n,F),y(C)):s>=l&&d({type:"info",message:{id:v("components.notification.info.maximum-requirement")}}))},[e,n,s,F,i,l,c,C,d]);let N=t[c];return F&&(N={id:v("components.DynamicZone.missing-components"),defaultMessage:"There {number, plural, =0 {are # missing components} one {is # missing component} other {are # missing components}}",values:{number:W}}),s===0?r.createElement(la,{error:N,isReadOnly:i,onClick:$}):(x.some(V=>V.split(".").length>1)&&!F&&(N={id:v("components.RepeatableComponent.error-message"),defaultMessage:"The component(s) contain error(s)"}),r.createElement(w.Box,{hasRadius:!0,ref:E},r.createElement(ey,{error:N,footer:r.createElement(j.Flex,{justifyContent:"center",height:"48px",background:"neutral0"},r.createElement(ty,{disabled:i,onClick:$,startIcon:r.createElement(mt(),null)},m({id:v("containers.EditView.add.new-entry"),defaultMessage:"Add an entry"})))},a.map((V,_)=>{const k=V.__temp_key__,Z=f===k,B=`${c}.${_}`,Y=x.includes(B);return r.createElement(_g,{componentFieldName:B,componentUid:n,hasErrors:Y,hasMinError:F,isDraggingSibling:h,isOpen:Z,isReadOnly:i,key:k,onClickToggle:()=>{y(Z?"":k)},parentName:c,schema:I,setIsDraggingSibling:b,toggleCollapses:D})}))))};pr.defaultProps={componentValue:null,componentValueLength:0,formErrors:{},max:1/0,min:0},pr.propTypes={addRepeatableComponentToField:o().func.isRequired,componentUid:o().string.isRequired,componentValue:o().oneOfType([o().array,o().object]),componentValueLength:o().number,formErrors:o().object,isReadOnly:o().bool.isRequired,max:o().number,min:o().number,name:o().string.isRequired};const ny=(0,r.memo)(pr),ry=Mg(ny,wg);var oy=Object.defineProperty,Ps=Object.getOwnPropertySymbols,ay=Object.prototype.hasOwnProperty,sy=Object.prototype.propertyIsEnumerable,Rs=(e,t,n)=>t in e?oy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ms=(e,t)=>{for(var n in t||(t={}))ay.call(t,n)&&Rs(e,n,t[n]);if(Ps)for(var n of Ps(t))sy.call(t,n)&&Rs(e,n,t[n]);return e};function iy(e,t){return function(n){const a=t(n);return r.createElement(e,Ms(Ms({},n),a))}}const ly=iy;function cy({isFromDynamicZone:e,name:t}){const{addNonRepeatableComponentToField:n,createActionAllowedFields:a,isCreatingEntry:s,modifiedData:i,removeComponentFromField:l,readActionAllowedFields:u,updateActionAllowedFields:c,formErrors:d}=(0,g.useCMEditViewDataManager)(),{contentType:m}=ut(),f=(0,r.useMemo)(()=>{const C=(0,q.get)(m,["attributes"],{});return Object.keys(C).filter(D=>(0,q.get)(C,[D,"type"],"")==="dynamiczone")},[m]),y=(0,r.useMemo)(()=>s?a:c,[s,a,c]),h=(0,q.get)(i,t,null),b=(0,r.useMemo)(()=>Ro(t),[t]),E=(0,r.useMemo)(()=>e&&s||y.filter(D=>D===b[0]).length>0?!0:y.map(D=>D.split(".")).filter(D=>D.length<b.length?!1:(0,q.take)(D,b.length).join(".")===b.join(".")).length>0,[e,s,y,b]),O=(0,r.useMemo)(()=>e||f.includes(b[0])?!0:(s?[]:u).map(D=>D.split(".")).filter(D=>D.length<b.length?!1:(0,q.take)(D,b.length).join(".")===b.join(".")).length>0,[e,f,b,s,u]),I=(0,r.useMemo)(()=>s||E?!1:O,[E,O,s]);return{addNonRepeatableComponentToField:n,formErrors:d,hasChildrenAllowedFields:E,hasChildrenReadableFields:O,isCreatingEntry:s,isReadOnly:I,removeComponentFromField:l,componentValue:h}}const uy=cy,dy=(0,S.default)(w.Box)`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,mr=({intlLabel:e,id:t,labelAction:n,name:a,numberOfEntries:s,showNumberOfEntries:i,required:l})=>{const{formatMessage:u}=(0,A.useIntl)(),c=e!=null&&e.id?u(e):a;return r.createElement(w.Box,{paddingBottom:1},r.createElement(j.Flex,null,r.createElement(L.Typography,{textColor:"neutral800",htmlFor:t||a,variant:"pi",fontWeight:"bold",as:"label"},c,i&&r.createElement(r.Fragment,null,"\xA0(",s,")"),l&&r.createElement(L.Typography,{textColor:"danger600"},"*")),n&&r.createElement(dy,{paddingLeft:1},n)))};mr.defaultProps={id:void 0,labelAction:void 0,numberOfEntries:0,required:!1,showNumberOfEntries:!1},mr.propTypes={id:o().string,intlLabel:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}).isRequired,labelAction:o().element,name:o().string.isRequired,numberOfEntries:o().number,required:o().bool,showNumberOfEntries:o().bool};const py=mr,fr=({addNonRepeatableComponentToField:e,componentUid:t,intlLabel:n,isCreatingEntry:a,isFromDynamicZone:s,isRepeatable:i,isNested:l,labelAction:u,max:c,min:d,name:m,hasChildrenAllowedFields:f,hasChildrenReadableFields:y,isReadOnly:h,componentValue:b,removeComponentFromField:E,required:O})=>{const{formatMessage:I}=(0,A.useIntl)(),C=Pd()(b),x=b!==null||s,D=!i&&x&&!s&&f;if(!f&&a)return r.createElement(g.NotAllowedInput,{labelAction:u,intlLabel:n,name:m});if(!f&&!a&&!y)return r.createElement(g.NotAllowedInput,{labelAction:u,intlLabel:n,name:m});const W=()=>{e(m,t)};return r.createElement(w.Box,null,r.createElement(j.Flex,{justifyContent:"space-between"},n&&r.createElement(py,{intlLabel:n,labelAction:u,name:m,numberOfEntries:C,showNumberOfEntries:i,required:O}),D&&r.createElement(Me.IconButton,{label:I({id:v("components.reset-entry"),defaultMessage:"Reset Entry"}),icon:r.createElement(qe(),null),noBorder:!0,onClick:()=>{E(m,t)}})),r.createElement(ae.Stack,{spacing:1},!i&&!x&&r.createElement(la,{isReadOnly:h,onClick:W}),!i&&x&&r.createElement(Eg,{componentUid:t,isFromDynamicZone:s,isNested:l,name:m}),i&&r.createElement(ry,{componentValue:b,componentValueLength:C,componentUid:t,isReadOnly:h,max:c,min:d,name:m})))};fr.defaultProps={componentValue:null,hasChildrenAllowedFields:!1,hasChildrenReadableFields:!1,intlLabel:void 0,isFromDynamicZone:!1,isReadOnly:!1,isRepeatable:!1,isNested:!1,labelAction:void 0,max:1/0,min:-1/0,required:!1},fr.propTypes={addNonRepeatableComponentToField:o().func.isRequired,componentUid:o().string.isRequired,componentValue:o().oneOfType([o().object,o().array]),hasChildrenAllowedFields:o().bool,hasChildrenReadableFields:o().bool,isCreatingEntry:o().bool.isRequired,isFromDynamicZone:o().bool,isReadOnly:o().bool,isRepeatable:o().bool,isNested:o().bool,intlLabel:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),labelAction:o().element,max:o().number,min:o().number,name:o().string.isRequired,removeComponentFromField:o().func.isRequired,required:o().bool};const my=(0,r.memo)(fr,He()),tn=ly(my,uy),fy=(0,S.default)(w.Box)`
  width: ${({theme:e})=>e.spaces[2]};
  height: ${({theme:e})=>e.spaces[4]};
`,gy=()=>r.createElement(j.Flex,{justifyContent:"center"},r.createElement(fy,{background:"neutral200"})),yy=(0,S.default)(ae.Stack)`
  svg {
    path {
      fill: ${({theme:e,expanded:t})=>t?e.colors.primary600:e.colors.neutral600};
    }
  }
`,gr=(0,S.default)(Me.IconButton)`
  background-color: transparent;
`,hy=(0,S.default)(w.Box)`
  > div:first-child {
    box-shadow: ${({theme:e})=>e.shadows.tableShadow};
  }
`,by=(0,S.default)(w.Box)`
  border-radius: 0 0 ${({theme:e})=>e.spaces[1]} ${({theme:e})=>e.spaces[1]};
`,Ts=({componentUid:e,formErrors:t,index:n,isOpen:a,isFieldAllowed:s,moveComponentDown:i,moveComponentUp:l,name:u,onToggle:c,removeComponentFromDynamicZone:d,showDownIcon:m,showUpIcon:f})=>{const{formatMessage:y}=(0,A.useIntl)(),{getComponentLayout:h}=ut(),{icon:b,friendlyName:E}=(0,r.useMemo)(()=>{const{info:{icon:G,displayName:V}}=h(e);return{friendlyName:V,icon:G}},[e,h]),O=()=>i(u,n),I=()=>l(u,n),C=()=>d(u,n),x=y({id:v("components.DynamicZone.move-down-label"),defaultMessage:"Move component down"}),D=y({id:v("components.DynamicZone.move-up-label"),defaultMessage:"Move component down"}),W=y({id:v("components.DynamicZone.delete-label"),defaultMessage:"Delete {name}"},{name:E}),$=Object.keys(t).filter(G=>{const V=G.split(".");return`${V[0]}.${V[1]}`==`${u}.${n}`});let N;return $.length>0&&(N=y({id:v("components.DynamicZone.error-message"),defaultMessage:"The component contains error(s)"})),r.createElement(w.Box,null,r.createElement(gy,null),r.createElement(hy,{hasRadius:!0},r.createElement(_e.Accordion,{expanded:a,onToggle:()=>c(n),size:"S",error:N},r.createElement(_e.AccordionToggle,{startIcon:r.createElement(Fn.G,{icon:b}),action:r.createElement(yy,{horizontal:!0,spacing:0,expanded:a},m&&r.createElement(gr,{noBorder:!0,label:x,onClick:O,icon:r.createElement(Ed(),null)}),f&&r.createElement(gr,{noBorder:!0,label:D,onClick:I,icon:r.createElement(Cd(),null)}),s&&r.createElement(gr,{noBorder:!0,label:W,onClick:C,icon:r.createElement(qe(),null)})),title:E,togglePosition:"left"}),r.createElement(_e.AccordionContent,null,r.createElement(by,{background:"neutral0"},r.createElement(kn.FocusTrap,{onEscape:()=>c(n)},r.createElement(tn,{componentUid:e,icon:b,name:`${u}.${n}`,isFromDynamicZone:!0})))))))};Ts.propTypes={componentUid:o().string.isRequired,formErrors:o().object.isRequired,index:o().number.isRequired,isFieldAllowed:o().bool.isRequired,isOpen:o().bool.isRequired,moveComponentDown:o().func.isRequired,moveComponentUp:o().func.isRequired,name:o().string.isRequired,onToggle:o().func.isRequired,removeComponentFromDynamicZone:o().func.isRequired,showDownIcon:o().bool.isRequired,showUpIcon:o().bool.isRequired};const Ey=(0,r.memo)(Ts,He());var vy=p(81346),Cy=p.n(vy);const ws=(0,S.default)(Fn.G)`
  width: ${(0,g.pxToRem)(32)} !important;
  height: ${(0,g.pxToRem)(32)} !important;
  padding: ${(0,g.pxToRem)(9)};
  border-radius: ${(0,g.pxToRem)(64)};
  background: ${({theme:e})=>e.colors.neutral150};
  path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,Oy=(0,S.default)(w.Box)`
  flex-shrink: 0;
  height: ${(0,g.pxToRem)(84)};
  border: 1px solid ${({theme:e})=>e.colors.neutral200};
  background: ${({theme:e})=>e.colors.neutral100};
  border-radius: ${({theme:e})=>e.borderRadius};
  display: flex;
  justify-content: center;
  align-items: center;

  &.active,
  &:hover {
    border: 1px solid ${({theme:e})=>e.colors.primary200};
    background: ${({theme:e})=>e.colors.primary100};

    ${ws} {
      background: ${({theme:e})=>e.colors.primary200};
      path {
        fill: ${({theme:e})=>e.colors.primary600};
      }
    }

    ${L.Typography} {
      color: ${({theme:e})=>e.colors.primary600};
    }
  }
`;function yr({componentUid:e,intlLabel:t,icon:n,onClick:a}){const{formatMessage:s}=(0,A.useIntl)(),i=()=>{a(e)};return r.createElement("button",{type:"button",onClick:i},r.createElement(Oy,{borderRadius:"borderRadius"},r.createElement(ae.Stack,{spacing:1,style:{justifyContent:"center",alignItems:"center"}},r.createElement(ws,{icon:n}),r.createElement(L.Typography,{variant:"pi",fontWeight:"bold",textColor:"neutral600"},s(t)))))}yr.defaultProps={icon:"dice-d6",onClick:()=>{}},yr.propTypes={componentUid:o().string.isRequired,intlLabel:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired}).isRequired,icon:o().string,onClick:o().func};const Py=yr,Ry=S.default.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, ${140/16}rem);
  grid-gap: ${({theme:e})=>e.spaces[1]};
`,Is=({category:e,components:t,isOdd:n,isOpen:a,onAddComponent:s,onToggle:i})=>{const{formatMessage:l}=(0,A.useIntl)(),u=()=>{i(e)};return r.createElement(_e.Accordion,{expanded:a,onToggle:u,size:"S"},r.createElement(_e.AccordionToggle,{variant:n?"primary":"secondary",title:l({id:e,defaultMessage:e}),togglePosition:"left"}),r.createElement(_e.AccordionContent,null,r.createElement(w.Box,{paddingTop:4,paddingBottom:4,paddingLeft:3,paddingRight:3},r.createElement(Ry,null,t.map(({componentUid:c,info:{displayName:d,icon:m}})=>r.createElement(Py,{key:c,componentUid:c,intlLabel:{id:d,defaultMessage:d},icon:m,onClick:s}))))))};Is.propTypes={category:o().string.isRequired,components:o().array.isRequired,isOdd:o().bool.isRequired,isOpen:o().bool.isRequired,onAddComponent:o().func.isRequired,onToggle:o().func.isRequired};const My=Is,Ds=({components:e,isOpen:t,onClickAddComponent:n})=>{const{formatMessage:a}=(0,A.useIntl)(),{getComponentLayout:s}=ut(),[i,l]=(0,r.useState)(""),u=(0,r.useMemo)(()=>{const m=e.map(y=>{const{category:h,info:b}=s(y);return{componentUid:y,category:h,info:b}}),f=Cy()(m,"category");return Object.keys(f).reduce((y,h)=>(y.push({category:h,components:f[h]}),y),[])},[e,s]);(0,r.useEffect)(()=>{t&&u.length&&l(u[0].category)},[t,u]);const c=(0,r.useCallback)(m=>{n(m),l("")},[n]),d=(0,r.useCallback)(m=>{l(i===m?"":m)},[i]);return t?r.createElement(w.Box,{paddingBottom:6},r.createElement(w.Box,{paddingTop:6,paddingBottom:6,paddingLeft:5,paddingRight:5,background:"neutral0",shadow:"tableShadow",borderColor:"neutral150",hasRadius:!0},r.createElement(j.Flex,{justifyContent:"center"},r.createElement(L.Typography,{fontWeight:"bold",textColor:"neutral600"},a({id:v("components.DynamicZone.ComponentPicker-label"),defaultMessage:"Pick one component"}))),r.createElement(w.Box,{paddingTop:2},r.createElement(vs.KeyboardNavigable,{attributeName:"data-strapi-accordion-toggle"},u.map(({category:m,components:f},y)=>r.createElement(My,{key:m,category:m,components:f,isOdd:y%2===1,isOpen:m===i,onAddComponent:c,onToggle:d})))))):null};Ds.propTypes={components:o().array.isRequired,isOpen:o().bool.isRequired,onClickAddComponent:o().func.isRequired};const Ty=(0,r.memo)(Ds);var wy=Object.defineProperty,Iy=Object.defineProperties,Dy=Object.getOwnPropertyDescriptors,xs=Object.getOwnPropertySymbols,xy=Object.prototype.hasOwnProperty,Sy=Object.prototype.propertyIsEnumerable,Ss=(e,t,n)=>t in e?wy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ly=(e,t)=>{for(var n in t||(t={}))xy.call(t,n)&&Ss(e,n,t[n]);if(xs)for(var n of xs(t))Sy.call(t,n)&&Ss(e,n,t[n]);return e},Fy=(e,t)=>Iy(e,Dy(t));const Ls=e=>Array.from({length:e}).map(()=>({isOpen:!1})),hr=({name:e,addComponentToDynamicZone:t,formErrors:n,isCreatingEntry:a,isFieldAllowed:s,isFieldReadable:i,labelAction:l,moveComponentUp:u,moveComponentDown:c,removeComponentFromDynamicZone:d,dynamicDisplayedComponents:m,fieldSchema:f,metadatas:y})=>{const h=(0,g.useNotification)(),[b,E]=(0,r.useState)(!1),[O,I]=(0,r.useState)(!1),C=m.length,x=y.description?{id:y.description,defaultMessage:y.description}:null,[D,W]=(0,r.useState)(Ls(C));(0,r.useEffect)(()=>{W(Ls(C))},[C]),(0,r.useEffect)(()=>{O&&(W(P=>P.map((M,H)=>H===P.length-1?Fy(Ly({},M),{isOpen:!0}):M)),I(!1))},[O]);const{max:F=1/0,min:$=-1/0}=f,N=(0,r.useMemo)(()=>Object.keys(n).filter(P=>P===e).map(P=>n[P]),[n,e]),G=(0,r.useMemo)(()=>f.components||[],[f]),V=$-C,_=N.length>0,k=N.length>0&&R()(N,[0,"id"],"").includes("min"),Z=_&&R()(N,[0,"id"],"")==="components.Input.error.validation.max",B=(0,r.useCallback)(P=>{E(!1),t(e,P,_),I(!0)},[t,_,e]),Y=()=>{C<F?E(P=>!P):h({type:"info",message:{id:v("components.notification.info.maximum-requirement")}})},T=P=>{W(M=>M.map(({isOpen:H},re)=>re===P?{isOpen:!H}:{isOpen:H}))},z=(P,M)=>{c(P,M),W(H=>H.map(({isOpen:re},ce,me)=>ce===M+1?{isOpen:me[M].isOpen}:ce===M?{isOpen:me[ce+1].isOpen}:{isOpen:re}))},Q=(P,M)=>{u(P,M),W(H=>H.map(({isOpen:re},ce,me)=>ce===M-1?{isOpen:me[M].isOpen}:ce===M?{isOpen:me[ce-1].isOpen}:{isOpen:re}))},K=(P,M)=>{d(P,M)};return!s&&a?r.createElement(g.NotAllowedInput,{description:x,intlLabel:{id:y.label,defaultMessage:y.label},labelAction:l,name:e}):!s&&!i&&!a?r.createElement(g.NotAllowedInput,{description:x,intlLabel:{id:y.label,defaultMessage:y.label},labelAction:l,name:e}):r.createElement(ae.Stack,{spacing:6},C>0&&r.createElement(w.Box,null,r.createElement(hd,{intlDescription:x,label:y.label,labelAction:l,name:e,numberOfComponents:C,required:f.required||!1}),m.map((P,M)=>{var H;const re=s&&C>0&&M<C-1,ce=s&&C>0&&M>0,me=((H=D[M])==null?void 0:H.isOpen)||!1;return r.createElement(Ey,{componentUid:P,formErrors:n,key:M,index:M,isOpen:me,isFieldAllowed:s,moveComponentDown:z,moveComponentUp:Q,onToggle:T,name:e,removeComponentFromDynamicZone:K,showDownIcon:re,showUpIcon:ce})})),r.createElement(gd,{hasError:_,hasMaxError:Z,hasMinError:k,isDisabled:!s,label:y.label,missingComponentNumber:V,isOpen:b,name:e,onClick:Y}),r.createElement(Ty,{isOpen:b,components:G,onClickAddComponent:B}))};hr.defaultProps={dynamicDisplayedComponents:[],fieldSchema:{max:1/0,min:-1/0},labelAction:null},hr.propTypes={addComponentToDynamicZone:o().func.isRequired,dynamicDisplayedComponents:o().array,fieldSchema:o().shape({components:o().array.isRequired,max:o().number,min:o().number,required:o().bool}),formErrors:o().object.isRequired,isCreatingEntry:o().bool.isRequired,isFieldAllowed:o().bool.isRequired,isFieldReadable:o().bool.isRequired,labelAction:o().element,metadatas:o().shape({description:o().string,label:o().string}).isRequired,moveComponentUp:o().func.isRequired,moveComponentDown:o().func.isRequired,name:o().string.isRequired,removeComponentFromDynamicZone:o().func.isRequired};const ky=(0,r.memo)(hr,He()),Ay=cd(ky,dd);var ot=p(50174);const nn=()=>({type:ot.ZA}),br=e=>({type:ot.Id,data:e}),Er=(e,t=!1)=>({type:ot.TP,rawQuery:e,isSingleType:t}),Fs=()=>({type:ot.c2}),ks=(e,t)=>({type:ot.w7,componentsDataStructure:e,contentTypeDataStructure:t}),he=e=>({type:ot.d0,status:e}),Ke=e=>({type:ot.t9,data:e}),As=e=>e["content-manager_editViewCrudReducer"];var jy=p(98399),$y=Object.defineProperty,js=Object.getOwnPropertySymbols,By=Object.prototype.hasOwnProperty,Ny=Object.prototype.propertyIsEnumerable,$s=(e,t,n)=>t in e?$y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vy=(e,t)=>{for(var n in t||(t={}))By.call(t,n)&&$s(e,n,t[n]);if(js)for(var n of js(t))Ny.call(t,n)&&$s(e,n,t[n]);return e},at=(e,t,n)=>new Promise((a,s)=>{var i=c=>{try{u(n.next(c))}catch(d){s(d)}},l=c=>{try{u(n.throw(c))}catch(d){s(d)}},u=c=>c.done?a(c.value):Promise.resolve(c.value).then(i,l);u((n=n.apply(e,t)).next())});const vr=({allLayoutData:e,children:t,slug:n,id:a,origin:s})=>{const i=(0,g.useNotification)(),{setCurrentStep:l}=(0,g.useGuidedTour)(),{trackUsage:u}=(0,g.useTracking)(),{push:c,replace:d}=(0,te.useHistory)(),[{rawQuery:m}]=(0,g.useQueryParams)(),f=(0,fe.I0)(),{componentsDataStructure:y,contentTypeDataStructure:h,data:b,isLoading:E,status:O}=(0,fe.v9)(As),I=_o(n),C=(0,r.useRef)(!0),x=(0,r.useRef)(u),D=(0,r.useRef)(e),W=a===null,F=(0,r.useMemo)(()=>W&&!s?null:ve(`collection-types/${n}/${s||a}`),[n,a,W,s]),$=(0,r.useCallback)(T=>s?(0,g.contentManagementUtilRemoveFieldsFromData)(T,D.current.contentType,D.current.components):T,[s]),N=(0,r.useCallback)(T=>{const z=So(T,D.current.contentType,D.current.components);return(0,g.formatContentTypeData)(z,D.current.contentType,D.current.components)},[]);(0,r.useEffect)(()=>{const T=Object.keys(e.components).reduce((K,P)=>{const M=qt(R()(e,["components",P,"attributes"],{}),e.components);return K[P]=(0,g.formatContentTypeData)(M,e.components[P],e.components),K},{}),z=qt(e.contentType.attributes,e.components),Q=(0,g.formatContentTypeData)(z,e.contentType,e.components);f(ks(T,Q))},[e,f]),(0,r.useEffect)(()=>()=>{f(Fs())},[f]),(0,r.useEffect)(()=>{const z=Se().CancelToken.source(),Q=P=>at(void 0,null,function*(){f(nn());try{const{data:M}=yield ge.be.get(F,{cancelToken:P.token});f(br(N($(M))))}catch(M){if(Se().isCancel(M))return;jy.error(M);const H=R()(M,"response.status",null);if(H===404){c(I);return}H===403&&(i({type:"info",message:{id:v("permissions.not-allowed.update")}}),c(I))}}),K=()=>at(void 0,null,function*(){yield f(nn()),yield f(Er(m))});return C.current?(F?Q(z):K(),()=>{z.cancel("Operation canceled by the user.")}):()=>{}},[$,N,c,F,f,m,I,i]);const G=(0,r.useCallback)(T=>{const z=T.response.data;let Q=R()(z,["error","message"],"Bad Request");Array.isArray(Q)&&(Q=R()(Q,["0","messages","0","id"])),typeof Q=="string"&&i({type:"warning",message:Q})},[i]),V=(0,r.useCallback)(T=>at(void 0,null,function*(){try{x.current("willDeleteEntry",T);const{data:z}=yield ge.be.delete(ve(`collection-types/${n}/${a}`));return i({type:"success",message:{id:v("success.record.delete")}}),x.current("didDeleteEntry",T),Promise.resolve(z)}catch(z){return x.current("didNotDeleteEntry",Vy({error:z},T)),Promise.reject(z)}}),[a,n,i]),_=(0,r.useCallback)(()=>{d(I)},[I,d]),k=(0,r.useCallback)((T,z)=>at(void 0,null,function*(){const Q=`${ve(`collection-types/${n}`)}${m}`;try{f(he("submit-pending"));const{data:K}=yield ge.be.post(Q,T);return x.current("didCreateEntry",z),i({type:"success",message:{id:v("success.record.save")}}),l("contentManager.success"),f(Ke(N(K))),f(he("resolved")),d(`/content-manager/collectionType/${n}/${K.id}${m}`),Promise.resolve(K)}catch(K){return G(K),x.current("didNotCreateEntry",{error:K,trackerProperty:z}),f(he("resolved")),Promise.reject(K)}}),[N,G,d,n,f,m,i,l]),Z=(0,r.useCallback)(()=>at(void 0,null,function*(){try{x.current("willPublishEntry");const T=ve(`collection-types/${n}/${a}/actions/publish`);f(he("publish-pending"));const{data:z}=yield ge.be.post(T);return x.current("didPublishEntry"),f(Ke(N(z))),f(he("resolved")),i({type:"success",message:{id:v("success.record.publish")}}),Promise.resolve(z)}catch(T){return G(T),f(he("resolved")),Promise.reject(T)}}),[N,G,a,n,f,i]),B=(0,r.useCallback)((T,z)=>at(void 0,null,function*(){const Q=ve(`collection-types/${n}/${a}`);try{x.current("willEditEntry",z),f(he("submit-pending"));const{data:K}=yield ge.be.put(Q,T);return x.current("didEditEntry",{trackerProperty:z}),i({type:"success",message:{id:v("success.record.save")}}),f(Ke(N(K))),f(he("resolved")),Promise.resolve(K)}catch(K){return x.current("didNotEditEntry",{error:K,trackerProperty:z}),G(K),f(he("resolved")),Promise.reject(K)}}),[N,G,n,a,f,i]),Y=(0,r.useCallback)(()=>at(void 0,null,function*(){const T=ve(`collection-types/${n}/${a}/actions/unpublish`);f(he("unpublish-pending"));try{x.current("willUnpublishEntry");const{data:z}=yield ge.be.post(T);return x.current("didUnpublishEntry"),i({type:"success",message:{id:v("success.record.unpublish")}}),f(Ke(N(z))),f(he("resolved")),Promise.resolve(z)}catch(z){return f(he("resolved")),G(z),Promise.reject(z)}}),[N,G,a,n,f,i]);return t({componentsDataStructure:y,contentTypeDataStructure:h,data:b,isCreatingEntry:W,isLoadingForData:E,onDelete:V,onDeleteSucceeded:_,onPost:k,onPublish:Z,onPut:B,onUnpublish:Y,status:O,redirectionLink:I})};vr.defaultProps={id:null,origin:null},vr.propTypes={allLayoutData:o().exact({components:o().object.isRequired,contentType:o().shape({apiID:o().string.isRequired,attributes:o().object.isRequired,info:o().object.isRequired,isDisplayed:o().bool.isRequired,kind:o().string.isRequired,layouts:o().object.isRequired,metadatas:o().object.isRequired,options:o().object.isRequired,pluginOptions:o().object,settings:o().object.isRequired,uid:o().string.isRequired}).isRequired}).isRequired,children:o().func.isRequired,id:o().string,origin:o().string,slug:o().string.isRequired};const qy=(0,r.memo)(vr,He());var Wy=p(89793),rn=p.n(Wy),zy=p(56236),Uy=p.n(zy);const Cr=(e,t,n,a)=>{const s=e.slice();return s.splice(t,1),s.splice(n,0,a),s},Hy=(e,t,n)=>{const a=(l,u)=>R()(l,["attributes",u,"type"],""),s=(l,u)=>R()(l,["attributes",...u],""),i=(l,u)=>Object.keys(l).reduce((c,d)=>{const m=a(u,d),f=R()(l,d),y=s(u,[d,"component"]),h=s(u,[d,"repeatable"]);let b;switch(m){case"json":b=JSON.parse(f);break;case"time":{b=f,f&&f.split(":").length<3&&(b=`${f}:00`);break}case"media":s(u,[d,"multiple"])===!0?b=f?f.filter(E=>!(E instanceof File)):null:b=R()(f,0)instanceof File?null:R()(f,"id",null);break;case"component":h?b=f&&f.map(E=>i(E,n[y])):b=f&&i(f,n[y]);break;case"dynamiczone":b=f.map(E=>i(E,n[E.__component]));break;default:b=_y(f,"id")}return c[d]=b,c},{});return i(e,t)},_y=(e,t)=>Aa()(e)?e.map(n=>n[t]?n[t]:n):Wo()(e)?e[t]:e,Zy=Hy;var Gy=p(51355),Qy=p.n(Gy),Ky=p(95919),Yy=p.n(Ky),Jy=p(78746),ft=p.n(Jy),be=p(5173);function St(e){return["integer","biginteger","decimal","float","number"].includes(e)}var Xy=Object.defineProperty,eh=Object.defineProperties,th=Object.getOwnPropertyDescriptors,Bs=Object.getOwnPropertySymbols,nh=Object.prototype.hasOwnProperty,rh=Object.prototype.propertyIsEnumerable,Ns=(e,t,n)=>t in e?Xy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vs=(e,t)=>{for(var n in t||(t={}))nh.call(t,n)&&Ns(e,n,t[n]);if(Bs)for(var n of Bs(t))rh.call(t,n)&&Ns(e,n,t[n]);return e},qs=(e,t)=>eh(e,th(t));be.kM(be.nK,"defined",function(){return this.test("defined",g.translatedErrors.required,e=>e!==void 0)}),be.kM(be.IX,"notEmptyMin",function(e){return this.test("notEmptyMin",g.translatedErrors.min,t=>Re()(t)?!0:t.length>=e)}),be.kM(be.Z_,"isInferior",function(e,t){return this.test("isInferior",e,function(n){return!n||Number.isNaN(ft()(n))?!0:ft()(t)>=ft()(n)})}),be.kM(be.Z_,"isSuperior",function(e,t){return this.test("isSuperior",e,function(n){return!n||Number.isNaN(ft()(n))?!0:ft()(n)>=ft()(t)})});const oh=e=>R()(e,["attributes"],{}),Or=(e,{components:t},n={isCreatingEntry:!0,isDraft:!0,isFromComponent:!1})=>{const a=oh(e);return be.Ry().shape(Object.keys(a).reduce((s,i)=>{const l=a[i];if(l.type!=="relation"&&l.type!=="component"&&l.type!=="dynamiczone"){const u=ah(l.type,l,n);s[i]=u}if(l.type==="relation"&&(s[i]=["oneWay","oneToOne","manyToOne","oneToManyMorph","oneToOneMorph"].includes(l.relationType)?be.Ry().nullable():be.IX().nullable()),l.type==="component"){const u=Or(t[l.component],{components:t},qs(Vs({},n),{isFromComponent:!0}));if(l.repeatable===!0){const{min:d,max:m,required:f}=l;let y=be.Vo(h=>{let b=be.IX().of(u);return d?f?b=b.min(d,g.translatedErrors.min):f!==!0&&Re()(h)?b=b.nullable():b=b.min(d,g.translatedErrors.min):f&&!n.isDraft&&(b=b.min(1,g.translatedErrors.required)),m&&(b=b.max(m,g.translatedErrors.max)),b});return s[i]=y,s}const c=be.Vo(d=>d!==void 0?l.required===!0&&!n.isDraft?u.defined():u.nullable():l.required===!0?be.Ry().defined():be.Ry().nullable());return s[i]=c,s}if(l.type==="dynamiczone"){let u=be.IX().of(be.Vo(({__component:m})=>Or(t[m],{components:t},qs(Vs({},n),{isFromComponent:!0}))));const{max:c,min:d}=l;d?l.required?u=u.test("min",g.translatedErrors.min,m=>n.isCreatingEntry?m&&m.length>=d:m===void 0?!0:m!==null&&m.length>=d).test("required",g.translatedErrors.required,m=>n.isCreatingEntry?m!==null||m!==void 0:m===void 0?!0:m!==null):u=u.notEmptyMin(d):l.required&&!n.isDraft&&(u=u.test("required",g.translatedErrors.required,m=>n.isCreatingEntry?m!==null||m!==void 0:m===void 0?!0:m!==null)),c&&(u=u.max(c,g.translatedErrors.max)),s[i]=u}return s},{}))},ah=(e,t,n)=>{let a=be.nK();return["string","uid","text","richtext","email","password","enumeration"].includes(e)&&(a=be.Z_()),e==="json"&&(a=be.nK(g.translatedErrors.json).test("isJSON",g.translatedErrors.json,s=>{if(s===void 0)return!0;try{return JSON.parse(s),!0}catch(i){return!1}}).nullable()),e==="email"&&(a=a.email(g.translatedErrors.email)),["number","integer","float","decimal"].includes(e)&&(a=be.Rx().transform(s=>Yy()(s)?void 0:s).typeError()),e==="biginteger"&&(a=be.Z_().matches(/^-?\d*$/)),["date","datetime"].includes(e)&&(a=be.hT()),Object.keys(t).forEach(s=>{const i=t[s];if(!!i||!Qy()(i)&&Number.isInteger(Math.floor(i))||i===0)switch(s){case"required":{n.isDraft||(e==="password"&&n.isCreatingEntry&&(a=a.required(g.translatedErrors.required)),e!=="password"&&(n.isCreatingEntry?a=a.required(g.translatedErrors.required):a=a.test("required",g.translatedErrors.required,l=>l===void 0&&!n.isFromComponent?!0:St(e)?l===0?!0:!!l:e==="boolean"?l!==null:e==="date"||e==="datetime"?typeof l=="string"?!Re()(l):!Re()(l==null?void 0:l.toString()):!Re()(l))));break}case"max":{e==="biginteger"?a=a.isInferior(g.translatedErrors.max,i):a=a.max(i,g.translatedErrors.max);break}case"maxLength":a=a.max(i,g.translatedErrors.maxLength);break;case"min":{e==="biginteger"?a=a.isSuperior(g.translatedErrors.min,i):a=a.min(i,g.translatedErrors.min);break}case"minLength":{n.isDraft||(a=a.min(i,g.translatedErrors.minLength));break}case"regex":a=a.matches(new RegExp(i),{message:g.translatedErrors.regex,excludeEmptyString:!t.required});break;case"lowercase":["text","textarea","email","string"].includes(e)&&(a=a.strict().lowercase());break;case"uppercase":["text","textarea","email","string"].includes(e)&&(a=a.strict().uppercase());break;case"positive":St(e)&&(a=a.positive());break;case"negative":St(e)&&(a=a.negative());break;default:a=a.nullable()}}),a},Ws=Or;var sh=Object.defineProperty,ih=Object.defineProperties,lh=Object.getOwnPropertyDescriptors,zs=Object.getOwnPropertySymbols,ch=Object.prototype.hasOwnProperty,uh=Object.prototype.propertyIsEnumerable,Us=(e,t,n)=>t in e?sh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hs=(e,t)=>{for(var n in t||(t={}))ch.call(t,n)&&Us(e,n,t[n]);if(zs)for(var n of zs(t))uh.call(t,n)&&Us(e,n,t[n]);return e},_s=(e,t)=>ih(e,lh(t));const dh={componentsDataStructure:{},contentTypeDataStructure:{},formErrors:{},initialData:{},modifiedData:null,shouldCheckErrors:!1,modifiedDZName:null},ph=(e,t)=>(0,Ht.default)(e,n=>{switch(t.type){case"ADD_NON_REPEATABLE_COMPONENT_TO_FIELD":{ne()(n,["modifiedData",...t.keys],e.componentsDataStructure[t.componentUid]);break}case"ADD_REPEATABLE_COMPONENT_TO_FIELD":{let a=R()(e,["modifiedData",...t.keys],[]).slice();const s=_s(Hs({},e.componentsDataStructure[t.componentUid]),{__temp_key__:Mo(a)+1});Array.isArray(a)?a.push(s):a=[s],ne()(n,["modifiedData",...t.keys],a),t.shouldCheckErrors&&(n.shouldCheckErrors=!e.shouldCheckErrors);break}case"ADD_COMPONENT_TO_DYNAMIC_ZONE":{n.modifiedDZName=t.keys[0],t.shouldCheckErrors&&(n.shouldCheckErrors=!e.shouldCheckErrors);const a=_s(Hs({},e.componentsDataStructure[t.componentUid]),{__component:t.componentUid}),s=R()(e,["modifiedData",...t.keys],null),i=s?[...s,a]:[a];ne()(n,["modifiedData",...t.keys],i);break}case"ADD_RELATION":{if(!Array.isArray(t.value)||!t.value.length)break;const a=t.value[0].value,s=R()(e,["modifiedData",...t.keys],null);if(!s){ne()(n,["modifiedData",...t.keys],[a]);break}ne()(n,["modifiedData",...t.keys],[...s,a]);break}case"INIT_FORM":{n.formErrors={},n.initialData=t.initialValues,n.modifiedData=t.initialValues,n.modifiedDZName=null,n.shouldCheckErrors=!1;break}case"MOVE_COMPONENT_FIELD":{const a=R()(e,["modifiedData",...t.pathToComponent]),s=R()(e,["modifiedData",...t.pathToComponent,t.dragIndex]),i=Cr(a,t.dragIndex,t.hoverIndex,s);ne()(n,["modifiedData",...t.pathToComponent],i);break}case"MOVE_COMPONENT_UP":case"MOVE_COMPONENT_DOWN":{const{currentIndex:a,dynamicZoneName:s,shouldCheckErrors:i}=t;i&&(n.shouldCheckErrors=!e.shouldCheckErrors);const l=e.modifiedData[s],u=t.type==="MOVE_COMPONENT_UP"?a-1:a+1,c=e.modifiedData[s][a],d=Cr(l,a,u,c);ne()(n,["modifiedData",t.dynamicZoneName],d);break}case"MOVE_FIELD":{const a=R()(e,["modifiedData",...t.keys],[]).slice(),s=R()(e,["modifiedData",...t.keys,t.dragIndex]),i=Cr(a,t.dragIndex,t.overIndex,s);ne()(n,["modifiedData",...t.keys],i);break}case"ON_CHANGE":{const[a]=t.keys;if(t.shouldSetInitialValue&&ne()(n,["initialData",...t.keys],t.value),t.keys.length===2&&R()(e,["modifiedData",a])===null){ne()(n,["modifiedData",a],{[t.keys[1]]:t.value});break}ne()(n,["modifiedData",...t.keys],t.value);break}case"REMOVE_COMPONENT_FROM_DYNAMIC_ZONE":{t.shouldCheckErrors&&(n.shouldCheckErrors=!e.shouldCheckErrors),n.modifiedData[t.dynamicZoneName].splice(t.index,1);break}case"REMOVE_COMPONENT_FROM_FIELD":{const a=["modifiedData",...t.keys];ne()(n,a,null);break}case"REMOVE_PASSWORD_FIELD":{Uy()(n,["modifiedData",...t.keys]);break}case"REMOVE_REPEATABLE_FIELD":{const a=t.keys.length-1,s=["modifiedData",...Yt()(t.keys,a)];Object.keys(e.formErrors).length>0&&(n.shouldCheckErrors=!e.shouldCheckErrors);const l=R()(e,s).slice();l.splice(parseInt(t.keys[a],10),1),ne()(n,s,l);break}case"REMOVE_RELATION":{const a=t.keys.split("."),s=a.length-1,i=["modifiedData",...Yt()(a,s)],l=R()(e,i).slice(),u=parseInt(a[s],10);l.splice(u,1),ne()(n,i,l);break}case"SET_DEFAULT_DATA_STRUCTURES":{n.componentsDataStructure=t.componentsDataStructure,n.contentTypeDataStructure=t.contentTypeDataStructure;break}case"SET_FORM_ERRORS":{n.modifiedDZName=null,n.formErrors=t.errors;break}case"TRIGGER_FORM_VALIDATION":{Object.keys(e.formErrors).length>0&&(n.shouldCheckErrors=!e.shouldCheckErrors);break}default:return n}});function Zs(e){return e.response.data.error.details.errors.reduce((a,s)=>(a[s.path.join(".")]={id:v(`apiError.${s.message}`),defaultMessage:s.message,values:{field:s.path[s.path.length-1]}},a),{})}var mh=Object.defineProperty,Gs=Object.getOwnPropertySymbols,fh=Object.prototype.hasOwnProperty,gh=Object.prototype.propertyIsEnumerable,Qs=(e,t,n)=>t in e?mh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,on=(e,t)=>{for(var n in t||(t={}))fh.call(t,n)&&Qs(e,n,t[n]);if(Gs)for(var n of Gs(t))gh.call(t,n)&&Qs(e,n,t[n]);return e},Pr=(e,t,n)=>new Promise((a,s)=>{var i=c=>{try{u(n.next(c))}catch(d){s(d)}},l=c=>{try{u(n.throw(c))}catch(d){s(d)}},u=c=>c.done?a(c.value):Promise.resolve(c.value).then(i,l);u((n=n.apply(e,t)).next())});const Rr=({allLayoutData:e,allowedActions:{canRead:t,canUpdate:n},children:a,componentsDataStructure:s,contentTypeDataStructure:i,createActionAllowedFields:l,from:u,initialValues:c,isCreatingEntry:d,isLoadingForData:m,isSingleType:f,onPost:y,onPublish:h,onPut:b,onUnpublish:E,readActionAllowedFields:O,redirectToPreviousPage:I,slug:C,status:x,updateActionAllowedFields:D})=>{const[W,F]=(0,r.useReducer)(ph,dh),{formErrors:$,initialData:N,modifiedData:G,modifiedDZName:V,shouldCheckErrors:_}=W,k=(0,g.useNotification)(),{lockApp:Z,unlockApp:B}=(0,g.useOverlayBlocker)(),Y=R()(e,["contentType"],{}),T=(0,r.useMemo)(()=>R()(Y,["options","draftAndPublish"],!1),[Y]),z=(0,r.useMemo)(()=>T&&!N.publishedAt,[T,N.publishedAt]),{trackUsage:Q}=(0,g.useTracking)(),{formatMessage:K}=(0,A.useIntl)(),P=(0,r.useRef)(Q),M=(0,r.useMemo)(()=>m||d?!1:t===!1&&n===!1,[m,d,t,n]);(0,r.useEffect)(()=>{x==="resolved"?B():Z()},[Z,B,x]),(0,r.useEffect)(()=>{m||st()},[_]),(0,r.useEffect)(()=>{const ee=Object.keys($);if(ee.length>0){const J=ee[0],ie=document.getElementById(J);ie&&ie.focus()}},[$]),(0,r.useEffect)(()=>{M&&k({type:"info",message:{id:v("permissions.not-allowed.update")}})},[M,k]),(0,r.useEffect)(()=>{F({type:"SET_DEFAULT_DATA_STRUCTURES",componentsDataStructure:s,contentTypeDataStructure:i})},[s,i]),(0,r.useEffect)(()=>{c&&F({type:"INIT_FORM",initialValues:c})},[c]);const H=(0,r.useCallback)((ee,J,ie=!1)=>{P.current("didAddComponentToDynamicZone"),F({type:"ADD_COMPONENT_TO_DYNAMIC_ZONE",keys:ee.split("."),componentUid:J,shouldCheckErrors:ie})},[]),re=(0,r.useCallback)((ee,J)=>{F({type:"ADD_NON_REPEATABLE_COMPONENT_TO_FIELD",keys:ee.split("."),componentUid:J})},[]),ce=(0,r.useCallback)(({target:{name:ee,value:J}})=>{F({type:"ADD_RELATION",keys:ee.split("."),value:J})},[]),me=(0,r.useCallback)((ee,J,ie=!1)=>{F({type:"ADD_REPEATABLE_COMPONENT_TO_FIELD",keys:ee.split("."),componentUid:J,shouldCheckErrors:ie})},[]),Fe=(0,r.useMemo)(()=>{const ee={isCreatingEntry:d,isDraft:z,isFromComponent:!1};return Ws(Y,{components:e.components||{}},ee)},[e.components,Y,d,z]),st=(0,r.useCallback)((...ee)=>Pr(void 0,[...ee],function*(J={}){let ie={};const Ve=Ue()(G);Re()(Ve)||ne()(Ve,J.path,J.value);try{yield Fe.validate(Ve,{abortEarly:!1})}catch(Ct){ie=(0,g.getYupInnerErrors)(Ct),V&&(ie=Object.keys(ie).reduce((Cc,ao)=>(ao.split(".")[0]!==V&&(Cc[ao]=ie[ao]),Cc),{}))}F({type:"SET_FORM_ERRORS",errors:ie})}),[V,G,Fe]),U=(0,r.useCallback)(({target:{name:ee,value:J,type:ie}},Ve=!1)=>{let Ct=J;if(ie==="date"&&J===""&&(Ct=null),ie==="password"&&!J){F({type:"REMOVE_PASSWORD_FIELD",keys:ee.split(".")});return}ie==="select-one"&&J===""&&(Ct=null),ie==="number"&&J===""&&(Ct=null),F({type:"ON_CHANGE",keys:ee.split("."),value:Ct,shouldSetInitialValue:Ve})},[]),de=(0,r.useCallback)(ee=>{const J=pu(Ue()(ee),"__temp_key__");return Zy(J,Y,e.components)},[e.components,Y]),Be=(0,r.useMemo)(()=>T?z?{status:"draft"}:{}:{},[T,z]),Je=(0,r.useCallback)(ee=>Pr(void 0,null,function*(){ee.preventDefault();let J={};try{yield Fe.validate(G,{abortEarly:!1})}catch(ie){J=(0,g.getYupInnerErrors)(ie)}try{if(Re()(J)){const ie=de(G);d?yield y(ie,Be):yield b(ie,Be)}}catch(ie){J=on(on({},J),Zs(ie))}F({type:"SET_FORM_ERRORS",errors:J})}),[de,d,G,y,b,Be,Fe]),vt=(0,r.useCallback)(()=>Pr(void 0,null,function*(){const ee=Ws(Y,{components:R()(e,"components",{})},{isCreatingEntry:d,isDraft:!1,isFromComponent:!1});let J={};try{yield ee.validate(G,{abortEarly:!1})}catch(ie){J=(0,g.getYupInnerErrors)(ie)}try{Re()(J)&&(yield h())}catch(ie){J=on(on({},J),Zs(ie))}F({type:"SET_FORM_ERRORS",errors:J})}),[e,Y,d,G,h]),Ge=(0,r.useCallback)(ee=>{const J=Object.keys($).some(Ve=>Ve.split(".")[0]===ee);return!Re()($)&&J},[$]),eo=(0,r.useCallback)((ee,J)=>{P.current("changeComponentsOrder"),F({type:"MOVE_COMPONENT_DOWN",dynamicZoneName:ee,currentIndex:J,shouldCheckErrors:Ge(ee)})},[Ge]),to=(0,r.useCallback)((ee,J)=>{P.current("changeComponentsOrder"),F({type:"MOVE_COMPONENT_UP",dynamicZoneName:ee,currentIndex:J,shouldCheckErrors:Ge(ee)})},[Ge]),no=(0,r.useCallback)((ee,J,ie)=>{F({type:"MOVE_COMPONENT_FIELD",pathToComponent:ee,dragIndex:J,hoverIndex:ie})},[]),ro=(0,r.useCallback)((ee,J,ie)=>{F({type:"MOVE_FIELD",dragIndex:ee,overIndex:J,keys:ie.split(".")})},[]),Ce=(0,r.useCallback)(ee=>{F({type:"REMOVE_RELATION",keys:ee})},[]),Ne=(0,r.useCallback)((ee,J)=>{P.current("removeComponentFromDynamicZone"),F({type:"REMOVE_COMPONENT_FROM_DYNAMIC_ZONE",dynamicZoneName:ee,index:J,shouldCheckErrors:Ge(ee)})},[Ge]),Xe=(0,r.useCallback)((ee,J)=>{F({type:"REMOVE_COMPONENT_FROM_FIELD",keys:ee.split("."),componentUid:J})},[]),oo=(0,r.useCallback)((ee,J)=>{F({type:"REMOVE_REPEATABLE_FIELD",keys:ee.split("."),componentUid:J})},[]),et=(0,r.useCallback)(()=>{F({type:"TRIGGER_FORM_VALIDATION"})},[]);return M?r.createElement(te.Redirect,{to:u}):G?r.createElement(g.ContentManagerEditViewDataManagerContext.Provider,{value:{addComponentToDynamicZone:H,addNonRepeatableComponentToField:re,addRelation:ce,addRepeatableComponentToField:me,allLayoutData:e,checkFormErrors:st,createActionAllowedFields:l,formErrors:$,hasDraftAndPublish:T,initialData:N,isCreatingEntry:d,isSingleType:f,shouldNotRunValidations:z,status:x,layout:Y,modifiedData:G,moveComponentDown:eo,moveComponentField:no,moveComponentUp:to,moveRelation:ro,onChange:U,onPublish:vt,onUnpublish:E,onRemoveRelation:Ce,readActionAllowedFields:O,redirectToPreviousPage:I,removeComponentFromDynamicZone:Ne,removeComponentFromField:Xe,removeRepeatableField:oo,slug:C,triggerFormValidation:et,updateActionAllowedFields:D}},r.createElement(r.Fragment,null,m||!d&&!N.id?r.createElement(oe.Main,{"aria-busy":"true"},r.createElement(g.LoadingIndicatorPage,null)):r.createElement(r.Fragment,null,r.createElement(te.Prompt,{when:!rn()(G,N),message:K({id:"global.prompt.unsaved"})}),r.createElement("form",{noValidate:!0,onSubmit:Je},a)))):null};Rr.defaultProps={from:"/",initialValues:null,redirectToPreviousPage:()=>{}},Rr.propTypes={allLayoutData:o().object.isRequired,allowedActions:o().object.isRequired,children:o().node.isRequired,componentsDataStructure:o().object.isRequired,contentTypeDataStructure:o().object.isRequired,createActionAllowedFields:o().array.isRequired,from:o().string,initialValues:o().object,isCreatingEntry:o().bool.isRequired,isLoadingForData:o().bool.isRequired,isSingleType:o().bool.isRequired,onPost:o().func.isRequired,onPublish:o().func.isRequired,onPut:o().func.isRequired,onUnpublish:o().func.isRequired,readActionAllowedFields:o().array.isRequired,redirectToPreviousPage:o().func,slug:o().string.isRequired,status:o().string.isRequired,updateActionAllowedFields:o().array.isRequired};const yh=Rr,gt=e=>ve(`single-types/${e}`),hh=e=>Object.values(e||{}).reduce((t,n)=>Object.assign(t,n),{});var bh=Object.defineProperty,an=Object.getOwnPropertySymbols,Ks=Object.prototype.hasOwnProperty,Ys=Object.prototype.propertyIsEnumerable,Js=(e,t,n)=>t in e?bh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xs=(e,t)=>{for(var n in t||(t={}))Ks.call(t,n)&&Js(e,n,t[n]);if(an)for(var n of an(t))Ys.call(t,n)&&Js(e,n,t[n]);return e},Eh=(e,t)=>{var n={};for(var a in e)Ks.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&an)for(var a of an(e))t.indexOf(a)<0&&Ys.call(e,a)&&(n[a]=e[a]);return n};const ei=(e={})=>{const t=Xs(Xs({},e),hh(e.plugins)),{plugins:n}=t,a=Eh(t,["plugins"]);return`?${(0,We.stringify)(a,{encode:!1})}`};var vh=Object.defineProperty,ti=Object.getOwnPropertySymbols,Ch=Object.prototype.hasOwnProperty,Oh=Object.prototype.propertyIsEnumerable,ni=(e,t,n)=>t in e?vh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ph=(e,t)=>{for(var n in t||(t={}))Ch.call(t,n)&&ni(e,n,t[n]);if(ti)for(var n of ti(t))Oh.call(t,n)&&ni(e,n,t[n]);return e},yt=(e,t,n)=>new Promise((a,s)=>{var i=c=>{try{u(n.next(c))}catch(d){s(d)}},l=c=>{try{u(n.throw(c))}catch(d){s(d)}},u=c=>c.done?a(c.value):Promise.resolve(c.value).then(i,l);u((n=n.apply(e,t)).next())});const ri=({allLayoutData:e,children:t,slug:n})=>{const{trackUsage:a}=(0,g.useTracking)(),{push:s}=(0,te.useHistory)(),{setCurrentStep:i}=(0,g.useGuidedTour)(),l=(0,r.useRef)(a),[u,c]=(0,r.useState)(!0),[{query:d,rawQuery:m}]=(0,g.useQueryParams)(),f=ei(d),y=(0,g.useNotification)(),h=(0,fe.I0)(),{componentsDataStructure:b,contentTypeDataStructure:E,data:O,isLoading:I,status:C}=(0,fe.v9)(As),x=(0,r.useCallback)(_=>{const k=So(_,e.contentType,e.components);return(0,g.formatContentTypeData)(k,e.contentType,e.components)},[e]);(0,r.useEffect)(()=>()=>{h(Fs())},[h]),(0,r.useEffect)(()=>{const _=Object.keys(e.components).reduce((B,Y)=>{const T=qt(R()(e,["components",Y,"attributes"],{}),e.components);return B[Y]=(0,g.formatContentTypeData)(T,e.components[Y],e.components),B},{}),k=qt(e.contentType.attributes,e.components),Z=(0,g.formatContentTypeData)(k,e.contentType,e.components);h(ks(_,Z))},[e,h]),(0,r.useEffect)(()=>{const k=Se().CancelToken.source();return(B=>yt(void 0,null,function*(){h(nn()),c(!0);try{const{data:Y}=yield(0,ge.be)(gt(`${n}${f}`),{cancelToken:B.token});h(br(x(Y))),c(!1)}catch(Y){if(Se().isCancel(Y))return;const T=R()(Y,"response.status",null);T===404&&h(Er(m,!0)),T===403&&(y({type:"info",message:{id:v("permissions.not-allowed.update")}}),s("/"))}}))(k),()=>k.cancel("Operation canceled by the user.")},[x,s,n,h,f,m,y]);const D=(0,r.useCallback)(_=>{const k=_.response.data;let Z=R()(k,["error","message"],"Bad Request");Array.isArray(Z)&&(Z=R()(Z,["0","messages","0","id"])),typeof Z=="string"&&y({type:"warning",message:Z})},[y]),W=(0,r.useCallback)(_=>yt(void 0,null,function*(){try{l.current("willDeleteEntry",_);const{data:k}=yield ge.be.delete(gt(`${n}${f}`));return y({type:"success",message:{id:v("success.record.delete")}}),l.current("didDeleteEntry",_),Promise.resolve(k)}catch(k){return l.current("didNotDeleteEntry",Ph({error:k},_)),D(k),Promise.reject(k)}}),[n,D,y,f]),F=(0,r.useCallback)(()=>{c(!0),h(Er(m,!0))},[h,m]),$=(0,r.useCallback)((_,k)=>yt(void 0,null,function*(){const Z=gt(`${n}${m}`);try{h(he("submit-pending"));const{data:B}=yield ge.be.put(Z,_);return l.current("didCreateEntry",k),y({type:"success",message:{id:v("success.record.save")}}),i("contentManager.success"),h(Ke(x(B))),c(!1),h(he("resolved")),Promise.resolve(B)}catch(B){return l.current("didNotCreateEntry",{error:B,trackerProperty:k}),D(B),h(he("resolved")),Promise.reject(B)}}),[x,D,n,h,m,y,i]),N=(0,r.useCallback)(()=>yt(void 0,null,function*(){try{l.current("willPublishEntry");const _=gt(`${n}/actions/publish${f}`);h(he("publish-pending"));const{data:k}=yield ge.be.post(_);return l.current("didPublishEntry"),y({type:"success",message:{id:v("success.record.publish")}}),h(Ke(x(k))),h(he("resolved")),Promise.resolve(k)}catch(_){return D(_),h(he("resolved")),Promise.reject(_)}}),[x,D,n,f,h,y]),G=(0,r.useCallback)((_,k)=>yt(void 0,null,function*(){const Z=gt(`${n}${m}`);try{l.current("willEditEntry",k),h(he("submit-pending"));const{data:B}=yield ge.be.put(Z,_);return y({type:"success",message:{id:v("success.record.save")}}),l.current("didEditEntry",{trackerProperty:k}),h(Ke(x(B))),h(he("resolved")),Promise.resolve(B)}catch(B){return D(B),l.current("didNotEditEntry",{error:B,trackerProperty:k}),h(he("resolved")),Promise.reject(B)}}),[x,D,n,h,m,y]),V=(0,r.useCallback)(()=>yt(void 0,null,function*(){const _=gt(`${n}/actions/unpublish${f}`);h(he("unpublish-pending"));try{l.current("willUnpublishEntry");const{data:k}=yield ge.be.post(_);l.current("didUnpublishEntry"),y({type:"success",message:{id:v("success.record.unpublish")}}),h(Ke(x(k))),h(he("resolved"))}catch(k){h(he("resolved")),D(k)}}),[x,y,D,n,h,f]);return t({componentsDataStructure:b,contentTypeDataStructure:E,data:O,isCreatingEntry:u,isLoadingForData:I,onDelete:W,onDeleteSucceeded:F,onPost:$,onPublish:N,onPut:G,onUnpublish:V,redirectionLink:"/",status:C})};ri.propTypes={allLayoutData:o().shape({components:o().object.isRequired,contentType:o().object.isRequired}).isRequired,children:o().func.isRequired,slug:o().string.isRequired};const Rh=(0,r.memo)(ri);var Mh=p(57235),Th=p.n(Mh),wh=Object.defineProperty,oi=Object.getOwnPropertySymbols,Ih=Object.prototype.hasOwnProperty,Dh=Object.prototype.propertyIsEnumerable,ai=(e,t,n)=>t in e?wh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,si=(e,t)=>{for(var n in t||(t={}))Ih.call(t,n)&&ai(e,n,t[n]);if(oi)for(var n of oi(t))Dh.call(t,n)&&ai(e,n,t[n]);return e};function xh(e,t){return function(n){const a=t();return r.createElement(e,si(si({},n),a))}}const Sh=xh;function Lh(){const{initialData:e,hasDraftAndPublish:t}=(0,g.useCMEditViewDataManager)(),n=e.publishedAt!==void 0&&e.publishedAt!==null;return{hasDraftAndPublish:t,isPublished:n}}const Fh=Lh;var kh=Object.defineProperty,ii=Object.getOwnPropertySymbols,Ah=Object.prototype.hasOwnProperty,jh=Object.prototype.propertyIsEnumerable,li=(e,t,n)=>t in e?kh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$h=(e,t)=>{for(var n in t||(t={}))Ah.call(t,n)&&li(e,n,t[n]);if(ii)for(var n of ii(t))jh.call(t,n)&&li(e,n,t[n]);return e};const Bh=(0,S.default)(Th())`
  width: ${(0,g.pxToRem)(6)};
  height: ${(0,g.pxToRem)(6)};
  * {
    fill: ${({theme:e,$bulletColor:t})=>e.colors[t]};
  }
`,ci=({hasDraftAndPublish:e,isPublished:t})=>{const{formatMessage:n}=(0,A.useIntl)();if(!e)return null;const a={draft:{textColor:"secondary700",bulletColor:"secondary600",box:{background:"secondary100",borderColor:"secondary200"}},published:{textColor:"success700",bulletColor:"success600",box:{background:"success100",borderColor:"success200"}}},s=t?a.published:a.draft;return r.createElement(w.Box,$h({hasRadius:!0,as:"aside",paddingTop:4,paddingBottom:4,paddingLeft:5,paddingRight:5},s.box),r.createElement(w.Box,{as:j.Flex},r.createElement(Bh,{$bulletColor:s.bulletColor}),r.createElement(w.Box,{paddingLeft:3},r.createElement(L.Typography,{textColor:s.textColor},n({id:v("containers.Edit.information.editing"),defaultMessage:"Editing"}),"\xA0"),r.createElement(L.Typography,{fontWeight:"bold",textColor:s.textColor},t&&n({id:v("containers.Edit.information.publishedVersion"),defaultMessage:"published version"}),!t&&n({id:v("containers.Edit.information.draftVersion"),defaultMessage:"draft version"})))))};ci.propTypes={hasDraftAndPublish:o().bool.isRequired,isPublished:o().bool.isRequired};const Nh=Sh(ci,Fh),Mr=60*1e3,Tr=Mr*60,sn=Tr*24,ui=sn*30,di=sn*365,Vh=e=>e<Mr?{unit:"second",value:-Math.round(e/1e3)}:e<Tr?{unit:"minute",value:-Math.round(e/Mr)}:e<sn?{unit:"hour",value:-Math.round(e/Tr)}:e<ui?{unit:"day",value:-Math.round(e/sn)}:e<di?{unit:"month",value:-Math.round(e/ui)}:{unit:"year",value:-Math.round(e/di)};var pi=p(81430);const qh=()=>{const{formatMessage:e,formatRelativeTime:t}=(0,A.useIntl)(),{initialData:n,isCreatingEntry:a}=(0,g.useCMEditViewDataManager)(),s=(0,r.useRef)(Date.now()),i=(c,d)=>{var m,f,y;const h=((m=n[d])==null?void 0:m.firstname)||"",b=((f=n[d])==null?void 0:f.lastname)||"",O=((y=n[d])==null?void 0:y.username)||(0,pi.Pp)(h,b),C=(n[c]?new Date(n[c]).getTime():Date.now())-s.current,{unit:x,value:D}=Vh(-C);return{at:t(D,x,{numeric:"auto"}),by:a?"-":O}},l=i("updatedAt","updatedBy"),u=i("createdAt","createdBy");return r.createElement(w.Box,null,r.createElement(L.Typography,{variant:"sigma",textColor:"neutral600",id:"additional-informations"},e({id:v("containers.Edit.information"),defaultMessage:"Information"})),r.createElement(w.Box,{paddingTop:2,paddingBottom:6},r.createElement(Gt.Divider,null)),r.createElement(ae.Stack,{spacing:4},r.createElement(j.Flex,{justifyContent:"space-between"},r.createElement(L.Typography,{fontWeight:"bold"},e({id:v("containers.Edit.information.created"),defaultMessage:"Created"})),r.createElement(L.Typography,null,u.at)),r.createElement(j.Flex,{justifyContent:"space-between"},r.createElement(L.Typography,{fontWeight:"bold"},e({id:v("containers.Edit.information.by"),defaultMessage:"By"})),r.createElement(L.Typography,null,u.by)),r.createElement(j.Flex,{justifyContent:"space-between"},r.createElement(L.Typography,{fontWeight:"bold"},e({id:v("containers.Edit.information.lastUpdate"),defaultMessage:"Last update"})),r.createElement(L.Typography,null,l.at)),r.createElement(j.Flex,{justifyContent:"space-between"},r.createElement(L.Typography,{fontWeight:"bold"},e({id:v("containers.Edit.information.by"),defaultMessage:"By"})),r.createElement(L.Typography,null,l.by))))};var Wh=p(98599),ln=p.n(Wh),ke=p(49137),zh=p(88677),ht=p.n(zh),Uh=Object.defineProperty,mi=Object.getOwnPropertySymbols,Hh=Object.prototype.hasOwnProperty,_h=Object.prototype.propertyIsEnumerable,fi=(e,t,n)=>t in e?Uh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gi=(e,t)=>{for(var n in t||(t={}))Hh.call(t,n)&&fi(e,n,t[n]);if(mi)for(var n of mi(t))_h.call(t,n)&&fi(e,n,t[n]);return e};function Zh(e,t){return function(n){const a=t();return r.createElement(e,gi(gi({},n),a))}}const Gh=Zh,Qh=(e,t,n)=>{const a=(i,l)=>Object.keys(i).reduce((u,c)=>{const d=(0,q.get)(l,["attributes",c,"type"],"string"),m=(0,q.get)(l,["attributes",c,"relationType"],""),f=m.toLowerCase().includes("morph"),y=["oneWay","oneToOne","manyToOne"],h=i[c];if((0,q.isNil)(h))return u;if(d==="dynamiczone"&&h.forEach(b=>{const E=(0,q.get)(n,b.__component,{});u+=a(b,E)}),d==="component"){const b=(0,q.get)(l,["attributes",c,"repeatable"],!1),E=(0,q.get)(l,["attributes",c,"component"],""),O=(0,q.get)(n,E,{});b?h.forEach(I=>{u+=a(I,O)}):u+=a(h,O)}return d==="relation"&&!f&&(y.includes(m)?(0,q.has)(h,"publishedAt")&&(0,q.isEmpty)(h.publishedAt)&&(u+=1):h.forEach(b=>{(0,q.has)(b,"publishedAt")&&(0,q.isEmpty)(b.publishedAt)&&(u+=1)})),u},0);return a(e,t,n)};function Kh(){const{allLayoutData:e,initialData:t,isCreatingEntry:n,isSingleType:a,status:s,layout:i,hasDraftAndPublish:l,modifiedData:u,onPublish:c,onUnpublish:d}=(0,g.useCMEditViewDataManager)();return{componentLayouts:e.components,initialData:t,isCreatingEntry:n,isSingleType:a,status:s,layout:i,hasDraftAndPublish:l,modifiedData:u,onPublish:c,onUnpublish:d}}const Yh=Kh,yi=({allowedActions:{canUpdate:e,canCreate:t,canPublish:n},componentLayouts:a,initialData:s,isCreatingEntry:i,isSingleType:l,hasDraftAndPublish:u,layout:c,modifiedData:d,onPublish:m,onUnpublish:f,status:y})=>{const{goBack:h}=(0,te.useHistory)(),[b,E]=(0,r.useState)(!1),[O,I]=(0,r.useState)(!1),{formatMessage:C}=(0,A.useIntl)(),x=(0,r.useRef)(0),D=R()(c,["settings","mainField"],"id"),W=R()(c,["info","displayName"],"NOT FOUND"),F=!rn()(s,d)||i&&!Re()(d);let N=C({id:v("containers.Edit.pluginHeader.title.new"),defaultMessage:"Create an entry"});!i&&!l&&(N=s[D]||W),l&&(N=W);const G=()=>{const T=Qh(d,c,a);return x.current=T,T};let V=null;if(i&&t&&(V=r.createElement(ae.Stack,{horizontal:!0,spacing:2},u&&r.createElement(ye.Button,{disabled:!0,startIcon:r.createElement(ht(),null),variant:"secondary"},C({id:"app.utils.publish",defaultMessage:"Publish"})),r.createElement(ye.Button,{disabled:!F,isLoading:y==="submit-pending",type:"submit"},C({id:v("containers.Edit.submit"),defaultMessage:"Save"})))),!i&&e){const T=u&&n,z=!Re()(s.publishedAt),Q=z?y==="unpublish-pending":y==="publish-pending",K=z?{id:"app.utils.unpublish",defaultMessage:"Unpublish"}:{id:"app.utils.publish",defaultMessage:"Publish"},P=z?()=>E(!0):()=>{G()===0?m():I(!0)};V=r.createElement(j.Flex,null,T&&r.createElement(ye.Button,{disabled:F,loading:Q,onClick:P,startIcon:r.createElement(ht(),null),variant:"secondary"},C(K)),r.createElement(w.Box,{paddingLeft:T?2:0},r.createElement(ye.Button,{disabled:!F,loading:y==="submit-pending",type:"submit"},C({id:v("containers.Edit.submit"),defaultMessage:"Save"}))))}const _=()=>E(T=>!T),k=()=>I(T=>!T),Z=()=>{k(),x.current=0,m()},B=()=>{_(),f()},Y=`${C({id:v("api.id"),defaultMessage:"API ID "})} : ${c.apiID}`;return r.createElement(r.Fragment,null,r.createElement(X.HeaderLayout,{title:N.toString(),primaryAction:V,subtitle:Y,navigationAction:r.createElement(g.Link,{startIcon:r.createElement(ln(),null),onClick:T=>{T.preventDefault(),h()},to:"/"},C({id:"global.back",defaultMessage:"Back"}))}),b&&r.createElement(ke.Dialog,{onClose:_,title:"Confirmation",labelledBy:"confirmation",describedBy:"confirm-description",isOpen:b},r.createElement(ke.DialogBody,{icon:r.createElement(xt(),null)},r.createElement(ae.Stack,{spacing:2},r.createElement(j.Flex,{justifyContent:"center",style:{textAlign:"center"}},r.createElement(L.Typography,{id:"confirm-description"},C({id:v("popUpWarning.warning.unpublish"),defaultMessage:"Unpublish this content will automatically change it to a draft."},{br:()=>r.createElement("br",null)}))),r.createElement(j.Flex,{justifyContent:"center",style:{textAlign:"center"}},r.createElement(L.Typography,{id:"confirm-description"},C({id:v("popUpWarning.warning.unpublish-question"),defaultMessage:"Are you sure you want to unpublish it?"}))))),r.createElement(ke.DialogFooter,{startAction:r.createElement(ye.Button,{onClick:_,variant:"tertiary"},C({id:"components.popUpWarning.button.cancel",defaultMessage:"No, cancel"})),endAction:r.createElement(ye.Button,{variant:"danger-light",onClick:B},C({id:"components.popUpWarning.button.confirm",defaultMessage:"Yes, confirm"}))})),O&&r.createElement(ke.Dialog,{onClose:k,title:"Confirmation",labelledBy:"confirmation",describedBy:"confirm-description",isOpen:O},r.createElement(ke.DialogBody,{icon:r.createElement(xt(),null)},r.createElement(ae.Stack,{spacing:2},r.createElement(j.Flex,{justifyContent:"center",style:{textAlign:"center"}},r.createElement(L.Typography,{id:"confirm-description"},x.current,C({id:v("popUpwarning.warning.has-draft-relations.message"),defaultMessage:"<b>{count, plural, =0 { of your content relations is} one { of your content relations is} other { of your content relations are}}</b> not published yet.<br></br>It might engender broken links and errors on your project."},{br:()=>r.createElement("br",null),b:T=>r.createElement(L.Typography,{fontWeight:"bold"},T),count:x.current}))),r.createElement(j.Flex,{justifyContent:"center",style:{textAlign:"center"}},r.createElement(L.Typography,{id:"confirm-description"},C({id:v("popUpWarning.warning.publish-question"),defaultMessage:"Do you still want to publish it?"}))))),r.createElement(ke.DialogFooter,{startAction:r.createElement(ye.Button,{onClick:k,variant:"tertiary"},C({id:"components.popUpWarning.button.cancel",defaultMessage:"No, cancel"})),endAction:r.createElement(ye.Button,{variant:"success",onClick:Z},C({id:v("popUpwarning.warning.has-draft-relations.button-confirm"),defaultMessage:"Yes, publish"}))})))};yi.propTypes={allowedActions:o().shape({canUpdate:o().bool.isRequired,canCreate:o().bool.isRequired,canPublish:o().bool.isRequired}).isRequired,componentLayouts:o().object.isRequired,initialData:o().object.isRequired,isCreatingEntry:o().bool.isRequired,isSingleType:o().bool.isRequired,status:o().string.isRequired,layout:o().object.isRequired,hasDraftAndPublish:o().bool.isRequired,modifiedData:o().object.isRequired,onPublish:o().func.isRequired,onUnpublish:o().func.isRequired};const Jh=(0,r.memo)(yi,He()),Xh=Gh(Jh,Yh),eb=(e,t)=>{const n=i=>(0,q.get)(t,[i,"type"],"");let a=0;const s=[];for(let i of e){const l=i.some(({name:u})=>n(u)==="dynamiczone");s[a]||(s[a]=[]),l?(a=a===0&&(0,q.isEmpty)(s[0])?0:a+1,s[a]||(s[a]=[]),s[a].push(i),a+=1):s[a].push(i)}return s.filter(i=>i.length>0)},tb=(e,t)=>{const n=a=>{const s=(0,g.findMatchingPermissions)(e,[{action:`plugin::content-manager.explorer.${a}`,subject:t}]);return(0,q.uniq)((0,q.flatMap)(s,"properties.fields"))};return{createActionAllowedFields:n("create"),readActionAllowedFields:n("read"),updateActionAllowedFields:n("update")}};var nb=Object.defineProperty,hi=Object.getOwnPropertySymbols,rb=Object.prototype.hasOwnProperty,ob=Object.prototype.propertyIsEnumerable,bi=(e,t,n)=>t in e?nb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ei=(e,t)=>{for(var n in t||(t={}))rb.call(t,n)&&bi(e,n,t[n]);if(hi)for(var n of hi(t))ob.call(t,n)&&bi(e,n,t[n]);return e};function ab(e,t){return function(n){const a=t();return r.createElement(e,Ei(Ei({},n),a))}}const sb=ab;function ib(){const{hasDraftAndPublish:e,modifiedData:t}=(0,g.useCMEditViewDataManager)();let n={};return e&&(n=(0,q.isEmpty)(t.publishedAt)?{status:"draft"}:{status:"published"}),{hasDraftAndPublish:e,trackerProperty:n}}const lb=ib;var cb=(e,t,n)=>new Promise((a,s)=>{var i=c=>{try{u(n.next(c))}catch(d){s(d)}},l=c=>{try{u(n.throw(c))}catch(d){s(d)}},u=c=>c.done?a(c.value):Promise.resolve(c.value).then(i,l);u((n=n.apply(e,t)).next())});const vi=({isCreatingEntry:e,onDelete:t,onDeleteSucceeded:n,trackerProperty:a})=>{const[s,i]=(0,r.useState)(!1),[l,u]=(0,r.useState)(!1),{formatMessage:c}=(0,A.useIntl)(),d=(0,g.useNotification)(),m=()=>i(y=>!y),f=()=>cb(void 0,null,function*(){try{u(!0),yield t(a),u(!1),m(),n()}catch(y){const h=R()(y,"response.payload.message",c({id:v("error.record.delete")}));u(!1),m(),d({type:"warning",message:h})}});return e?null:r.createElement(r.Fragment,null,r.createElement(ye.Button,{onClick:m,size:"S",startIcon:r.createElement(qe(),null),variant:"danger-light"},c({id:v("containers.Edit.delete-entry"),defaultMessage:"Delete this entry"})),r.createElement(g.ConfirmDialog,{isConfirmButtonLoading:l,isOpen:s,onConfirm:f,onToggleDialog:m}))};vi.propTypes={isCreatingEntry:o().bool.isRequired,onDelete:o().func.isRequired,onDeleteSucceeded:o().func.isRequired,trackerProperty:o().object.isRequired};const ub=(0,r.memo)(vi,He()),db=sb(ub,lb);var pb=Object.defineProperty,mb=Object.defineProperties,fb=Object.getOwnPropertyDescriptors,Ci=Object.getOwnPropertySymbols,gb=Object.prototype.hasOwnProperty,yb=Object.prototype.propertyIsEnumerable,Oi=(e,t,n)=>t in e?pb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Pi=(e,t)=>{for(var n in t||(t={}))gb.call(t,n)&&Oi(e,n,t[n]);if(Ci)for(var n of Ci(t))yb.call(t,n)&&Oi(e,n,t[n]);return e},hb=(e,t)=>mb(e,fb(t));const Ri=De.Z.contentManager,bb=[{action:"plugin::content-type-builder.read",subject:null}],wr=({allowedActions:e,isSingleType:t,goBack:n,layout:a,slug:s,id:i,origin:l,userPermissions:u})=>{const{trackUsage:c}=(0,g.useTracking)(),{formatMessage:d}=(0,A.useIntl)(),{createActionAllowedFields:m,readActionAllowedFields:f,updateActionAllowedFields:y}=(0,r.useMemo)(()=>tb(u,s),[u,s]),h=(0,r.useMemo)(()=>t?Ri.singleTypesConfigurations:Ri.collectionTypesConfigurations,[t]),b=`/content-manager/${t?"singleType":"collectionType"}/${s}/configurations/edit`,E=R()(a,["contentType"],{}),O=(0,r.useMemo)(()=>t?Rh:qy,[t]),I=(0,r.useCallback)(W=>W.every(F=>F.every($=>$.fieldSchema.type==="dynamiczone")),[]),C=(0,r.useMemo)(()=>E.layouts?eb(E.layouts.edit,E.attributes):[],[E]),x=E.layouts.editRelations,D=x.length;return r.createElement(O,{allLayoutData:a,slug:s,id:i,origin:l},({componentsDataStructure:W,contentTypeDataStructure:F,data:$,isCreatingEntry:N,isLoadingForData:G,onDelete:V,onDeleteSucceeded:_,onPost:k,onPublish:Z,onPut:B,onUnpublish:Y,redirectionLink:T,status:z})=>r.createElement(yh,{allowedActions:e,allLayoutData:a,createActionAllowedFields:m,componentsDataStructure:W,contentTypeDataStructure:F,from:T,initialValues:$,isCreatingEntry:N,isLoadingForData:G,isSingleType:t,onPost:k,onPublish:Z,onPut:B,onUnpublish:Y,readActionAllowedFields:f,redirectToPreviousPage:n,slug:s,status:z,updateActionAllowedFields:y},r.createElement(oe.Main,{"aria-busy":z!=="resolved"},r.createElement(Xh,{allowedActions:e}),r.createElement(X.ContentLayout,null,r.createElement(le.Grid,{gap:4},r.createElement(le.GridItem,{col:9,s:12},r.createElement(ae.Stack,{spacing:6},C.map((Q,K)=>{if(I(Q)){const{0:{0:{name:P,fieldSchema:M,metadatas:H,labelAction:re}}}=Q;return r.createElement(w.Box,{key:K},r.createElement(le.Grid,{gap:4},r.createElement(le.GridItem,{col:12,s:12,xs:12},r.createElement(Ay,{name:P,fieldSchema:M,labelAction:re,metadatas:H}))))}return r.createElement(w.Box,{key:K,hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingLeft:6,paddingRight:6,paddingTop:6,paddingBottom:6,borderColor:"neutral150"},r.createElement(ae.Stack,{spacing:6},Q.map((P,M)=>r.createElement(le.Grid,{gap:4,key:M},P.map(({fieldSchema:H,labelAction:re,metadatas:ce,name:me,size:Fe})=>{if(H.type==="component"){const{component:U,max:de,min:Be,repeatable:Je=!1,required:vt=!1}=H;return r.createElement(le.GridItem,{col:Fe,s:12,xs:12,key:U},r.createElement(tn,{componentUid:U,labelAction:re,isRepeatable:Je,intlLabel:{id:ce.label,defaultMessage:ce.label},max:de,min:Be,name:me,required:vt}))}return r.createElement(le.GridItem,{col:Fe,key:me,s:12,xs:12},r.createElement(ir,{fieldSchema:H,keys:me,labelAction:re,metadatas:ce}))})))))}))),r.createElement(le.GridItem,{col:3,s:12},r.createElement(ae.Stack,{spacing:2},r.createElement(Nh,null),r.createElement(w.Box,{as:"aside","aria-labelledby":"additional-informations",background:"neutral0",borderColor:"neutral150",hasRadius:!0,paddingBottom:4,paddingLeft:4,paddingRight:4,paddingTop:6,shadow:"tableShadow"},r.createElement(qh,null),r.createElement(Kt,{area:"contentManager.editView.informations"})),D>0&&r.createElement(w.Box,{as:"aside","aria-labelledby":"relations-title",background:"neutral0",borderColor:"neutral150",hasRadius:!0,paddingBottom:4,paddingLeft:4,paddingRight:4,paddingTop:6,shadow:"tableShadow"},r.createElement(L.Typography,{variant:"sigma",textColor:"neutral600",id:"relations-title"},d({id:v("containers.Edit.relations"),defaultMessage:"{number, plural, =0 {relations} one {relation} other {relations}}"},{number:D})),r.createElement(w.Box,{paddingTop:2,paddingBottom:6},r.createElement(Gt.Divider,null)),r.createElement(ae.Stack,{spacing:4},x.map(({name:Q,fieldSchema:K,labelAction:P,metadatas:M,queryInfos:H})=>r.createElement(rs,hb(Pi(Pi({},K),M),{key:Q,description:M.description,intlLabel:{id:M.label,defaultMessage:M.label},labelAction:P,name:Q,relationsType:K.relationType,queryInfos:H,placeholder:M.placeholder?{id:M.placeholder,defaultMessage:M.placeholder}:null}))))),r.createElement(w.Box,{as:"aside","aria-labelledby":"links"},r.createElement(ae.Stack,{spacing:2},r.createElement(Kt,{area:"contentManager.editView.right-links",slug:s}),s!=="strapi::administrator"&&r.createElement(g.CheckPermissions,{permissions:bb},r.createElement(g.LinkButton,{onClick:()=>{c("willEditEditLayout")},size:"S",startIcon:r.createElement(ct(),null),style:{width:"100%"},to:`/plugins/content-type-builder/content-types/${s}`,variant:"secondary"},d({id:v("link-to-ctb"),defaultMessage:"Edit the model"}))),r.createElement(g.CheckPermissions,{permissions:h},r.createElement(g.LinkButton,{size:"S",startIcon:r.createElement(Xu(),null),style:{width:"100%"},to:b,variant:"secondary"},d({id:"app.links.configure-view",defaultMessage:"Configure the view"}))),e.canDelete&&r.createElement(db,{isCreatingEntry:N,onDelete:V,onDeleteSucceeded:_}))))))))))};wr.defaultProps={id:null,isSingleType:!1,origin:null,userPermissions:[]},wr.propTypes={allowedActions:o().shape({canRead:o().bool.isRequired,canUpdate:o().bool.isRequired,canCreate:o().bool.isRequired,canDelete:o().bool.isRequired}).isRequired,layout:o().shape({components:o().object.isRequired,contentType:o().shape({uid:o().string.isRequired,settings:o().object.isRequired,metadatas:o().object.isRequired,options:o().object.isRequired,attributes:o().object.isRequired}).isRequired}).isRequired,id:o().string,isSingleType:o().bool,goBack:o().func.isRequired,origin:o().string,slug:o().string.isRequired,userPermissions:o().array};const Eb=(0,r.memo)(wr);var vb=Object.defineProperty,Cb=Object.defineProperties,Ob=Object.getOwnPropertyDescriptors,Mi=Object.getOwnPropertySymbols,Pb=Object.prototype.hasOwnProperty,Rb=Object.prototype.propertyIsEnumerable,Ti=(e,t,n)=>t in e?vb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mb=(e,t)=>{for(var n in t||(t={}))Pb.call(t,n)&&Ti(e,n,t[n]);if(Mi)for(var n of Mi(t))Rb.call(t,n)&&Ti(e,n,t[n]);return e},Tb=(e,t)=>Cb(e,Ob(t));const Ir=e=>{const t=(0,r.useMemo)(()=>Po(e.slug),[e.slug]),{isLoading:n,allowedActions:a}=(0,g.useRBAC)(t,e.userPermissions);return n?r.createElement(g.LoadingIndicatorPage,null):r.createElement(Eb,Tb(Mb({},e),{allowedActions:a}))};Ir.defaultProps={permissions:[]},Ir.propTypes={permissions:o().array,slug:o().string.isRequired,userPermissions:o().array.isRequired};const wb=(0,r.memo)(Ir,He());var Ib=Object.defineProperty,Db=Object.defineProperties,xb=Object.getOwnPropertyDescriptors,cn=Object.getOwnPropertySymbols,wi=Object.prototype.hasOwnProperty,Ii=Object.prototype.propertyIsEnumerable,Di=(e,t,n)=>t in e?Ib(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sb=(e,t)=>{for(var n in t||(t={}))wi.call(t,n)&&Di(e,n,t[n]);if(cn)for(var n of cn(t))Ii.call(t,n)&&Di(e,n,t[n]);return e},Lb=(e,t)=>Db(e,xb(t)),Fb=(e,t)=>{var n={};for(var a in e)wi.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&cn)for(var a of cn(e))t.indexOf(a)<0&&Ii.call(e,a)&&(n[a]=e[a]);return n};const xi=e=>{var t=e,{layout:n}=t,a=Fb(t,["layout"]);const s=(0,fe.v9)(mo),i=(0,fe.I0)(),[{query:l}]=(0,g.useQueryParams)(),{runHookWaterfall:u}=(0,g.useStrapiApp)(),c=Qo(l,a.slug,"editView");return(0,r.useEffect)(()=>{const d=u(Zt.Eo,{layout:n,query:l});return i(Ku(d.layout,l)),()=>{i(Qu())}},[n,i,l,u]),!s||!c?r.createElement(g.LoadingIndicatorPage,null):r.createElement(wb,Lb(Sb({},a),{layout:s,userPermissions:c}))};xi.propTypes={layout:o().shape({components:o().object.isRequired,contentType:o().shape({uid:o().string.isRequired,settings:o().object.isRequired,metadatas:o().object.isRequired,options:o().object.isRequired,attributes:o().object.isRequired}).isRequired}).isRequired};const un=xi;var Dr=p(84968),kb=p(23940),Lt=p.n(kb),Ab=p(88423),Si=p.n(Ab),jb=p(3704),$b=p.n(jb),Bb=Object.defineProperty,Nb=Object.defineProperties,Vb=Object.getOwnPropertyDescriptors,Li=Object.getOwnPropertySymbols,qb=Object.prototype.hasOwnProperty,Wb=Object.prototype.propertyIsEnumerable,Fi=(e,t,n)=>t in e?Bb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zb=(e,t)=>{for(var n in t||(t={}))qb.call(t,n)&&Fi(e,n,t[n]);if(Li)for(var n of Li(t))Wb.call(t,n)&&Fi(e,n,t[n]);return e},Ub=(e,t)=>Nb(e,Vb(t));const xr=e=>e.reduce((t,n)=>t+n.size,0),Hb=e=>e.reduce((t,n,a)=>{const s={rowId:a,rowContent:n};return t.concat(s)},[]),bt=e=>e.reduce((t,n)=>{let a=[];const s=n.rowContent.reduce((u,c)=>{const d=xr(u);return c.name==="_TEMP_"||(d+c.size<=12?u.push(c):a.push(c)),u},[]),i=t.length===0?0:Math.max.apply(Math,t.map(u=>u.rowId))+1,l=xr(s);if(l<12&&s.push({name:"_TEMP_",size:12-l}),t.push({rowId:i,rowContent:s}),a.length>0){const u=xr(a);u<12&&a.push({name:"_TEMP_",size:12-u}),t.push({rowId:i+1,rowContent:a}),a=[]}return t},[]).filter(t=>t.rowContent.length>0).filter(t=>t.rowContent.length===1?t.rowContent[0].name!=="_TEMP_":!0),_b=e=>e.reduce((t,n)=>{const a=n.rowContent.filter(s=>s.name!=="_TEMP_");return t.concat([a])},[]),ki=e=>{switch(e){case"boolean":case"date":case"integer":case"float":case"biginteger":case"decimal":case"time":return 4;case"json":case"component":case"richtext":case"dynamiczone":return 12;default:return 6}},Zb=(e,t=[])=>t.reduce((n,{rowContent:a})=>{var s,i;const l=(i=(s=a.find(u=>u.name===e))==null?void 0:s.size)!=null?i:null;return l&&(n=l),n},null),Gb=(e,t,n=[])=>n.map(a=>(a.rowContent=a.rowContent.map(s=>s.name===e?Ub(zb({},s),{size:t}):s),a)),Sr={fieldForm:{},componentLayouts:{},metaToEdit:"",initialData:{},metaForm:{},modifiedData:{}},Qb=(e=Sr,t)=>(0,Ht.default)(e,n=>{var a,s,i;const l=["modifiedData","layouts","edit"],u=["modifiedData","layouts","editRelations"];switch(t.type){case"ADD_RELATION":{const c=R()(e,u,[]);ne()(n,u,[...c,t.name]);break}case"MOVE_RELATION":{const c=R()(e,u,[]),{fromIndex:d,toIndex:m}=t;ne()(n,u,Rt(c,d,m));break}case"MOVE_ROW":{const c=R()(e,l,[]),{fromIndex:d,toIndex:m}=t;ne()(n,l,Rt(c,d,m));break}case"ON_ADD_FIELD":{const c=Ue()(e),d=ki(R()(c,["modifiedData","attributes",t.name,"type"],"")),m=R()(c,l,[]).length,f=[...l,m-1,"rowContent"],y=R()(c,f,[]);let h=R()(c,l,[]);Array.isArray(y)?ne()(h,[m>0?m-1:0,"rowContent"],[...y,{name:t.name,size:d}]):ne()(h,[m>0?m-1:0,"rowContent"],[{name:t.name,size:d}]);const b=bt(h);ne()(n,l,b);break}case"ON_CHANGE":{ne()(n,["modifiedData",...t.keys],t.value);break}case"ON_CHANGE_META":{ne()(n,["metaForm","metadata",...t.keys],t.value);break}case"ON_CHANGE_SIZE":{ne()(n,["metaForm","size"],t.value);break}case"ON_RESET":{n.modifiedData=e.initialData;break}case"REMOVE_FIELD":{const c=R()(e,[...l,t.rowIndex,"rowContent"],[]);let d=Ue()(e);if(c.length===1||c.length===2&&R()(c,[1,"name"],"")==="_TEMP_"){const f=R()(e,l,[]);ne()(d,l,f.filter((y,h)=>t.rowIndex!==h))}else ne()(d,[...l,t.rowIndex,"rowContent"],c.filter((f,y)=>y!==t.fieldIndex));const m=bt(R()(d,l,[]));ne()(n,l,m);break}case"REMOVE_RELATION":{const c=R()(e,u,[]);ne()(n,u,c.filter((d,m)=>t.index!==m));break}case"REORDER_DIFF_ROW":{const c=R()(e,[...l,t.dragRowIndex,"rowContent"],[]),d=R()(e,[...l,t.hoverRowIndex,"rowContent"],[]),m=R()(e,[...l,t.dragRowIndex,"rowContent",t.dragIndex],{}),f=[...d,m];let y=Ue()(e);ne()(y,[...l,t.dragRowIndex,"rowContent"],c.filter((b,E)=>t.dragIndex!==E)),ne()(y,[...l,t.hoverRowIndex,"rowContent"],Rt(f,f.length-1,t.hoverIndex));const h=bt(R()(y,l,[]));ne()(n,l,h);break}case"REORDER_ROW":{const c=Ue()(e),d=R()(c,[...l,t.dragRowIndex,"rowContent"],[]);ne()(c,[...l,t.dragRowIndex,"rowContent"],Rt(d,t.dragIndex,t.hoverIndex));const m=bt(R()(c,l,[]));ne()(n,l,m);break}case"SET_FIELD_TO_EDIT":{n.metaToEdit=t.name,n.metaForm={metadata:R()(e,["modifiedData","metadatas",t.name,"edit"],{}),size:(i=Zb(t.name,(s=(a=e.modifiedData)==null?void 0:a.layouts)==null?void 0:s.edit))!=null?i:ki()};break}case"SUBMIT_META_FORM":{ne()(n,["modifiedData","metadatas",e.metaToEdit,"edit"],e.metaForm.metadata);const c=Ue()(R()(e,l,[])),d=Gb(e.metaToEdit,e.metaForm.size,c);d.length>0&&ne()(n,l,bt(d));break}case"SUBMIT_SUCCEEDED":{n.initialData=e.modifiedData;break}case"UNSET_FIELD_TO_EDIT":{n.metaToEdit="",n.metaForm={};break}default:return n}});var Kb=Object.defineProperty,Yb=Object.defineProperties,Jb=Object.getOwnPropertyDescriptors,Ai=Object.getOwnPropertySymbols,Xb=Object.prototype.hasOwnProperty,eE=Object.prototype.propertyIsEnumerable,ji=(e,t,n)=>t in e?Kb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tE=(e,t)=>{for(var n in t||(t={}))Xb.call(t,n)&&ji(e,n,t[n]);if(Ai)for(var n of Ai(t))eE.call(t,n)&&ji(e,n,t[n]);return e},nE=(e,t)=>Yb(e,Jb(t));const rE=(e,t,n)=>{let a=(0,q.cloneDeep)(t);return(0,q.set)(a,["layouts","edit"],bt(Hb(t.layouts.edit))),nE(tE({},e),{initialData:a,modifiedData:a,componentLayouts:n})};var Ae=p(12611),oE=p(42258),$i=p.n(oE);const Bi=({componentUid:e})=>{const{componentLayouts:t}=Qe(),{formatMessage:n}=(0,A.useIntl)(),a=R()(t,[e],{}),s=R()(a,["layouts","edit"],[]);return r.createElement(w.Box,{padding:3},s.map((i,l)=>r.createElement(le.Grid,{gap:4,key:l},i.map(u=>r.createElement(le.GridItem,{key:u.name,col:u.size},r.createElement(w.Box,{paddingTop:2},r.createElement(j.Flex,{alignItems:"center",background:"neutral0",paddingLeft:3,paddingRight:3,height:`${32/16}rem`,hasRadius:!0,borderColor:"neutral200"},r.createElement(L.Typography,{textColor:"neutral800"},u.name))))))),r.createElement(w.Box,{paddingTop:2},r.createElement(g.Link,{startIcon:r.createElement($i(),null),to:`/content-manager/components/${e}/configurations/edit`},n({id:v("components.FieldItem.linkToComponentLayout"),defaultMessage:"Set the component's layout"}))))};Bi.propTypes={componentUid:o().string.isRequired};const aE=Bi,Ni=(0,S.default)(j.Flex)`
  border-radius: 50%;
  svg {
    & > * {
      fill: ${({theme:e})=>e.colors.neutral500};
    }
    width: 12px;
    height: 12px;
  }
`,sE=(0,S.default)(j.Flex)`
  text-decoration: none;
  &:hover {
    ${({theme:e})=>`
      background: ${e.colors.primary100};
      svg {
        & > * {
          fill: ${e.colors.primary600};
        }
      }
      ${L.Typography} {
          color: ${e.colors.primary600};
      }
      ${Ni} {
        background: ${e.colors.primary200};
      }
      border-color: ${e.colors.primary200};
    `}
  }
`,Vi=({components:e})=>{const{componentLayouts:t}=Qe();return r.createElement(ae.Stack,{spacing:2,horizontal:!0,overflow:"scroll hidden",padding:3},e.map(n=>r.createElement(sE,{hasRadius:!0,background:"neutral0",justifyContent:"center",alignItems:"center",height:`${84/16}rem`,minWidth:`${140/16}rem`,key:n,padding:2,direction:"column",borderColor:"neutral200",as:te.Link,to:`/content-manager/components/${n}/configurations/edit`},r.createElement(Ni,{width:`${32/16}rem`,height:`${32/16}rem`,background:"neutral150",justifyContent:"center",alignItems:"center",padding:2},r.createElement(Fn.G,{icon:R()(t,[n,"info","icon"],"")})),r.createElement(w.Box,{paddingTop:1},r.createElement(L.Typography,{fontSize:1,textColor:"neutral600",fontWeight:"bold"},R()(t,[n,"info","displayName"],""))))))};Vi.propTypes={components:o().arrayOf(o().string).isRequired};const iE=Vi,qi=(0,S.default)(Me.IconButton)`
  background-color: transparent;
  path {
    fill: ${({theme:e})=>e.colors.neutral600};
  }
`,Lr=({attribute:e,onEditField:t,onDeleteField:n,children:a})=>{const{formatMessage:s}=(0,A.useIntl)();return r.createElement(w.Box,{overflow:"hidden",width:"100%"},r.createElement(j.Flex,{paddingLeft:3,alignItems:"center",justifyContent:"space-between"},r.createElement(L.Typography,{fontWeight:"semiBold",textColor:"neutral800",ellipsis:!0},a),r.createElement(j.Flex,null,r.createElement(qi,{label:s({id:v("containers.ListSettingsView.modal-form.edit-label"),defaultMessage:"Edit {fieldName}"},{fieldName:a}),onClick:t,icon:r.createElement(ct(),null),noBorder:!0}),r.createElement(qi,{label:s({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:a}),"data-testid":"delete-field",onClick:n,icon:r.createElement(qe(),null),noBorder:!0}))),(e==null?void 0:e.type)==="component"&&r.createElement(aE,{componentUid:e.component}),(e==null?void 0:e.type)==="dynamiczone"&&r.createElement(iE,{components:e.components}))};Lr.defaultProps={attribute:void 0},Lr.propTypes={attribute:o().shape({components:o().array,component:o().string,type:o().string}),onEditField:o().func.isRequired,onDeleteField:o().func.isRequired,children:o().string.isRequired};const Wi=Lr,lE=(0,S.default)(j.Flex)`
  position: relative;
  ${({isFirst:e,isLast:t,hasHorizontalPadding:n})=>e?`
        padding-right: 4px;
      `:t?`
        padding-left: 4px;
      `:n?`
        padding: 0 4px;
      `:""}
  ${({showRightCarret:e,showLeftCarret:t,theme:n})=>e?`
        &:after {
          content: '';
          position: absolute;
          right: -1px;
          background-color: ${n.colors.primary600};
          width: 2px;
          height: 100%;
          align-self: stretch;
          z-index: 1;
        }
      `:t?`
        &:before {
          content: '';
          position: absolute;
          left: -1px;
          background-color: ${n.colors.primary600};
          width: 2px;
          height: 100%;
          align-self: stretch;
          z-index: 1;
        }
      `:""};
`,cE=(0,S.default)(rt())`
  height: ${12/16}rem;
  width: ${12/16}rem;
  path {
    fill: ${({theme:e})=>e.colors.neutral600};
  }
`,uE=(0,S.default)(j.Flex)`
  display: ${({dragStart:e})=>e?"none":"flex"};
  opacity: ${({isDragging:e,isFullSize:t,isHidden:n})=>e&&!t?.2:e&&t||n?0:1};
`,dE=(0,S.default)(j.Flex)`
  cursor: all-scroll;
  border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
`,Fr=({attribute:e,children:t,index:n,lastIndex:a,moveItem:s,moveRow:i,name:l,onDeleteField:u,onEditField:c,rowIndex:d,size:m})=>{const[f,y]=(0,r.useState)(!1),h=l==="_TEMP_",{setIsDraggingSibling:b}=Qe(),E=m===12,O=(0,r.useRef)(null),I=(0,r.useRef)(null),[{clientOffset:C,isOver:x},D]=(0,Te.useDrop)({accept:Pe.EDIT_FIELD,hover(T,z){if(!I.current||T.size!==12)return;const Q=z.getItem().index,K=n,P=z.getItem().rowIndex,M=d;if(Q===K&&P===M)return;const H=I.current.getBoundingClientRect(),re=(H.bottom-H.top)/2,me=z.getClientOffset().y-H.top;P<M&&me<re||P>M&&me>re||(i(P,M),T.rowIndex=M,T.itemIndex=K)},drop(T,z){if(!I.current)return;const Q=z.getItem().index,K=n,P=z.getItem().rowIndex,M=d;if(T.size===12||Q===K&&P===M)return;const H=I.current.getBoundingClientRect();if(Math.abs(z.getClientOffset().x-H.left)>H.width/1.8){s(Q,K+1,P,M),T.itemIndex=K+1,T.rowIndex=M;return}s(Q,K,P,M),T.itemIndex=K,T.rowIndex=M},collect:T=>({canDrop:T.canDrop(),clientOffset:T.getClientOffset(),isOver:T.isOver(),isOverCurrent:T.isOver({shallow:!0}),itemType:T.getItemType()})}),[{isDragging:W,getItem:F},$,N]=(0,Te.useDrag)({type:Pe.EDIT_FIELD,item:()=>(b(!0),{index:n,labelField:t,rowIndex:d,name:l,size:m}),canDrag(){return l!=="_TEMP_"},collect:T=>({isDragging:T.isDragging(),getItem:T.getItem()}),end:()=>{b(!1)}});(0,r.useEffect)(()=>{N((0,en.rX)(),{captureDraggingState:!0})},[N]);const G={dragRef:$(O),dropRef:D(I)};let V=!1,_=!1;if(I.current&&C){const T=I.current.getBoundingClientRect();V=x&&F.size!==12&&Math.abs(C.x-T.left)<T.width/2,_=x&&F.size!==12&&Math.abs(C.x-T.left)>T.width/2,l==="_TEMP_"&&(V=x&&F.size!==12,_=!1)}const k=()=>e&&E?`${74/16}rem`:`${32/16}rem`,Z=n===0&&!E,B=n===a&&!E,Y=n!==0&&!E;return r.createElement(le.GridItem,{col:m},r.createElement(lE,{ref:G.dropRef,showLeftCarret:V,showRightCarret:_,isFirst:Z,isLast:B,hasHorizontalPadding:Y,onDrag:()=>{E&&!f&&y(!0)},onDragEnd:()=>{E&&y(!1)}},f&&E&&r.createElement(w.Box,{width:"100%",height:"2px",background:"primary600"}),r.createElement(uE,{width:E&&f?0:"100%",borderColor:"neutral150",hasRadius:!0,background:"neutral100",minHeight:k(),alignItems:"stretch",isDragging:W,dragStart:f,isFullSize:E,isHidden:h},r.createElement(dE,{as:"span",type:"button",ref:G.dragRef,onClick:T=>T.stopPropagation(),alignItems:"center",paddingLeft:3,paddingRight:3,tabIndex:-1},r.createElement(cE,null)),!h&&r.createElement(Wi,{attribute:e,onEditField:c,onDeleteField:u},t))))};Fr.defaultProps={attribute:void 0},Fr.propTypes={attribute:o().shape({components:o().array,component:o().string,type:o().string}),children:o().string.isRequired,index:o().number.isRequired,moveItem:o().func.isRequired,moveRow:o().func.isRequired,name:o().string.isRequired,onDeleteField:o().func.isRequired,onEditField:o().func.isRequired,rowIndex:o().number.isRequired,lastIndex:o().number.isRequired,size:o().number.isRequired};const pE=Fr,zi=({rowItem:e,onRemoveField:t,rowId:n,rowIndex:a,index:s,lastIndex:i})=>{const{setEditFieldToSelect:l,attributes:u,modifiedData:c,moveRow:d,moveItem:m}=Qe(),f=R()(u,[e.name],{}),y=R()(c,["metadatas",e.name,"edit","label"],"");return r.createElement(pE,{onEditField:()=>l(e.name),onDeleteField:()=>t(n,s),attribute:f,index:s,lastIndex:i,rowIndex:a,name:e.name,size:e.size,moveRow:d,moveItem:m},y||e.name)};zi.propTypes={index:o().number.isRequired,lastIndex:o().number.isRequired,onRemoveField:o().func.isRequired,rowId:o().number.isRequired,rowIndex:o().number.isRequired,rowItem:o().object.isRequired};const mE=zi,Ui=({row:e,onRemoveField:t,rowIndex:n})=>r.createElement(le.Grid,null,e.rowContent.map((a,s)=>r.createElement(mE,{key:a.name,rowItem:a,index:s,rowId:e.rowId,onRemoveField:t,rowIndex:n,lastIndex:e.rowContent.length-1})));Ui.propTypes={onRemoveField:o().func.isRequired,row:o().object.isRequired,rowIndex:o().number.isRequired};const fE=Ui,gE=[{action:"plugin::content-type-builder.read",subject:null}],yE=()=>{const{trackUsage:e}=(0,g.useTracking)(),{formatMessage:t}=(0,A.useIntl)(),{slug:n,modifiedData:a,isContentTypeView:s}=Qe(),i=s?"content-types":"components",l=`/plugins/content-type-builder/${i==="content-types"?i:"component-categories"}`,u=R()(a,"category",""),c=i==="content-types"?n:`${u}/${n}`,d=()=>{e("willEditEditLayout")};return n==="strapi::administrator"?null:r.createElement(g.CheckPermissions,{permissions:gE},r.createElement(g.LinkButton,{to:`${l}/${c}`,onClick:d,size:"S",startIcon:r.createElement(ct(),null),variant:"secondary"},t({id:v(`edit-settings-view.link-to-ctb.${i}`),defaultMessage:"Edit the content type"})))},Hi=({editLayout:e,editLayoutRemainingFields:t,onRemoveField:n,onAddField:a})=>{const{formatMessage:s}=(0,A.useIntl)();return r.createElement(ae.Stack,{spacing:4},r.createElement(j.Flex,{justifyContent:"space-between"},r.createElement("div",null,r.createElement(w.Box,null,r.createElement(L.Typography,{fontWeight:"bold"},s({id:v("containers.ListPage.displayedFields"),defaultMessage:"Displayed fields"}))),r.createElement(w.Box,null,r.createElement(L.Typography,{variant:"pi",textColor:"neutral600"},s({id:"containers.SettingPage.editSettings.description",defaultMessage:"Drag & drop the fields to build the layout"})))),r.createElement(yE,null)),r.createElement(w.Box,{padding:4,hasRadius:!0,borderStyle:"dashed",borderWidth:"1px",borderColor:"neutral300"},r.createElement(ae.Stack,{spacing:2},e.map((i,l)=>r.createElement(fE,{key:i.rowId,row:i,rowIndex:l,onRemoveField:n})),r.createElement(Ae.SimpleMenu,{id:"label",label:s({id:v("containers.SettingPage.add.field"),defaultMessage:"Insert another field"}),as:ye.Button,"data-testid":"add-field",fullWidth:!0,startIcon:r.createElement(mt(),null),endIcon:null,variant:"secondary",disabled:t.length===0},t.map(i=>r.createElement(Ae.MenuItem,{key:i,onClick:()=>a(i)},i))))))};Hi.propTypes={editLayout:o().array.isRequired,editLayoutRemainingFields:o().array.isRequired,onAddField:o().func.isRequired,onRemoveField:o().func.isRequired};const hE=Hi,bE=(0,S.default)(rt())`
  height: ${12/16}rem;
  width: ${12/16}rem;
  path {
    fill: ${({theme:e})=>e.colors.neutral600};
  }
`,EE=(0,S.default)(j.Flex)`
  opacity: ${({isDragging:e})=>e?0:1};
`,vE=(0,S.default)(j.Flex)`
  cursor: all-scroll;
  border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
`,kr=({attribute:e,onEditField:t,onDeleteField:n,children:a,index:s,name:i,onMoveField:l})=>{const u=(0,r.useRef)(),[,c]=(0,Te.useDrop)({accept:Pe.EDIT_RELATION,hover(h){if(!u.current)return;const b=h.index,E=s;b!==E&&(l(b,E),h.index=E)}}),[{isDragging:d},m,f]=(0,Te.useDrag)({type:Pe.EDIT_RELATION,item:()=>({index:s,labelField:a,name:i}),collect:h=>({isDragging:h.isDragging()})});(0,r.useEffect)(()=>{f((0,en.rX)(),{captureDraggingState:!0})},[f]),m(c(u));const y=()=>e&&["json","text","file","media","component","richtext","dynamiczone"].includes(e.type)?`${74/16}rem`:`${32/16}rem`;return r.createElement(EE,{width:"100%",borderColor:"neutral150",hasRadius:!0,background:"neutral100",minHeight:y(),alignItems:"stretch",isDragging:d},r.createElement(vE,{as:"span",type:"button",ref:u,onClick:h=>h.stopPropagation(),alignItems:"center",paddingLeft:3,paddingRight:3,tabIndex:-1},r.createElement(bE,null)),r.createElement(Wi,{attribute:e,onEditField:t,onDeleteField:n},a))};kr.defaultProps={attribute:void 0},kr.propTypes={attribute:o().shape({components:o().array,component:o().string,type:o().string}),onEditField:o().func.isRequired,onDeleteField:o().func.isRequired,children:o().string.isRequired,index:o().number.isRequired,name:o().string.isRequired,onMoveField:o().func.isRequired};const CE=kr,_i=({relationsLayout:e,editRelationsLayoutRemainingFields:t,onRemoveField:n,onAddField:a})=>{const{formatMessage:s}=(0,A.useIntl)(),{setEditFieldToSelect:i,modifiedData:l,onMoveRelation:u}=Qe();return r.createElement(ae.Stack,{spacing:4},r.createElement("div",null,r.createElement(w.Box,null,r.createElement(L.Typography,{fontWeight:"bold"},s({id:v("containers.SettingPage.relations"),defaultMessage:"Relational fields"}))),r.createElement(w.Box,null,r.createElement(L.Typography,{variant:"pi",textColor:"neutral600"},s({id:"containers.SettingPage.editSettings.description",defaultMessage:"Drag & drop the fields to build the layout"})))),r.createElement(w.Box,{padding:4,hasRadius:!0,borderStyle:"dashed",borderWidth:"1px",borderColor:"neutral300"},r.createElement(ae.Stack,{spacing:2},e.map((c,d)=>{const m=R()(l,["metadatas",c,"edit","label"],"");return r.createElement(CE,{onEditField:()=>i(c),onDeleteField:()=>n(d),key:c,index:d,name:c,onMoveField:u},m||c)}),r.createElement(Ae.SimpleMenu,{id:"label",label:s({id:"containers.SettingPage.add.relational-field",defaultMessage:"Insert another relational field"}),"data-testid":"add-relation",as:ye.Button,fullWidth:!0,startIcon:r.createElement(mt(),null),endIcon:null,variant:"secondary",disabled:t.length===0},t.map(c=>r.createElement(Ae.MenuItem,{id:`menuItem-${c}`,key:`menuItem-${c}`,onClick:()=>a(c)},c))))))};_i.propTypes={relationsLayout:o().array.isRequired,editRelationsLayoutRemainingFields:o().array.isRequired,onRemoveField:o().func.isRequired,onAddField:o().func.isRequired};const OE=_i;var Ye=p(4122),PE=p(61714),dn=p.n(PE),RE=p(9895),ME=p.n(RE),TE=p(34103),wE=p.n(TE),IE=p(57290),Zi=p.n(IE),DE=p(55788),Ar=p.n(DE),xE=p(81208),SE=p.n(xE),LE=p(65232),jr=p.n(LE),FE=p(80268),kE=p.n(FE),AE=p(42122),Ft=p.n(AE),jE=p(57955),$E=p.n(jE),BE=p(10822),NE=p.n(BE),VE=p(80466),qE=p.n(VE);const WE={biginteger:r.createElement(Ft(),null),boolean:r.createElement(ME(),null),date:r.createElement(dn(),null),datetime:r.createElement(dn(),null),decimal:r.createElement(Ft(),null),email:r.createElement(wE(),null),enum:r.createElement(Zi(),null),enumeration:r.createElement(Zi(),null),file:r.createElement(Ar(),null),files:r.createElement(Ar(),null),float:r.createElement(Ft(),null),integer:r.createElement(Ft(),null),media:r.createElement(Ar(),null),number:r.createElement(Ft(),null),relation:r.createElement(SE(),null),string:r.createElement(jr(),null),text:r.createElement(jr(),null),richtext:r.createElement(jr(),null),time:r.createElement(dn(),null),timestamp:r.createElement(dn(),null),json:r.createElement($E(),null),uid:r.createElement(kE(),null),component:r.createElement(NE(),null),dynamiczone:r.createElement(qE(),null)},Gi=({type:e})=>WE[e]||null;Gi.propTypes={type:o().string.isRequired};const Qi=Gi,zE=e=>e.reduce((t,n)=>{const a=(0,q.get)(n,["attributes"],{}),s=Object.keys(a).filter(i=>!["boolean","component","dynamiczone","json","media","password","relation","text","richtext"].includes((0,q.get)(a,[i,"type"],"")));return t[n.uid]=s,t},{}),Ki=e=>{let t;switch(e){case"description":case"label":case"placeholder":t="text";break;case"mainField":t="select";break;case"editable":t="bool";break;default:t=""}const n=v(e==="mainField"?"containers.SettingPage.editSettings.entry.title":`form.Input.${e}`);return{type:t,label:{id:n}}};var kt=p(63865),UE=Object.defineProperty,pn=Object.getOwnPropertySymbols,Yi=Object.prototype.hasOwnProperty,Ji=Object.prototype.propertyIsEnumerable,Xi=(e,t,n)=>t in e?UE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$r=(e,t)=>{for(var n in t||(t={}))Yi.call(t,n)&&Xi(e,n,t[n]);if(pn)for(var n of pn(t))Ji.call(t,n)&&Xi(e,n,t[n]);return e},HE=(e,t)=>{var n={};for(var a in e)Yi.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&pn)for(var a of pn(e))t.indexOf(a)<0&&Ji.call(e,a)&&(n[a]=e[a]);return n};const Br=e=>{var t=e,{type:n,options:a,onChange:s,value:i,name:l}=t,u=HE(t,["type","options","onChange","value","name"]);const{formatMessage:c}=(0,A.useIntl)();switch(n){case"text":return r.createElement(Zn.TextInput,$r({onChange:s,value:i,name:l},u));case"bool":return r.createElement(kt.ToggleInput,$r({onChange:d=>{s({target:{name:l,value:d.target.checked}})},checked:i,name:l,onLabel:c({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),offLabel:c({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"})},u));case"select":return r.createElement(ue.Select,$r({value:i,name:l,onChange:d=>s({target:{name:l,value:d}})},u),a.map(d=>r.createElement(ue.Option,{key:d,value:d},d)));default:return null}};Br.defaultProps={options:void 0},Br.propTypes={type:o().string.isRequired,options:o().arrayOf(o().string),onChange:o().func.isRequired,value:o().oneOfType([o().string,o().bool]).isRequired,name:o().string.isRequired};const _E=Br,ZE=[[4,"33%"],[6,"50%"],[8,"66%"],[12,"100%"]],GE=["dynamiczone","component","json","richtext"],el=({onMetaChange:e,onSizeChange:t})=>{const{formatMessage:n}=(0,A.useIntl)(),{modifiedData:a,selectedField:s,attributes:i,fieldForm:l}=Qe(),u=(0,r.useMemo)(In,[]),{schemas:c}=(0,fe.v9)(E=>u(E),fe.wU),d=(0,r.useMemo)(()=>{if(!s)return[];const E=R()(a,["metadatas",s,"edit"],{});return Object.keys(E).filter(O=>O!=="visible")},[s,a]),m=(0,r.useMemo)(()=>zE(c),[c]),f=(0,r.useCallback)(E=>{if(E!=="relation"&&E!=="component")return[];const O=E==="component"?"component":"targetModel",I=R()(a,["attributes",s,O],"");return R()(m,[I],[])},[s,m,a]),y=d.map(E=>{const O=R()(i,[s,"type"]);return O==="dynamiczone"||O==="component"&&!["label","description"].includes(E)||O==="component"&&E!=="label"||["media","json","boolean"].includes(O)&&E==="placeholder"?null:r.createElement(le.GridItem,{col:6,key:E},r.createElement(_E,{type:Ki(E).type,hint:E==="mainField"?n({id:v("containers.SettingPage.editSettings.relation-field.description")}):"",label:n({id:R()(Ki(E),"label.id","app.utils.defaultMessage")}),name:E,onChange:e,value:R()(l,["metadata",E],""),options:f(O)}))}),h=!GE.includes(i[s].type),b=r.createElement(le.GridItem,{col:6,key:"size"},r.createElement(ue.Select,{value:l==null?void 0:l.size,name:"size",onChange:E=>{t({name:s,value:E})},label:n({id:v("containers.SettingPage.editSettings.size.label"),defaultMessage:"Size"})},ZE.map(([E,O])=>r.createElement(ue.Option,{key:E,value:E},O))));return r.createElement(r.Fragment,null,y,h&&b)};el.propTypes={onMetaChange:o().func.isRequired,onSizeChange:o().func.isRequired};const QE=el,KE=(0,S.default)(j.Flex)`
  svg {
    width: ${32/16}rem;
    height: ${24/16}rem;
    margin-right: ${({theme:e})=>e.spaces[3]};
  }
`,tl=({onToggle:e,onMetaChange:t,onSizeChange:n,onSubmit:a,type:s})=>{const{selectedField:i}=Qe(),{formatMessage:l}=(0,A.useIntl)(),u=()=>s==="timestamp"?"date":["decimal","float","integer","biginter"].includes(s)?"number":s;return r.createElement(Ye.ModalLayout,{onClose:e,labelledBy:"title"},r.createElement("form",{onSubmit:a},r.createElement(Ye.ModalHeader,null,r.createElement(KE,null,r.createElement(Qi,{type:u(s)}),r.createElement(L.Typography,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"title"},l({id:v("containers.ListSettingsView.modal-form.edit-label"),defaultMessage:"Edit {fieldName}"},{fieldName:Lt()(i)})))),r.createElement(Ye.ModalBody,null,r.createElement(le.Grid,{gap:4},r.createElement(QE,{onMetaChange:t,onSizeChange:n}))),r.createElement(Ye.ModalFooter,{startActions:r.createElement(ye.Button,{onClick:e,variant:"tertiary"},l({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:r.createElement(ye.Button,{type:"submit"},l({id:"global.finish",defaultMessage:"Finish"}))})))};tl.propTypes={onSubmit:o().func.isRequired,onToggle:o().func.isRequired,onMetaChange:o().func.isRequired,onSizeChange:o().func.isRequired,type:o().string.isRequired};const YE=tl,JE=(e,t,n)=>ge.be.put(ve(n?`content-types/${t}/configuration`:`components/${t}/configuration`),e),Nr=({mainLayout:e,components:t,isContentTypeView:n,slug:a,updateLayout:s})=>{const[i,l]=(0,r.useReducer)(Qb,Sr,()=>rE(Sr,e,t)),[u,c]=(0,r.useState)(!1),{trackUsage:d}=(0,g.useTracking)(),m=(0,g.useNotification)(),{goBack:f}=(0,te.useHistory)(),[y,h]=(0,r.useState)(!1),[b,E]=(0,r.useState)(!1),{componentLayouts:O,initialData:I,modifiedData:C,metaToEdit:x,metaForm:D}=i,{formatMessage:W}=(0,A.useIntl)(),F=R()(e,["info","displayName"],""),$=R()(C,["attributes"],{}),N=Object.keys($).filter(U=>{const de=R()($,[U,"type"],"");return!["dynamiczone","json","text","relation","component","boolean","media","password","richtext","timestamp"].includes(de)&&!!de}),G=R()(C,["layouts","edit"],[]),V=$b()(G,"rowContent"),_=Object.keys(C.attributes).filter(U=>n?R()(C,["attributes",U,"type"],"")!=="relation":!0).filter(U=>R()(C,["metadatas",U,"edit","visible"],!1)===!0).filter(U=>V.findIndex(de=>de.name===U)===-1).sort(),k=R()(C,["layouts","editRelations"],[]),Z=Object.keys($).filter(U=>$[U].type==="relation").filter(U=>k.indexOf(U)===-1),B=({target:{name:U,value:de}})=>{l({type:"ON_CHANGE",keys:U.split("."),value:de})},Y=()=>{h(U=>!U)},T=()=>{E(U=>!U)},z=({target:{name:U,value:de}})=>{l({type:"ON_CHANGE_META",keys:U.split("."),value:de})},Q=({name:U,value:de})=>{l({type:"ON_CHANGE_SIZE",name:U,value:de})},K=U=>{U.preventDefault(),l({type:"SUBMIT_META_FORM"}),Y()},P=U=>{U.preventDefault(),T()},M=(0,Dr.useMutation)(U=>JE(U,a,n),{onSuccess:({data:U})=>{s&&s(U.data),l({type:"SUBMIT_SUCCEEDED"}),T(),d("didEditEditSettings")},onError:()=>{m({type:"warning",message:{id:"notification.error"}})}}),{isLoading:H}=M,re=()=>{const U=Si()(Ue()(C),["layouts","metadatas","settings"]);ne()(U,"layouts.edit",_b(U.layouts.edit)),M.mutate(U)},ce=(U,de)=>{l({type:"MOVE_RELATION",fromIndex:U,toIndex:de})},me=(U,de)=>{l({type:"MOVE_FIELD",fromIndex:U,toIndex:de})},Fe=(U,de,Be,Je)=>{l(Be===Je?{type:"REORDER_ROW",dragRowIndex:Be,dragIndex:U,hoverIndex:de}:{type:"REORDER_DIFF_ROW",dragIndex:U,hoverIndex:de,dragRowIndex:Be,hoverRowIndex:Je})},st=(U,de)=>{l({type:"MOVE_ROW",fromIndex:U,toIndex:de})};return r.createElement(nt,{isContentTypeView:n,attributes:$,modifiedData:C,slug:a,componentLayouts:O,selectedField:x,fieldForm:D,onMoveRelation:ce,onMoveField:me,moveRow:st,moveItem:Fe,setEditFieldToSelect:U=>{l({type:"SET_FIELD_TO_EDIT",name:U}),Y()},isDraggingSibling:u,setIsDraggingSibling:c},r.createElement(oe.Main,null,r.createElement("form",{onSubmit:P},r.createElement(X.HeaderLayout,{title:W({id:v("components.SettingsViewWrapper.pluginHeader.title"),defaultMessage:`Configure the view - ${Lt()(F)}`},{name:Lt()(F)}),subtitle:W({id:v("components.SettingsViewWrapper.pluginHeader.description.edit-settings"),defaultMessage:"Customize how the edit view will look like."}),navigationAction:r.createElement(g.Link,{startIcon:r.createElement(ln(),null),onClick:U=>{U.preventDefault(),f()},to:"/"},W({id:"global.back",defaultMessage:"Back"})),primaryAction:r.createElement(ye.Button,{disabled:rn()(I,C),startIcon:r.createElement(ht(),null),type:"submit"},W({id:"global.save",defaultMessage:"Save"}))}),r.createElement(X.ContentLayout,null,r.createElement(w.Box,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},r.createElement(ae.Stack,{spacing:4},r.createElement(L.Typography,{variant:"delta",as:"h2"},W({id:v("containers.SettingPage.settings"),defaultMessage:"Settings"})),r.createElement(le.Grid,null,r.createElement(le.GridItem,{col:6,s:12},r.createElement(ue.Select,{label:W({id:v("containers.SettingPage.editSettings.entry.title"),defaultMessage:"Entry title"}),hint:W({id:v("containers.SettingPage.editSettings.entry.title.description"),defaultMessage:"Set the display field of your entry"}),onChange:U=>{B({target:{name:"settings.mainField",value:U===""?null:U}})},value:C.settings.mainField},N.map(U=>r.createElement(ue.Option,{key:U,value:U},U))))),r.createElement(w.Box,{paddingTop:2,paddingBottom:2},r.createElement(Gt.Divider,null)),r.createElement(L.Typography,{variant:"delta",as:"h3"},W({id:v("containers.SettingPage.view"),defaultMessage:"View"})),r.createElement(le.Grid,{gap:4},r.createElement(le.GridItem,{col:n?8:12,s:12},r.createElement(hE,{attributes:$,editLayout:G,editLayoutRemainingFields:_,onAddField:U=>{l({type:"ON_ADD_FIELD",name:U})},onRemoveField:(U,de)=>{l({type:"REMOVE_FIELD",rowIndex:U,fieldIndex:de})}})),n&&r.createElement(le.GridItem,{col:4,s:12},r.createElement(OE,{editRelationsLayoutRemainingFields:Z,relationsLayout:k,onAddField:U=>l({type:"ADD_RELATION",name:U}),onRemoveField:U=>l({type:"REMOVE_RELATION",index:U})})))))),r.createElement(g.ConfirmDialog,{bodyText:{id:v("popUpWarning.warning.updateAllSettings"),defaultMessage:"This will modify all your settings"},iconRightButton:r.createElement(ht(),null),isConfirmButtonLoading:H,isOpen:b,onToggleDialog:T,onConfirm:re,variantRightButton:"success-light"})),y&&r.createElement(YE,{onSubmit:K,onToggle:Y,type:R()($,[x,"type"],""),onMetaChange:z,onSizeChange:Q})))};Nr.defaultProps={isContentTypeView:!1,updateLayout:null},Nr.propTypes={components:o().object.isRequired,isContentTypeView:o().bool,mainLayout:o().shape({attributes:o().object.isRequired,info:o().object.isRequired,layouts:o().shape({list:o().array.isRequired,editRelations:o().array.isRequired,edit:o().array.isRequired}).isRequired,metadatas:o().object.isRequired,options:o().object.isRequired}).isRequired,slug:o().string.isRequired,updateLayout:o().func};const Vr=Nr;var Et=p(57959);const XE=()=>({type:Et.ZA}),e0=(e,t)=>({type:Et.Id,pagination:e,data:t}),t0=()=>({type:Et.MP});function n0(){return{type:Et.c2}}const r0=({components:e,contentType:t})=>{const{layouts:n}=t;return{contentType:t,components:e,displayedHeaders:n.list,type:Et.Zz}},qr=e=>({type:Et.Rp,target:e});var nl=p(13055),Wr=p(29270),o0=p(47228);const a0=()=>e=>e["content-manager_listView"]||o0.E,s0=()=>(0,wn.P1)(a0(),e=>e),rl=e=>{const{displayedHeaders:t}=e["content-manager_listView"];return t},i0=s0,ol=({isPublished:e})=>{const{formatMessage:t}=(0,A.useIntl)(),n=t({id:v(`containers.List.${e?"published":"draft"}`)}),a=e?"success100":"secondary100",s=e?"success700":"secondary700";return r.createElement(w.Box,{background:a,hasRadius:!0,paddingTop:1,paddingBottom:1,paddingLeft:2,paddingRight:2,style:{width:"fit-content"}},r.createElement(L.Typography,{fontWeight:"bold",textColor:s},n))};ol.propTypes={isPublished:o().bool.isRequired};const l0=ol;var c0=p(35980),At=p(53214),u0=p(68192),d0=p.n(u0),al=p(9667),p0=Object.defineProperty,mn=Object.getOwnPropertySymbols,sl=Object.prototype.hasOwnProperty,il=Object.prototype.propertyIsEnumerable,ll=(e,t,n)=>t in e?p0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m0=(e,t)=>{for(var n in t||(t={}))sl.call(t,n)&&ll(e,n,t[n]);if(mn)for(var n of mn(t))il.call(t,n)&&ll(e,n,t[n]);return e},f0=(e,t)=>{var n={};for(var a in e)sl.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&mn)for(var a of mn(e))t.indexOf(a)<0&&il.call(e,a)&&(n[a]=e[a]);return n};const g0=(0,S.default)(j.Flex)`
  position: relative;
  border-radius: 50%;
  width: 26px;
  height: 26px;
  border: 1px solid ${({theme:e})=>e.colors.neutral200};
  background: ${({theme:e})=>e.colors.neutral150};
  padding-left: 1px;

  span {
    line-height: 0.6rem;
    font-size: 0.6rem;
  }
`,cl=e=>{var t=e,{children:n}=t,a=f0(t,["children"]);return r.createElement(g0,m0({justifyContent:"center",alignItems:"center",as:"span"},a),r.createElement(L.Typography,{variant:"sigma",textColor:"neutral600"},n))};cl.propTypes={children:o().string.isRequired};const ul=cl,zr=({url:e,mime:t,alternativeText:n,name:a,ext:s,formats:i})=>{var l;const u=(0,g.prefixFileUrlWithBackendUrl)(e);if(t.includes("image")){const m=((l=i==null?void 0:i.thumbnail)==null?void 0:l.url)||null,f=(0,g.prefixFileUrlWithBackendUrl)(m)||u;return r.createElement(al.Avatar,{src:f,alt:n||a,preview:!0})}const c=(0,g.getFileExtension)(s),d=a.length>100?`${a.substring(0,100)}...`:a;return r.createElement(cr.Tooltip,{description:d},r.createElement(ul,null,c))};zr.defaultProps={alternativeText:null,formats:null},zr.propTypes={alternativeText:o().string,ext:o().string.isRequired,formats:o().object,mime:o().string.isRequired,name:o().string.isRequired,url:o().string.isRequired};const dl=zr;var y0=Object.defineProperty,pl=Object.getOwnPropertySymbols,h0=Object.prototype.hasOwnProperty,b0=Object.prototype.propertyIsEnumerable,ml=(e,t,n)=>t in e?y0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,E0=(e,t)=>{for(var n in t||(t={}))h0.call(t,n)&&ml(e,n,t[n]);if(pl)for(var n of pl(t))b0.call(t,n)&&ml(e,n,t[n]);return e};const fl=({value:e})=>r.createElement(al.AvatarGroup,null,e.map((t,n)=>{const a=`${t.id}${n}`;if(n===3){const s=`+${e.length-3}`;return r.createElement(ul,{key:a,preview:!1},s)}return n>3?null:r.createElement(dl,E0({key:a},t))}));fl.propTypes={value:o().arrayOf(o().shape({alternativeText:o().string,ext:o().string.isRequired,formats:o().object,mime:o().string.isRequired,name:o().string.isRequired,url:o().string.isRequired})).isRequired};const v0=fl;var gl=p(89557),C0=p(82910),O0=p(51064),P0=p.n(O0);const R0=e=>e%1!==0?e.toString().split(".")[1].length:0,yl=({type:e,value:t})=>{const{formatDate:n,formatTime:a,formatNumber:s}=(0,A.useIntl)();let i=t;if(e==="date"&&(i=n(P0()(t),{dateStyle:"full"})),e==="datetime"&&(i=n(t,{dateStyle:"full",timeStyle:"short"})),e==="time"){const[l,u,c]=t.split(":"),d=new Date;d.setHours(l),d.setMinutes(u),d.setSeconds(c),i=a(d,{numeric:"auto",style:"short"})}if(["float","decimal"].includes(e)){const l=R0(t);i=s(t,{minimumFractionDigits:l,maximumFractionDigits:l})}return["integer","biginteger"].includes(e)&&(i=s(t,{maximumFractionDigits:0})),fs()(i)};yl.propTypes={type:o().string.isRequired,value:o().any.isRequired};const jt=yl;var M0=Object.defineProperty,hl=Object.getOwnPropertySymbols,T0=Object.prototype.hasOwnProperty,w0=Object.prototype.propertyIsEnumerable,bl=(e,t,n)=>t in e?M0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,I0=(e,t)=>{for(var n in t||(t={}))T0.call(t,n)&&bl(e,n,t[n]);if(hl)for(var n of hl(t))w0.call(t,n)&&bl(e,n,t[n]);return e},D0=(e,t,n)=>new Promise((a,s)=>{var i=c=>{try{u(n.next(c))}catch(d){s(d)}},l=c=>{try{u(n.throw(c))}catch(d){s(d)}},u=c=>c.done?a(c.value):Promise.resolve(c.value).then(i,l);u((n=n.apply(e,t)).next())});const x0=(0,S.default)(L.Typography)`
  max-width: 500px;
`,S0=(e,t)=>D0(void 0,null,function*(){const{data:{results:n,pagination:a}}=yield ge.be.get(e);return t(),{results:n,pagination:a}}),El=({fieldSchema:e,metadatas:t,queryInfos:n,name:a,rowId:s,value:i})=>{const{formatMessage:l}=(0,A.useIntl)(),{notifyStatus:u}=(0,Wr.useNotifyAT)(),c=ve(`${n.endPoint}/${s}/${a.split(".")[0]}`),[d,m]=(0,r.useState)(!1),f=r.createElement(r.Fragment,null,r.createElement(gl.Badge,null,i.count)," ",l({id:"content-manager.containers.ListPage.items",defaultMessage:"{number, plural, =0 {items} one {item} other {items}}"},{number:i.count})),y=()=>{const E=l({id:v("DynamicTable.relation-loaded"),defaultMessage:"Relations have been loaded"});u(E)},{data:h,status:b}=(0,Dr.useQuery)([e.targetModel,s],()=>S0(c,y),{enabled:d,staleTime:0});return r.createElement(w.Box,I0({},g.stopPropagation),r.createElement(Ae.SimpleMenu,{label:f,size:"S",onOpen:()=>m(!0),onClose:()=>m(!1)},b!=="success"&&r.createElement(Ae.MenuItem,{"aria-disabled":!0},r.createElement(C0.Loader,{small:!0},l({id:v("DynamicTable.relation-loading"),defaultMessage:"Relations are loading"}))),b==="success"&&r.createElement(r.Fragment,null,h==null?void 0:h.results.map(E=>r.createElement(Ae.MenuItem,{key:E.id,"aria-disabled":!0},r.createElement(x0,{ellipsis:!0},r.createElement(jt,{type:t.mainField.schema.type,value:E[t.mainField.name]||E.id})))),(h==null?void 0:h.pagination.total)>10&&r.createElement(Ae.MenuItem,{"aria-disabled":!0,"aria-label":l({id:v("DynamicTable.relation-more"),defaultMessage:"This relation contains more entities than displayed"})},r.createElement(L.Typography,null,"...")))))};El.propTypes={fieldSchema:o().shape({relation:o().string,targetModel:o().string,type:o().string.isRequired}).isRequired,metadatas:o().shape({mainField:o().shape({name:o().string.isRequired,schema:o().shape({type:o().string.isRequired}).isRequired})}).isRequired,name:o().string.isRequired,rowId:o().oneOfType([o().string,o().number]).isRequired,queryInfos:o().shape({endPoint:o().string.isRequired}).isRequired,value:o().object.isRequired};const L0=El,F0=(0,S.default)(L.Typography)`
  max-width: 500px;
`,vl=({metadatas:e,value:t})=>r.createElement(F0,{textColor:"neutral800",ellipsis:!0},r.createElement(jt,{type:e.mainField.schema.type,value:t[e.mainField.name]||t.id}));vl.propTypes={metadatas:o().shape({mainField:o().shape({name:o().string.isRequired,schema:o().shape({type:o().string.isRequired}).isRequired})}).isRequired,value:o().object.isRequired};const k0=vl;var A0=Object.defineProperty,Cl=Object.getOwnPropertySymbols,j0=Object.prototype.hasOwnProperty,$0=Object.prototype.propertyIsEnumerable,Ol=(e,t,n)=>t in e?A0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,B0=(e,t)=>{for(var n in t||(t={}))j0.call(t,n)&&Ol(e,n,t[n]);if(Cl)for(var n of Cl(t))$0.call(t,n)&&Ol(e,n,t[n]);return e};const N0=(0,S.default)(L.Typography)`
  max-width: 500px;
`,Pl=({value:e,metadatas:t})=>{const{formatMessage:n}=(0,A.useIntl)(),{mainField:{type:a,name:s}}=t,i=r.createElement(r.Fragment,null,r.createElement(gl.Badge,null,e.length)," ",n({id:"content-manager.containers.ListPage.items",defaultMessage:"{number, plural, =0 {items} one {item} other {items}}"},{number:e.length}));return r.createElement(w.Box,B0({},g.stopPropagation),r.createElement(Ae.SimpleMenu,{label:i,size:"S"},e.map(l=>r.createElement(Ae.MenuItem,{key:l.id,"aria-disabled":!0},r.createElement(N0,{ellipsis:!0},r.createElement(jt,{type:a,value:l[s]||l.id}))))))};Pl.propTypes={metadatas:o().shape({mainField:o().shape({name:o().string,type:o().string,value:o().string})}).isRequired,value:o().array.isRequired};const V0=Pl,q0=(0,S.default)(L.Typography)`
  max-width: 250px;
`,Rl=({value:e,metadatas:t})=>{const{mainField:n}=t,a=e[n.name];return r.createElement(cr.Tooltip,{label:a},r.createElement(q0,{textColor:"neutral800",ellipsis:!0},r.createElement(jt,{type:n.type,value:a})))};Rl.propTypes={metadatas:o().shape({mainField:o().shape({name:o().string,type:o().string,value:o().string})}).isRequired,value:o().object.isRequired};const W0=Rl;var z0=p(80022),Ml=p.n(z0);function Tl(e){return["oneToOne","manyToOne","oneToOneMorph"].includes(e)}function U0(e,t,n,a){if(e==="component"){const{mainField:{name:s,type:i}}=n;if(a!=null&&a.repeatable)return t.length>0;const l=t==null?void 0:t[s];return s==="id"&&![void 0,null].includes(l)?!0:St(i)&&i!=="biginteger"&&s!=="id"?Ml()(l):!Re()(l)}return e==="relation"?Tl(a.relation)?!Re()(t):t.count>0:St(e)&&e!=="biginteger"?Ml()(t):e==="boolean"?t!==null:!Re()(t)}var H0=Object.defineProperty,wl=Object.getOwnPropertySymbols,_0=Object.prototype.hasOwnProperty,Z0=Object.prototype.propertyIsEnumerable,Il=(e,t,n)=>t in e?H0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,G0=(e,t)=>{for(var n in t||(t={}))_0.call(t,n)&&Il(e,n,t[n]);if(wl)for(var n of wl(t))Z0.call(t,n)&&Il(e,n,t[n]);return e};const Q0=(0,S.default)(L.Typography)`
  max-width: 300px;
`,Ur=({content:e,fieldSchema:t,metadatas:n,name:a,queryInfos:s,rowId:i})=>{const{type:l}=t;if(!U0(l,e,n,t))return r.createElement(L.Typography,{textColor:"neutral800"},"-");switch(l){case"media":return t.multiple?r.createElement(v0,{value:e}):r.createElement(dl,G0({},e));case"relation":return Tl(t.relation)?r.createElement(k0,{metadatas:n,value:e}):r.createElement(L0,{fieldSchema:t,queryInfos:s,metadatas:n,value:e,name:a,rowId:i});case"component":return t.repeatable===!0?r.createElement(V0,{value:e,metadatas:n}):r.createElement(W0,{value:e,metadatas:n});default:return r.createElement(Q0,{ellipsis:!0,textColor:"neutral800"},r.createElement(jt,{type:l,value:e}))}};Ur.defaultProps={content:void 0,queryInfos:void 0},Ur.propTypes={content:o().any,fieldSchema:o().shape({component:o().string,multiple:o().bool,type:o().string.isRequired,repeatable:o().bool,relation:o().string}).isRequired,metadatas:o().object.isRequired,name:o().string.isRequired,rowId:o().oneOfType([o().string,o().number]).isRequired,queryInfos:o().shape({endPoint:o().string.isRequired})};const K0=Ur;var Y0=Object.defineProperty,J0=Object.defineProperties,X0=Object.getOwnPropertyDescriptors,fn=Object.getOwnPropertySymbols,Dl=Object.prototype.hasOwnProperty,xl=Object.prototype.propertyIsEnumerable,Sl=(e,t,n)=>t in e?Y0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$t=(e,t)=>{for(var n in t||(t={}))Dl.call(t,n)&&Sl(e,n,t[n]);if(fn)for(var n of fn(t))xl.call(t,n)&&Sl(e,n,t[n]);return e},ev=(e,t)=>J0(e,X0(t)),tv=(e,t)=>{var n={};for(var a in e)Dl.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&fn)for(var a of fn(e))t.indexOf(a)<0&&xl.call(e,a)&&(n[a]=e[a]);return n};const Hr=({canCreate:e,canDelete:t,headers:n,entriesToDelete:a,onClickDelete:s,onSelectRow:i,withMainAction:l,withBulkActions:u,rows:c})=>{const{push:d,location:{pathname:m}}=(0,te.useHistory)(),{formatMessage:f}=(0,A.useIntl)(),{trackUsage:y}=(0,g.useTracking)(),h=Zo();return r.createElement(At.Tbody,null,c.map((b,E)=>{const O=a.findIndex(C=>C===b.id)!==-1,I=f({id:"content-manager.components.DynamicTable.row-line",defaultMessage:"item line {number}"},{number:E});return r.createElement(At.Tr,$t({key:b.id},(0,g.onRowClick)({fn:()=>{y("willEditEntryFromList"),d({pathname:`${m}/${b.id}`,state:{from:m},search:h})},condition:u})),l&&r.createElement(At.Td,$t({},g.stopPropagation),r.createElement(c0.BaseCheckbox,{"aria-label":f({id:"app.component.table.select.one-entry",defaultMessage:"Select {target}"},{target:(0,pi.Pp)(b.firstname,b.lastname)}),checked:O,onChange:()=>{i({name:b.id,value:!O})}})),n.map(C=>{var x=C,{key:D,cellFormatter:W,name:F}=x,$=tv(x,["key","cellFormatter","name"]);return r.createElement(At.Td,{key:D},typeof W=="function"?W(b,$t({key:D,name:F},$)):r.createElement(K0,ev($t({content:b[F.split(".")[0]],name:F},$),{rowId:b.id})))}),u&&r.createElement(At.Td,null,r.createElement(j.Flex,$t({justifyContent:"end"},g.stopPropagation),r.createElement(Me.IconButton,{onClick:()=>{y("willEditEntryFromButton"),d({pathname:`${m}/${b.id}`,state:{from:m},search:h})},label:f({id:"app.component.table.edit",defaultMessage:"Edit {target}"},{target:I}),noBorder:!0,icon:r.createElement(ct(),null)}),e&&r.createElement(w.Box,{paddingLeft:1},r.createElement(Me.IconButton,{onClick:()=>{d({pathname:`${m}/create/clone/${b.id}`,state:{from:m},search:h})},label:f({id:"app.component.table.duplicate",defaultMessage:"Duplicate {target}"},{target:I}),noBorder:!0,icon:r.createElement(d0(),null)})),t&&r.createElement(w.Box,{paddingLeft:1},r.createElement(Me.IconButton,{onClick:()=>{y("willDeleteEntryFromList"),s(b.id)},label:f({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:I}),noBorder:!0,icon:r.createElement(qe(),null)})))))}))};Hr.defaultProps={canCreate:!1,canDelete:!1,entriesToDelete:[],onClickDelete:()=>{},onSelectRow:()=>{},rows:[],withBulkActions:!1,withMainAction:!1},Hr.propTypes={canCreate:o().bool,canDelete:o().bool,entriesToDelete:o().array,headers:o().array.isRequired,onClickDelete:o().func,onSelectRow:o().func,rows:o().array,withBulkActions:o().bool,withMainAction:o().bool};const nv=Hr;var rv=Object.defineProperty,gn=Object.getOwnPropertySymbols,Ll=Object.prototype.hasOwnProperty,Fl=Object.prototype.propertyIsEnumerable,kl=(e,t,n)=>t in e?rv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ov=(e,t)=>{for(var n in t||(t={}))Ll.call(t,n)&&kl(e,n,t[n]);if(gn)for(var n of gn(t))Fl.call(t,n)&&kl(e,n,t[n]);return e},av=(e,t)=>{var n={};for(var a in e)Ll.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&gn)for(var a of gn(e))t.indexOf(a)<0&&Fl.call(e,a)&&(n[a]=e[a]);return n};const Al=e=>{var t=e,{area:n}=t,a=av(t,["area"]);const s=Yo(n);return s?r.createElement("ul",null,s.map(i=>i.Component(a)?r.createElement(w.Box,{key:i.name,padding:3,style:{textAlign:"center"}},r.createElement(i.Component,ov({},a))):null)):null};Al.propTypes={area:o().string.isRequired};const jl=Al,$l=({isConfirmButtonLoading:e,isOpen:t,onToggleDialog:n,onConfirm:a})=>{const{formatMessage:s}=(0,A.useIntl)();return r.createElement(ke.Dialog,{onClose:n,title:s({id:"app.components.ConfirmDialog.title",defaultMessage:"Confirmation"}),labelledBy:"confirmation",describedBy:"confirm-description",isOpen:t},r.createElement(ke.DialogBody,{icon:r.createElement(xt(),null)},r.createElement(ae.Stack,{spacing:2},r.createElement(j.Flex,{justifyContent:"center"},r.createElement(L.Typography,{id:"confirm-description"},s({id:v("popUpWarning.bodyMessage.contentType.delete.all"),defaultMessage:"Are you sure you want to delete these entries?"}))),r.createElement(j.Flex,null,r.createElement(jl,{area:"contentManager.listView.deleteModalAdditionalInfos"})))),r.createElement(ke.DialogFooter,{startAction:r.createElement(ye.Button,{onClick:n,variant:"tertiary"},s({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endAction:r.createElement(ye.Button,{onClick:a,variant:"danger-light",startIcon:r.createElement(qe(),null),id:"confirm-delete",loading:e},s({id:"app.components.Button.confirm",defaultMessage:"Confirm"}))}))};$l.propTypes={isConfirmButtonLoading:o().bool.isRequired,isOpen:o().bool.isRequired,onConfirm:o().func.isRequired,onToggleDialog:o().func.isRequired};const sv=$l,Bl=({isConfirmButtonLoading:e,isOpen:t,onToggleDialog:n,onConfirm:a})=>{const{formatMessage:s}=(0,A.useIntl)();return r.createElement(ke.Dialog,{onClose:n,title:s({id:"app.components.ConfirmDialog.title",defaultMessage:"Confirmation"}),labelledBy:"confirmation",describedBy:"confirm-description",isOpen:t},r.createElement(ke.DialogBody,{icon:r.createElement(xt(),null)},r.createElement(ae.Stack,{spacing:2},r.createElement(j.Flex,{justifyContent:"center"},r.createElement(L.Typography,{id:"confirm-description"},s({id:"components.popUpWarning.message",defaultMessage:"Are you sure you want to delete this?"}))),r.createElement(j.Flex,null,r.createElement(jl,{area:"contentManager.listView.deleteModalAdditionalInfos"})))),r.createElement(ke.DialogFooter,{startAction:r.createElement(ye.Button,{onClick:n,variant:"tertiary"},s({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endAction:r.createElement(ye.Button,{onClick:a,variant:"danger-light",startIcon:r.createElement(qe(),null),id:"confirm-delete",loading:e},s({id:"app.components.Button.confirm",defaultMessage:"Confirm"}))}))};Bl.propTypes={isConfirmButtonLoading:o().bool.isRequired,isOpen:o().bool.isRequired,onConfirm:o().func.isRequired,onToggleDialog:o().func.isRequired};const iv=Bl;var lv=Object.defineProperty,cv=Object.defineProperties,uv=Object.getOwnPropertyDescriptors,Nl=Object.getOwnPropertySymbols,dv=Object.prototype.hasOwnProperty,pv=Object.prototype.propertyIsEnumerable,Vl=(e,t,n)=>t in e?lv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mv=(e,t)=>{for(var n in t||(t={}))dv.call(t,n)&&Vl(e,n,t[n]);if(Nl)for(var n of Nl(t))pv.call(t,n)&&Vl(e,n,t[n]);return e},fv=(e,t)=>cv(e,uv(t));const _r=({canCreate:e,canDelete:t,contentTypeName:n,action:a,isBulkable:s,isLoading:i,onConfirmDelete:l,onConfirmDeleteAll:u,layout:c,rows:d})=>{const{runHookWaterfall:m}=(0,g.useStrapiApp)(),f=c.contentType.options.draftAndPublish||!1,{formatMessage:y}=(0,A.useIntl)(),h=(0,fe.v9)(rl),b=(0,r.useMemo)(()=>{const O=m(Zt.No,{displayedHeaders:h,layout:c}).displayedHeaders.map(I=>{if(I.fieldSchema.type==="relation"){const C=`${I.name}.${I.metadatas.mainField.name}`;return fv(mv({},I),{name:C})}return I});return f?[...O,{key:"__published_at_temp_key__",name:"publishedAt",fieldSchema:{type:"custom"},metadatas:{label:y({id:v("containers.ListPage.table-headers.published_at")}),searchable:!1,sortable:!0},cellFormatter:I=>{const C=!Re()(I.publishedAt);return r.createElement(l0,{isPublished:C})}}]:O},[m,h,c,f,y]);return r.createElement(g.DynamicTable,{components:{ConfirmDialogDelete:iv,ConfirmDialogDeleteAll:sv},contentType:n,action:a,isLoading:i,headers:b,onConfirmDelete:l,onConfirmDeleteAll:u,onOpenDeleteAllModalTrackedEvent:"willBulkDeleteEntries",rows:d,withBulkActions:!0,withMainAction:t&&s},r.createElement(nv,{canCreate:e,canDelete:t,headers:b,rows:d,withBulkActions:!0,withMainAction:t&&s}))};_r.defaultProps={action:void 0},_r.propTypes={canCreate:o().bool.isRequired,canDelete:o().bool.isRequired,contentTypeName:o().string.isRequired,action:o().node,isBulkable:o().bool.isRequired,isLoading:o().bool.isRequired,layout:o().exact({components:o().object.isRequired,contentType:o().shape({attributes:o().object.isRequired,metadatas:o().object.isRequired,layouts:o().shape({list:o().array.isRequired,editRelations:o().array}).isRequired,options:o().object.isRequired,settings:o().object.isRequired}).isRequired}).isRequired,onConfirmDelete:o().func.isRequired,onConfirmDeleteAll:o().func.isRequired,rows:o().array.isRequired};const gv=_r,yv=e=>Object.keys(e).reduce((n,a)=>{const s=e[a];return yo(s)&&n.push(a),n},[]).sort(),ql=({layout:e})=>{const t=(0,fe.I0)(),n=(0,fe.v9)(rl),{trackUsage:a}=(0,g.useTracking)(),{formatMessage:s}=(0,A.useIntl)(),i=yv(e.contentType.attributes).map(c=>{const d=e.contentType.metadatas[c].list;return{name:c,intlLabel:{id:d.label,defaultMessage:d.label}}}),l=n.map(({name:c})=>c),u=c=>{if(a("didChangeDisplayedFields"),c.length<l.length){const d=l.filter(m=>c.indexOf(m)===-1);t(qr({name:d[0],value:!0}))}else{const d=c.filter(m=>l.indexOf(m)===-1);t(qr({name:d[0],value:!1}))}};return r.createElement(w.Box,{paddingTop:1,paddingBottom:1},r.createElement(ue.Select,{"aria-label":"change displayed fields",value:l,onChange:u,customizeContent:c=>`${c.length} currently selected`,multi:!0,size:"S"},i.map(c=>r.createElement(ue.Option,{key:c.name,value:c.name},s({id:c.intlLabel.id||c.name,defaultMessage:c.intlLabel.defaultMessage||c.name})))))};ql.propTypes={layout:o().shape({contentType:o().shape({attributes:o().object.isRequired,metadatas:o().object.isRequired,layouts:o().shape({list:o().array.isRequired,editRelations:o().array}).isRequired,options:o().object.isRequired,settings:o().object.isRequired}).isRequired}).isRequired};const hv=(0,r.memo)(ql),Zr=({pagination:e})=>r.createElement(w.Box,{paddingTop:4},r.createElement(j.Flex,{alignItems:"flex-end",justifyContent:"space-between"},r.createElement(g.PageSizeURLQuery,{trackedEvent:"willChangeNumberOfEntriesPerPage"}),r.createElement(g.PaginationURLQuery,{pagination:e})));Zr.defaultProps={pagination:{pageCount:0,pageSize:10,total:0}},Zr.propTypes={pagination:o().shape({page:o().number,pageCount:o().number,pageSize:o().number,total:o().number})};const bv=Zr,Ev=["json","component","media","richtext","dynamiczone","password"],vv=["createdAt","updatedAt"],Cv=(e,t)=>{const{allPermissions:n}=(0,g.useRBACProvider)(),a=(0,g.findMatchingPermissions)(n,[{action:"plugin::content-manager.explorer.read",subject:t}]),s=R()(a,["0","properties","fields"],[]);return Object.keys(R()(e,["attributes"]),{}).filter(u=>{const c=R()(e,["attributes",u],{});return!(!c.type||Ev.includes(c.type)||!s.includes(u)&&u!=="id"&&!vv.includes(u))}).sort()};var Ov=p(23899),Pv=p.n(Ov);const Wl=({displayedFilters:e})=>{const[t,n]=(0,r.useState)(!1),{formatMessage:a}=(0,A.useIntl)(),s=(0,r.useRef)(),{trackUsage:i}=(0,g.useTracking)(),l=()=>{t||i("willFilterEntries"),n(u=>!u)};return r.createElement(r.Fragment,null,r.createElement(w.Box,{paddingTop:1,paddingBottom:1},r.createElement(ye.Button,{variant:"tertiary",ref:s,startIcon:r.createElement(Pv(),null),onClick:l,size:"S"},a({id:"app.utils.filters",defaultMessage:"Filters"})),t&&r.createElement(g.FilterPopoverURLQuery,{displayedFilters:e,isVisible:t,onToggle:l,source:s})),r.createElement(g.FilterListURLQuery,{filtersSchema:e}))};Wl.propTypes={displayedFilters:o().arrayOf(o().shape({name:o().string.isRequired,metadatas:o().shape({label:o().string}),fieldSchema:o().shape({type:o().string})})).isRequired};const Rv=Wl,zl=({contentType:e,slug:t,metadatas:n})=>{const s=Cv(e,t).map(i=>{const l=e.attributes[i],{type:u,enum:c}=l,d={name:"didFilterEntries",properties:{useRelation:u==="relation"}},{mainField:m,label:f}=n[i].list;return{name:i,metadatas:{label:f},fieldSchema:{type:u,options:c,mainField:m},trackedEvent:d}});return r.createElement(Rv,{displayedFilters:s})};zl.propTypes={contentType:o().object.isRequired,metadatas:o().object.isRequired,slug:o().string.isRequired};const Mv=zl;var Tv=p(98399),wv=Object.defineProperty,Iv=Object.defineProperties,Dv=Object.getOwnPropertyDescriptors,Ul=Object.getOwnPropertySymbols,xv=Object.prototype.hasOwnProperty,Sv=Object.prototype.propertyIsEnumerable,Hl=(e,t,n)=>t in e?wv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Lv=(e,t)=>{for(var n in t||(t={}))xv.call(t,n)&&Hl(e,n,t[n]);if(Ul)for(var n of Ul(t))Sv.call(t,n)&&Hl(e,n,t[n]);return e},Fv=(e,t)=>Iv(e,Dv(t)),Gr=(e,t,n)=>new Promise((a,s)=>{var i=c=>{try{u(n.next(c))}catch(d){s(d)}},l=c=>{try{u(n.throw(c))}catch(d){s(d)}},u=c=>c.done?a(c.value):Promise.resolve(c.value).then(i,l);u((n=n.apply(e,t)).next())});const kv=De.Z.contentManager,Av=(0,S.default)(Me.IconButton)`
  svg {
    path {
      fill: ${({theme:e})=>e.colors.neutral900};
    }
  }
`;function _l({canCreate:e,canDelete:t,canRead:n,data:a,getData:s,getDataSucceeded:i,isLoading:l,layout:u,pagination:c,slug:d}){const{total:m}=c,{contentType:{metadatas:f,settings:{bulkable:y,filterable:h,searchable:b}}}=u,E=(0,g.useNotification)(),{trackUsage:O}=(0,g.useTracking)(),{refetchPermissions:I}=(0,g.useRBACProvider)(),C=(0,r.useRef)(O),x=(0,r.useRef)(I),{notifyStatus:D}=(0,Wr.useNotifyAT)();(0,g.useFocusWhenNavigate)();const[{query:W}]=(0,g.useQueryParams)(),F=ei(W),$=(0,We.stringify)({plugins:W.plugins},{encode:!1}),{pathname:N}=(0,te.useLocation)(),{push:G}=(0,te.useHistory)(),{formatMessage:V}=(0,A.useIntl)(),_=u.contentType,k=R()(_,"options.draftAndPublish",!1),Z=(0,r.useRef)(""),B=(0,r.useCallback)((M,H)=>Gr(this,null,function*(){s();try{const re=H?{cancelToken:H.token}:null,{data:{results:ce,pagination:me}}=yield ge.be.get(M,re);D(V({id:v("utils.data-loaded"),defaultMessage:"{number, plural, =1 {# entry has} other {# entries have}} successfully been loaded"},{number:me.count})),i(me,ce)}catch(re){if(Se().isCancel(re))return;if(R()(re,"response.status",null)===403){yield x.current(),E({type:"info",message:{id:v("permissions.not-allowed.update")}}),G("/");return}Tv.error(re),E({type:"warning",message:{id:v("error.model.fetch")}})}}),[V,s,i,D,G,E]),Y=(0,r.useCallback)(M=>Gr(this,null,function*(){try{yield ge.be.post(ve(`collection-types/${d}/actions/bulkDelete`),{ids:M});const H=ve(`collection-types/${d}${F}`);B(H),C.current("didBulkDeleteEntries")}catch(H){E({type:"warning",message:{id:v("error.record.delete")}})}}),[B,F,d,E]),T=(0,r.useCallback)(M=>Gr(this,null,function*(){try{yield ge.be.delete(ve(`collection-types/${d}/${M}`));const H=ve(`collection-types/${d}${F}`);B(H),E({type:"success",message:{id:v("success.record.delete")}})}catch(H){const re=R()(H,"response.payload.message",V({id:v("error.record.delete")}));E({type:"warning",message:re})}}),[d,F,B,E,V]);(0,r.useEffect)(()=>{const H=Se().CancelToken.source(),re=n,ce=ve(`collection-types/${d}${F}`);return re&&ce.includes(Z.current)&&B(ce,H),()=>{Z.current=d,H.cancel("Operation canceled by the user.")}},[n,s,d,F,i,B]);const z=V({id:v("header.name"),defaultMessage:"Content"}),Q=V({id:_.info.displayName,defaultMessage:_.info.displayName||z}),K=n?V({id:v("pages.ListView.header-subtitle"),defaultMessage:"{number, plural, =0 {# entries} one {# entry} other {# entries}} found"},{number:m}):null,P=M=>e?r.createElement(ye.Button,Fv(Lv({},M),{onClick:()=>{const H=k?{status:"draft"}:{};C.current("willCreateEntry",H),G({pathname:`${N}/create`,search:W.plugins?$:""})},startIcon:r.createElement(mt(),null)}),V({id:v("HeaderLayout.button.label-add-entry"),defaultMessage:"Create new entry"})):null;return r.createElement(oe.Main,{"aria-busy":l},r.createElement(X.HeaderLayout,{primaryAction:P(),subtitle:K,title:Q,navigationAction:r.createElement(g.Link,{startIcon:r.createElement(ln(),null),to:"/content-manager/"},V({id:"global.back",defaultMessage:"Back"}))}),!n&&r.createElement(X.ActionLayout,{endActions:r.createElement(Kt,{area:"contentManager.listView.actions"})}),n&&r.createElement(X.ActionLayout,{endActions:r.createElement(r.Fragment,null,r.createElement(Kt,{area:"contentManager.listView.actions"}),r.createElement(hv,{layout:u}),r.createElement(g.CheckPermissions,{permissions:kv.collectionTypesConfigurations},r.createElement(w.Box,{paddingTop:1,paddingBottom:1},r.createElement(Av,{onClick:()=>{O("willEditListLayout"),G({pathname:`${d}/configurations/list`,search:$})},icon:r.createElement($i(),null),label:V({id:"app.links.configure-view",defaultMessage:"Configure the view"})})))),startActions:r.createElement(r.Fragment,null,b&&r.createElement(g.SearchURLQuery,{label:V({id:"app.component.search.label",defaultMessage:"Search for {target}"},{target:Q}),placeholder:V({id:"app.component.search.placeholder",defaultMessage:"Search..."}),trackedEvent:"didSearch"}),h&&r.createElement(Mv,{contentType:_,slug:d,metadatas:f}))}),r.createElement(X.ContentLayout,null,n?r.createElement(r.Fragment,null,r.createElement(gv,{canCreate:e,canDelete:t,contentTypeName:Q,onConfirmDeleteAll:Y,onConfirmDelete:T,isBulkable:y,isLoading:l,layout:u,rows:a,action:P({variant:"secondary"})}),r.createElement(bv,{pagination:{pageCount:(c==null?void 0:c.pageCount)||1}})):r.createElement(g.NoPermissions,null)))}_l.propTypes={canCreate:o().bool.isRequired,canDelete:o().bool.isRequired,canRead:o().bool.isRequired,data:o().array.isRequired,layout:o().exact({components:o().object.isRequired,contentType:o().shape({attributes:o().object.isRequired,metadatas:o().object.isRequired,info:o().shape({displayName:o().string.isRequired}).isRequired,layouts:o().shape({list:o().array.isRequired,editRelations:o().array}).isRequired,options:o().object.isRequired,settings:o().object.isRequired}).isRequired}).isRequired,isLoading:o().bool.isRequired,getData:o().func.isRequired,getDataSucceeded:o().func.isRequired,pagination:o().shape({total:o().number.isRequired,pageCount:o().number}).isRequired,slug:o().string.isRequired};const jv=i0();function $v(e){return(0,nl.bindActionCreators)({getData:XE,getDataSucceeded:e0,onChangeListHeaders:qr,onResetListHeaders:t0},e)}const Bv=(0,fe.$j)(jv,$v),Nv=(0,nl.compose)(Bv)((0,r.memo)(_l,He()));var Vv=Object.defineProperty,Zl=Object.getOwnPropertySymbols,qv=Object.prototype.hasOwnProperty,Wv=Object.prototype.propertyIsEnumerable,Gl=(e,t,n)=>t in e?Vv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ql=(e,t)=>{for(var n in t||(t={}))qv.call(t,n)&&Gl(e,n,t[n]);if(Zl)for(var n of Zl(t))Wv.call(t,n)&&Gl(e,n,t[n]);return e};const Qr=e=>{const t=(0,r.useMemo)(()=>Po(e.slug),[e.slug]),{isLoading:n,allowedActions:a}=(0,g.useRBAC)(t,e.permissions);return n?r.createElement(g.LoadingIndicatorPage,null):r.createElement(Nv,Ql(Ql({},e),a))};Qr.defaultProps={permissions:[]},Qr.propTypes={permissions:o().array,slug:o().string.isRequired};const zv=(0,r.memo)(Qr,(e,t)=>{const n=(0,g.difference)(e,t);return Object.keys(n).filter(s=>s!=="state").length>0});var Uv=Object.defineProperty,Hv=Object.defineProperties,_v=Object.getOwnPropertyDescriptors,yn=Object.getOwnPropertySymbols,Kl=Object.prototype.hasOwnProperty,Yl=Object.prototype.propertyIsEnumerable,Jl=(e,t,n)=>t in e?Uv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zv=(e,t)=>{for(var n in t||(t={}))Kl.call(t,n)&&Jl(e,n,t[n]);if(yn)for(var n of yn(t))Yl.call(t,n)&&Jl(e,n,t[n]);return e},Gv=(e,t)=>Hv(e,_v(t)),Qv=(e,t)=>{var n={};for(var a in e)Kl.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&yn)for(var a of yn(e))t.indexOf(a)<0&&Yl.call(e,a)&&(n[a]=e[a]);return n};const Xl=e=>{var t=e,{layout:n}=t,a=Qv(t,["layout"]);const s=(0,fe.I0)(),{replace:i}=(0,te.useHistory)(),[{query:l,rawQuery:u}]=(0,g.useQueryParams)(),c=Qo(l,a.slug,"listView"),d=_o(a.slug);return(0,r.useEffect)(()=>{u||i(d)},[u,i,d]),(0,r.useEffect)(()=>{s(r0(n))},[s,n]),(0,r.useEffect)(()=>()=>{s(n0())},[s]),c?r.createElement(zv,Gv(Zv({},a),{layout:n,permissions:c})):null};Xl.propTypes={layout:o().exact({components:o().object.isRequired,contentType:o().shape({attributes:o().object.isRequired,metadatas:o().object.isRequired,layouts:o().shape({list:o().array.isRequired,editRelations:o().array}).isRequired,options:o().object.isRequired,settings:o().object.isRequired,pluginOptions:o().object}).isRequired}).isRequired,slug:o().string.isRequired};const Kv=Xl,Yv=(e,t)=>ge.be.put(ve(`content-types/${t}/configuration`),e),Jv=(0,S.default)(j.Flex)`
  gap: ${({theme:e})=>e.spaces[4]};
`,Kr=({modifiedData:e,onChange:t,sortOptions:n})=>{const{formatMessage:a}=(0,A.useIntl)(),{settings:s}=e;return r.createElement(r.Fragment,null,r.createElement(w.Box,{paddingBottom:4},r.createElement(L.Typography,{variant:"delta",as:"h2"},a({id:v("containers.SettingPage.settings"),defaultMessage:"Settings"}))),r.createElement(Jv,{justifyContent:"space-between",wrap:"wrap",paddingBottom:6},r.createElement(kt.ToggleInput,{label:a({id:v("form.Input.search"),defaultMessage:"Enable search"}),onChange:i=>{t({target:{name:"settings.searchable",value:i.target.checked}})},onLabel:a({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"on"}),offLabel:a({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"off"}),name:"settings.searchable",checked:s.searchable}),r.createElement(kt.ToggleInput,{label:a({id:v("form.Input.filters"),defaultMessage:"Enable filters"}),onChange:i=>{t({target:{name:"settings.filterable",value:i.target.checked}})},onLabel:a({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"on"}),offLabel:a({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"off"}),name:"settings.filterable",checked:s.filterable}),r.createElement(kt.ToggleInput,{label:a({id:v("form.Input.bulkActions"),defaultMessage:"Enable bulk actions"}),onChange:i=>{t({target:{name:"settings.bulkable",value:i.target.checked}})},onLabel:a({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"on"}),offLabel:a({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"off"}),name:"settings.bulkable",checked:s.bulkable})),r.createElement(le.Grid,{gap:4},r.createElement(le.GridItem,{s:12,col:6},r.createElement(ue.Select,{label:a({id:v("form.Input.pageEntries"),defaultMessage:"Entries per page"}),hint:a({id:v("form.Input.pageEntries.inputDescription"),defaultMessage:"Note: You can override this value in the Collection Type settings page."}),onChange:i=>t({target:{name:"settings.pageSize",value:i}}),name:"settings.pageSize",value:e.settings.pageSize||""},[10,20,50,100].map(i=>r.createElement(ue.Option,{key:i,value:i},i)))),r.createElement(le.GridItem,{s:12,col:3},r.createElement(ue.Select,{label:a({id:v("form.Input.defaultSort"),defaultMessage:"Default sort attribute"}),onChange:i=>t({target:{name:"settings.defaultSortBy",value:i}}),name:"settings.defaultSortBy",value:e.settings.defaultSortBy||""},n.map(i=>r.createElement(ue.Option,{key:i,value:i},i)))),r.createElement(le.GridItem,{s:12,col:3},r.createElement(ue.Select,{label:a({id:v("form.Input.sort.order"),defaultMessage:"Default sort order"}),onChange:i=>t({target:{name:"settings.defaultSortOrder",value:i}}),name:"settings.defaultSortOrder",value:e.settings.defaultSortOrder||""},["ASC","DESC"].map(i=>r.createElement(ue.Option,{key:i,value:i},i))))))};Kr.defaultProps={modifiedData:{},sortOptions:[]},Kr.propTypes={modifiedData:o().object,onChange:o().func.isRequired,sortOptions:o().array};const Xv=Kr,Yr=S.default.button`
  display: flex;
  align-items: center;
  height: ${({theme:e})=>e.spaces[7]};

  &:last-child {
    padding: 0 ${({theme:e})=>e.spaces[3]};
  }
`,ec=(0,S.default)(Yr)`
  padding: 0 ${({theme:e})=>e.spaces[3]};
  border-right: 1px solid ${({theme:e})=>e.colors.neutral150};
  cursor: all-scroll;

  svg {
    width: ${12/16}rem;
    height: ${12/16}rem;
  }
`,eC=(0,S.default)(j.Flex)`
  max-height: ${32/16}rem;
  cursor: pointer;

  svg {
    width: ${10/16}rem;
    height: ${10/16}rem;

    path {
      fill: ${({theme:e})=>e.colors.neutral600};
    }
  }

  &:hover {
    background-color: ${({theme:e})=>e.colors.primary100};
    border-color: ${({theme:e})=>e.colors.primary200};

    svg {
      path {
        fill: ${({theme:e})=>e.colors.primary600};
      }
    }

    ${L.Typography} {
      color: ${({theme:e})=>e.colors.primary600};
    }

    ${ec} {
      border-right: 1px solid ${({theme:e})=>e.colors.primary200};
    }
  }
`,tC=(0,S.default)(w.Box)`
  &:last-child {
    padding-right: ${({theme:e})=>e.spaces[3]};
  }
`,tc=({index:e,isDraggingSibling:t,labelField:n,onClickEditField:a,onMoveField:s,onRemoveField:i,name:l,setIsDraggingSibling:u})=>{const{formatMessage:c}=(0,A.useIntl)(),d=(0,r.useRef)(null),m=(0,r.useRef)(null),[,f]=(0,r.useState)(!1),y=(0,r.useRef)(),h=lo(n),b=()=>{y.current&&y.current.click()},[,E]=(0,Te.useDrop)({accept:Pe.FIELD,hover(D,W){if(!m.current)return;const F=D.index,$=e;if(F===$)return;const N=m.current.getBoundingClientRect(),G=(N.right-N.left)/2,_=W.getClientOffset().x-N.left;F>$&&_>G||F<$&&_<G||(s(F,$),D.index=$)}}),[{isDragging:O},I,C]=(0,Te.useDrag)({type:Pe.FIELD,item:()=>({index:e,labelField:n,name:l}),collect:D=>({isDragging:D.isDragging()}),end:()=>{u(!1)}});(0,r.useEffect)(()=>{C((0,en.rX)(),{captureDraggingState:!1})},[C]),(0,r.useEffect)(()=>{O&&u(!0)},[O,u]),(0,r.useEffect)(()=>{t||f(D=>!D)},[t]);const x={dragRef:I(d),dropRef:E(m)};return r.createElement(tC,{ref:x?x.dropRef:null},O&&r.createElement(Cn,{transparent:!0,labelField:h}),!O&&t&&r.createElement(Cn,{isSibling:!0,labelField:h}),!O&&!t&&r.createElement(eC,{borderColor:"neutral150",background:"neutral100",hasRadius:!0,justifyContent:"space-between",onClick:b,isDragging:O},r.createElement(ae.Stack,{horizontal:!0,spacing:3},r.createElement(ec,{as:"span","aria-label":c({id:v("components.DraggableCard.move.field"),defaultMessage:"Move {item}"},{item:l}),onClick:D=>D.stopPropagation(),ref:x.dragRef,type:"button"},r.createElement(rt(),null)),r.createElement(L.Typography,{fontWeight:"bold"},h)),r.createElement(j.Flex,{paddingLeft:3},r.createElement(Yr,{ref:y,onClick:D=>{D.stopPropagation(),a(l)},"aria-label":c({id:v("components.DraggableCard.edit.field"),defaultMessage:"Edit {item}"},{item:l}),type:"button"},r.createElement(ct(),null)),r.createElement(Yr,{onClick:i,"data-testid":`delete-${l}`,"aria-label":c({id:v("components.DraggableCard.delete.field"),defaultMessage:"Delete {item}"},{item:l}),type:"button"},r.createElement(bn(),null)))))};tc.propTypes={index:o().number.isRequired,isDraggingSibling:o().bool.isRequired,labelField:o().string.isRequired,name:o().string.isRequired,onClickEditField:o().func.isRequired,onMoveField:o().func.isRequired,onRemoveField:o().func.isRequired,setIsDraggingSibling:o().func.isRequired};const nC=tc,nc=(0,S.default)(w.Box)`
  flex: ${({size:e})=>e};
`,rC=(0,S.default)(nc)`
  overflow-x: scroll;
  overflow-y: hidden;
`,oC=(0,S.default)(nc)`
  max-width: ${32/16}rem;
`,rc=({displayedFields:e,listRemainingFields:t,metadatas:n,onAddField:a,onClickEditField:s,onMoveField:i,onRemoveField:l})=>{const{formatMessage:u}=(0,A.useIntl)(),[c,d]=(0,r.useState)(!1),[m,f]=(0,r.useState)(null),y=(0,r.useRef)();function h(...E){f("add"),a(...E)}function b(...E){f("remove"),l(...E)}return(0,r.useEffect)(()=>{m==="add"&&(y==null?void 0:y.current)&&(y.current.scrollLeft=y.current.scrollWidth)},[e,m]),r.createElement(r.Fragment,null,r.createElement(w.Box,{paddingBottom:4},r.createElement(L.Typography,{variant:"delta",as:"h2"},u({id:v("containers.SettingPage.view"),defaultMessage:"View"}))),r.createElement(j.Flex,{paddingTop:4,paddingLeft:4,paddingRight:4,borderColor:"neutral300",borderStyle:"dashed",borderWidth:"1px",hasRadius:!0},r.createElement(rC,{size:"1",paddingBottom:4,ref:y},r.createElement(ae.Stack,{horizontal:!0,spacing:3},e.map((E,O)=>r.createElement(nC,{key:E,index:O,isDraggingSibling:c,onMoveField:i,onClickEditField:s,onRemoveField:I=>b(I,O),name:E,labelField:n[E].list.label||E,setIsDraggingSibling:d})))),r.createElement(oC,{size:"auto",paddingBottom:4},r.createElement(Ae.SimpleMenu,{label:u({id:v("components.FieldSelect.label"),defaultMessage:"Add a field"}),as:Me.IconButton,icon:r.createElement(mt(),null),disabled:t.length<=0,"data-testid":"add-field"},t.map(E=>r.createElement(Ae.MenuItem,{key:E,onClick:()=>h(E)},E))))))};rc.propTypes={displayedFields:xe.PropTypes.array.isRequired,listRemainingFields:xe.PropTypes.array.isRequired,metadatas:xe.PropTypes.objectOf(xe.PropTypes.shape({list:xe.PropTypes.shape({label:xe.PropTypes.string})})).isRequired,onAddField:xe.PropTypes.func.isRequired,onClickEditField:xe.PropTypes.func.isRequired,onMoveField:xe.PropTypes.func.isRequired,onRemoveField:xe.PropTypes.func.isRequired};const aC=rc,sC=(0,S.default)(j.Flex)`
  svg {
    width: ${32/16}rem;
    height: ${24/16}rem;
    margin-right: ${({theme:e})=>e.spaces[3]};
  }
`,oc=({attributes:e,fieldForm:t,fieldToEdit:n,onCloseModal:a,onChangeEditLabel:s,onSubmit:i,type:l})=>{const{formatMessage:u}=(0,A.useIntl)(),c=e[n].relationType;let d=!["media","relation"].includes(l);return["oneWay","oneToOne","manyToOne"].includes(c)&&(d=!0),r.createElement(Ye.ModalLayout,{onClose:a,labelledBy:"title"},r.createElement("form",{onSubmit:i},r.createElement(Ye.ModalHeader,null,r.createElement(sC,null,r.createElement(Qi,{type:l}),r.createElement(L.Typography,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"title"},u({id:v("containers.ListSettingsView.modal-form.edit-label"),defaultMessage:"Edit {fieldName}"},{fieldName:Lt()(n)})))),r.createElement(Ye.ModalBody,null,r.createElement(le.Grid,{gap:4},r.createElement(le.GridItem,{s:12,col:6},r.createElement(Zn.TextInput,{id:"label-input",label:u({id:v("form.Input.label"),defaultMessage:"Label"}),name:"label",onChange:m=>s(m),value:t.label,hint:u({id:v("form.Input.label.inputDescription"),defaultMessage:"This value overrides the label displayed in the table's head"})})),d&&r.createElement(le.GridItem,{s:12,col:6},r.createElement(kt.ToggleInput,{"data-testid":"Enable sort on this field",checked:t.sortable,label:u({id:v("form.Input.sort.field"),defaultMessage:"Enable sort on this field"}),name:"sortable",onChange:m=>s({target:{name:"sortable",value:m.target.checked}}),onLabel:u({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"on"}),offLabel:u({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"off"})})))),r.createElement(Ye.ModalFooter,{startActions:r.createElement(ye.Button,{onClick:a,variant:"tertiary"},u({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:r.createElement(ye.Button,{type:"submit"},u({id:"global.finish",defaultMessage:"Finish"}))})))};oc.propTypes={attributes:o().objectOf(o().shape({relationType:o().string})).isRequired,fieldForm:o().shape({label:o().string,sortable:o().bool}).isRequired,fieldToEdit:o().string.isRequired,onChangeEditLabel:o().func.isRequired,onCloseModal:o().func.isRequired,onSubmit:o().func.isRequired,type:o().string.isRequired};const iC=oc;var lC=Object.defineProperty,cC=Object.defineProperties,uC=Object.getOwnPropertyDescriptors,ac=Object.getOwnPropertySymbols,dC=Object.prototype.hasOwnProperty,pC=Object.prototype.propertyIsEnumerable,sc=(e,t,n)=>t in e?lC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mC=(e,t)=>{for(var n in t||(t={}))dC.call(t,n)&&sc(e,n,t[n]);if(ac)for(var n of ac(t))pC.call(t,n)&&sc(e,n,t[n]);return e},fC=(e,t)=>cC(e,uC(t));const gC=(e,t)=>fC(mC({},e),{initialData:t,modifiedData:t}),Jr={fieldForm:{},fieldToEdit:"",initialData:{},modifiedData:{}},yC=(e=Jr,t)=>(0,Ht.default)(e,n=>{const a=["modifiedData","layouts","list"];switch(t.type){case"ADD_FIELD":{const s=R()(e,a,[]);ne()(n,a,[...s,t.item]);break}case"MOVE_FIELD":{const s=R()(e,a,[]),{originalIndex:i,atIndex:l}=t;ne()(n,a,Rt(s,i,l));break}case"ON_CHANGE":{ne()(n,["modifiedData",...t.keys.split(".")],t.value);break}case"ON_CHANGE_FIELD_METAS":{ne()(n,["fieldForm",t.name],t.value);break}case"REMOVE_FIELD":{const s=R()(e,a,[]);ne()(n,a,s.filter((i,l)=>t.index!==l));break}case"SET_FIELD_TO_EDIT":{const{fieldToEdit:s}=t;n.fieldToEdit=s,n.fieldForm.label=R()(n,["modifiedData","metadatas",s,"list","label"],""),n.fieldForm.sortable=R()(n,["modifiedData","metadatas",s,"list","sortable"],"");break}case"UNSET_FIELD_TO_EDIT":{n.fieldForm={},n.fieldToEdit="";break}case"SUBMIT_FIELD_FORM":{const s=["modifiedData","metadatas",e.fieldToEdit,"list"];ne()(n,[...s,"label"],e.fieldForm.label),ne()(n,[...s,"sortable"],e.fieldForm.sortable);break}default:return n}}),hC=["media","richtext","dynamiczone","relation","component","json"];var bC=(e,t,n)=>new Promise((a,s)=>{var i=c=>{try{u(n.next(c))}catch(d){s(d)}},l=c=>{try{u(n.throw(c))}catch(d){s(d)}},u=c=>c.done?a(c.value):Promise.resolve(c.value).then(i,l);u((n=n.apply(e,t)).next())});const ic=({layout:e,slug:t})=>{const{formatMessage:n}=(0,A.useIntl)(),{trackUsage:a}=(0,g.useTracking)(),s=Zo(),i=(0,g.useNotification)(),{refetchData:l}=(0,r.useContext)(uo),[u,c]=(0,r.useState)(!1),d=()=>c(P=>!P),[m,f]=(0,r.useState)(!1),y=()=>f(P=>!P),[h,b]=(0,r.useReducer)(yC,Jr,()=>gC(Jr,e)),{fieldToEdit:E,fieldForm:O,initialData:I,modifiedData:C}=h,{attributes:x}=e,D=C.layouts.list,W=()=>{const{settings:{pageSize:P,defaultSortBy:M,defaultSortOrder:H},kind:re,uid:ce}=I,me=`${M}:${H}`,Fe=`${(0,We.stringify)({page:1,pageSize:P,sort:me},{encode:!1})}${s?`&${s}`:""}`;return`/content-manager/${re}/${ce}?${Fe}`},F=({target:{name:P,value:M}})=>{b({type:"ON_CHANGE",keys:P,value:P==="settings.pageSize"?parseInt(M,10):M})},$=()=>bC(void 0,null,function*(){const P=Si()(C,["layouts","settings","metadatas"]);B.mutate(P)}),N=P=>{b({type:"ADD_FIELD",item:P})},G=(P,M)=>{P.stopPropagation(),D.length===1?i({type:"info",message:{id:v("notification.info.minimumFields")}}):b({type:"REMOVE_FIELD",index:M})},V=P=>{P.preventDefault(),d(),a("willSaveContentTypeLayout")},_=P=>{b({type:"SET_FIELD_TO_EDIT",fieldToEdit:P}),y()},k=()=>{b({type:"UNSET_FIELD_TO_EDIT"}),y()},Z=P=>{P.preventDefault(),y(),b({type:"SUBMIT_FIELD_FORM"})},B=(0,Dr.useMutation)(P=>Yv(P,t),{onSuccess:()=>{a("didEditListSettings"),l()},onError:()=>{i({type:"warning",message:{id:"notification.error"}})}}),{isLoading:Y}=B,T=({target:{name:P,value:M}})=>{b({type:"ON_CHANGE_FIELD_METAS",name:P,value:M})},z=Object.entries(x).reduce((P,M)=>{const[H,re]=M,ce=yo(re),me=D.includes(H);return ce&&!me&&P.push(H),P},[]).sort(),Q=Object.entries(x).reduce((P,M)=>{const[H,{type:re}]=M;return hC.includes(re)||P.push(H),P},[]),K=(P,M)=>{b({type:"MOVE_FIELD",originalIndex:P,atIndex:M})};return r.createElement(X.Layout,null,r.createElement(oe.Main,{"aria-busy":Y},r.createElement("form",{onSubmit:V},r.createElement(X.HeaderLayout,{navigationAction:r.createElement(g.Link,{startIcon:r.createElement(ln(),null),to:W,id:"go-back"},n({id:"global.back",defaultMessage:"Back"})),primaryAction:r.createElement(ye.Button,{size:"L",startIcon:r.createElement(ht(),null),disabled:rn()(C,I),type:"submit"},n({id:"global.save",defaultMessage:"Save"})),subtitle:n({id:v("components.SettingsViewWrapper.pluginHeader.description.list-settings"),defaultMessage:"Define the settings of the list view."}),title:n({id:v("components.SettingsViewWrapper.pluginHeader.title"),defaultMessage:"Configure the view - {name}"},{name:Lt()(C.info.displayName)})}),r.createElement(X.ContentLayout,null,r.createElement(w.Box,{background:"neutral0",hasRadius:!0,shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},r.createElement(Xv,{modifiedData:C,onChange:F,sortOptions:Q}),r.createElement(w.Box,{paddingTop:6,paddingBottom:6},r.createElement(Gt.Divider,null)),r.createElement(aC,{listRemainingFields:z,displayedFields:D,onAddField:N,onClickEditField:_,onMoveField:K,onRemoveField:G,metadatas:C.metadatas}))),r.createElement(g.ConfirmDialog,{bodyText:{id:v("popUpWarning.warning.updateAllSettings"),defaultMessage:"This will modify all your settings"},iconRightButton:r.createElement(ht(),null),isConfirmButtonLoading:Y,isOpen:u,onToggleDialog:d,onConfirm:$,variantRightButton:"success-light"})),m&&r.createElement(iC,{attributes:x,fieldForm:O,fieldToEdit:E,onChangeEditLabel:T,onCloseModal:k,onSubmit:Z,type:R()(x,[E,"type"],"text")})))};ic.propTypes={layout:o().shape({uid:o().string.isRequired,settings:o().shape({bulkable:o().bool,defaultSortBy:o().string,defaultSortOrder:o().string,filterable:o().bool,pageSize:o().number,searchable:o().bool}).isRequired,metadatas:o().object.isRequired,options:o().object.isRequired,attributes:o().objectOf(o().shape({type:o().string})).isRequired}).isRequired,slug:o().string.isRequired};const EC=(0,r.memo)(ic),lc=De.Z.contentManager,cc=({match:{params:{slug:e},url:t}})=>{const{isLoading:n,layout:a,updateLayout:s}=qo(e),{rawContentTypeLayout:i,rawComponentsLayouts:l}=(0,r.useMemo)(()=>{let m={},f={};return a.contentType&&(m=zt(a.contentType)),a.components&&(f=Object.keys(a.components).reduce((y,h)=>(y[h]=zt(a.components[h]),y),{})),{rawContentTypeLayout:m,rawComponentsLayouts:f}},[a]);if((0,q.get)(a,["contentType","uid"],null)!==e||n)return r.createElement(g.LoadingIndicatorPage,null);const c=({location:{state:m},history:{goBack:f},match:{params:{id:y,origin:h}}},b)=>r.createElement(b,{slug:e,layout:a,state:m,goBack:f,id:y,origin:h}),d=[{path:"create/clone/:origin",comp:un},{path:"create",comp:un},{path:":id",comp:un},{path:"",comp:Kv}].map(({path:m,comp:f})=>r.createElement(te.Route,{key:m,path:`${t}/${m}`,render:y=>c(y,f)}));return r.createElement(jc.SV,{FallbackComponent:g.ErrorFallback},r.createElement(po.Provider,{value:a},r.createElement(te.Switch,null,r.createElement(te.Route,{path:`${t}/configurations/list`},r.createElement(g.CheckPagePermissions,{permissions:lc.collectionTypesConfigurations},r.createElement(EC,{layout:i,slug:e,updateLayout:s}))),r.createElement(te.Route,{path:`${t}/configurations/edit`},r.createElement(g.CheckPagePermissions,{permissions:lc.collectionTypesConfigurations},r.createElement(Vr,{components:l,isContentTypeView:!0,mainLayout:i,slug:e,updateLayout:s}))),d)))};cc.propTypes={match:o().shape({url:o().string.isRequired,params:o().shape({slug:o().string.isRequired}).isRequired}).isRequired};const vC=(0,r.memo)(cc);var uc=p(87541),CC=p(98399),OC=(e,t,n)=>new Promise((a,s)=>{var i=c=>{try{u(n.next(c))}catch(d){s(d)}},l=c=>{try{u(n.throw(c))}catch(d){s(d)}},u=c=>c.done?a(c.value):Promise.resolve(c.value).then(i,l);u((n=n.apply(e,t)).next())});const PC=De.Z.contentManager,RC=()=>{const[{isLoading:e,data:t},n]=(0,r.useReducer)(uc.Z,uc.q),a=(0,r.useMemo)(In,[]),{schemas:s}=(0,fe.v9)(l=>a(l),fe.wU),{uid:i}=(0,te.useParams)();return(0,r.useEffect)(()=>{const u=Se().CancelToken.source();return(d=>OC(void 0,null,function*(){try{n(nn());const{data:{data:m}}=yield ge.be.get(ve(`components/${i}/configuration`),{cancelToken:d.token});n(br(Io(m,s,"component")))}catch(m){if(Se().isCancel(m))return;CC.error(m)}}))(u),()=>{u.cancel("Operation canceled by the user.")}},[i,s]),e?r.createElement(g.LoadingIndicatorPage,null):r.createElement(g.CheckPagePermissions,{permissions:PC.componentsConfigurations},r.createElement(Vr,{components:t.components,mainLayout:t.component,slug:i}))},MC=(0,r.memo)(RC);var TC=p(64354),wC=p(97042),IC=p.n(wC);const DC=()=>{const{formatMessage:e}=(0,A.useIntl)();return(0,g.useFocusWhenNavigate)(),r.createElement(oe.Main,null,r.createElement(X.HeaderLayout,{title:e({id:v("header.name"),defaultMessage:"Content"})}),r.createElement(X.ContentLayout,null,r.createElement(TC.EmptyStateLayout,{action:r.createElement(g.LinkButton,{variant:"secondary",startIcon:r.createElement(mt(),null),to:"/plugins/content-type-builder/content-types/create-content-type"},e({id:"app.components.HomePage.create",defaultMessage:"Create your first Content-type"})),content:e({id:"content-manager.pages.NoContentType.text",defaultMessage:"You don't have any content yet, we recommend you to create your first Content-Type."}),hasRadius:!0,icon:r.createElement(IC(),{width:"10rem"}),shadow:"tableShadow"})))},xC=()=>{const{formatMessage:e}=(0,A.useIntl)();return(0,g.useFocusWhenNavigate)(),r.createElement(oe.Main,null,r.createElement(X.HeaderLayout,{title:e({id:v("header.name"),defaultMessage:"Content"})}),r.createElement(X.ContentLayout,null,r.createElement(g.NoPermissions,null)))},SC=De.Z.contentManager,dc=({match:{params:{slug:e},url:t}})=>{const{isLoading:n,layout:a,updateLayout:s}=qo(e),{rawContentTypeLayout:i,rawComponentsLayouts:l}=(0,r.useMemo)(()=>{let u={},c={};return a.contentType&&(c=zt(a.contentType)),a.components&&(u=Object.keys(a.components).reduce((d,m)=>(d[m]=zt(a.components[m]),d),{})),{rawContentTypeLayout:c,rawComponentsLayouts:u}},[a]);return n?r.createElement(g.LoadingIndicatorPage,null):r.createElement(po.Provider,{value:a},r.createElement(te.Switch,null,r.createElement(te.Route,{path:`${t}/configurations/edit`},r.createElement(g.CheckPagePermissions,{permissions:SC.singleTypesConfigurations},r.createElement(Vr,{components:l,isContentTypeView:!0,mainLayout:i,slug:e,updateLayout:s}))),r.createElement(te.Route,{path:t,render:({location:{state:u},history:{goBack:c}})=>r.createElement(un,{layout:a,slug:e,isSingleType:!0,state:u,goBack:c})})))};dc.propTypes={match:o().shape({url:o().string.isRequired,params:o().shape({slug:o().string.isRequired}).isRequired}).isRequired};const LC=(0,r.memo)(dc);var FC=p(58469),kC=p(59578),pc=p.n(kC),Bt=p(89420),AC=Object.defineProperty,jC=Object.defineProperties,$C=Object.getOwnPropertyDescriptors,mc=Object.getOwnPropertySymbols,BC=Object.prototype.hasOwnProperty,NC=Object.prototype.propertyIsEnumerable,fc=(e,t,n)=>t in e?AC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,VC=(e,t)=>{for(var n in t||(t={}))BC.call(t,n)&&fc(e,n,t[n]);if(mc)for(var n of mc(t))NC.call(t,n)&&fc(e,n,t[n]);return e},qC=(e,t)=>jC(e,$C(t));const gc=(e,t)=>(0,FC.ZP)(e,pc()(t),{keys:[n=>pc()(n.title)]}),WC=()=>{const[e,t]=(0,r.useState)(""),{formatMessage:n}=(0,A.useIntl)(),a=(0,r.useMemo)(Su,[]),{collectionTypeLinks:s,singleTypeLinks:i}=(0,fe.v9)(h=>a(h),fe.wU),l=h=>h.map(b=>qC(VC({},b),{title:n({id:b.title,defaultMessage:b.title})})),u=l(s),c=l(i),d=[{id:"collectionTypes",title:{id:v("components.LeftMenu.collection-types"),defaultMessage:"Collection Types"},searchable:!0,links:se()(gc(u,e),h=>h.title.toLowerCase())},{id:"singleTypes",title:{id:v("components.LeftMenu.single-types"),defaultMessage:"Single Types"},searchable:!0,links:se()(gc(c,e),h=>h.title.toLowerCase())}],m=()=>{t("")},f=({target:{value:h}})=>{t(h)},y=n({id:v("header.name"),defaultMessage:"Content"});return r.createElement(Bt.SubNav,{ariaLabel:y},r.createElement(Bt.SubNavHeader,{label:y,searchable:!0,value:e,onChange:f,onClear:m,searchLabel:n({id:"content-manager.components.LeftMenu.Search.label",defaultMessage:"Search for a content type"})}),r.createElement(Bt.SubNavSections,null,d.map(h=>{const b=n({id:h.title.id,defaultMessage:h.title.defaultMessage},h.title.values);return r.createElement(Bt.SubNavSection,{key:h.id,label:b,badgeLabel:h.links.length.toString()},h.links.map(E=>{const O=E.search?`?${E.search}`:"";return r.createElement(Bt.SubNavLink,{as:te.NavLink,key:E.uid,to:`${E.to}${O}`},E.title)}))})))};var Xr=p(46124);const zC=()=>({type:Xr.ZA}),UC=()=>({type:Xr.c2}),HC=(e,t,n,a)=>({type:Xr.ix,data:{authorizedCtLinks:e,authorizedStLinks:t,components:a,contentTypeSchemas:n}}),yc=(e,t,n=[])=>e.filter(a=>a.isDisplayed).map(a=>{const s=[{action:"plugin::content-manager.explorer.create",subject:a.uid},{action:"plugin::content-manager.explorer.read",subject:a.uid}],i=[{action:"plugin::content-manager.explorer.read",subject:a.uid}],l=t==="collectionTypes"?s:i,u=n.find(({uid:d})=>d===a.uid);let c=null;if(u){const d={page:1,pageSize:u.settings.pageSize,sort:`${u.settings.defaultSortBy}:${u.settings.defaultSortOrder}`};c=(0,We.stringify)(d,{encode:!1})}return{permissions:l,search:c,kind:a.kind,title:a.info.displayName,to:`/content-manager/${a.kind}/${a.uid}`,uid:a.uid,name:a.uid,isDisplayed:a.isDisplayed}}),_C=(e,t)=>{const[n,a]=(0,q.chain)(e).groupBy("kind").map((s,i)=>({name:i,links:s})).sortBy("name").value();return{collectionTypesSectionLinks:yc((0,q.get)(n,"links",[]),"collectionTypes",t),singleTypesSectionLinks:yc((0,q.get)(a,"links",[]),"singleTypes")}},hc=(e,t)=>t.map(({permissions:n})=>(0,g.hasPermissions)(e,n));var ZC=p(98399),GC=(e,t,n)=>new Promise((a,s)=>{var i=c=>{try{u(n.next(c))}catch(d){s(d)}},l=c=>{try{u(n.throw(c))}catch(d){s(d)}},u=c=>c.done?a(c.value):Promise.resolve(c.value).then(i,l);u((n=n.apply(e,t)).next())});const QC=(e,t,n)=>GC(void 0,null,function*(){try{const{data:{data:a}}=yield ge.be.get(ve("content-types-settings")),{collectionTypesSectionLinks:s,singleTypesSectionLinks:i}=_C(e,a),l=hc(t,s),u=yield Promise.all(l),c=s.filter((y,h)=>u[h]),d=hc(t,i),m=yield Promise.all(d),f=i.filter((y,h)=>m[h]);return{authorizedCtLinks:c,authorizedStLinks:f}}catch(a){return ZC.error(a),n({type:"warning",message:{id:"notification.error"}}),{authorizedCtLinks:[],authorizedStLinks:[],contentTypes:[]}}});var KC=p(98399),YC=Object.defineProperty,JC=Object.defineProperties,XC=Object.getOwnPropertyDescriptors,bc=Object.getOwnPropertySymbols,eO=Object.prototype.hasOwnProperty,tO=Object.prototype.propertyIsEnumerable,Ec=(e,t,n)=>t in e?YC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nO=(e,t)=>{for(var n in t||(t={}))eO.call(t,n)&&Ec(e,n,t[n]);if(bc)for(var n of bc(t))tO.call(t,n)&&Ec(e,n,t[n]);return e},rO=(e,t)=>JC(e,XC(t)),oO=(e,t,n)=>new Promise((a,s)=>{var i=c=>{try{u(n.next(c))}catch(d){s(d)}},l=c=>{try{u(n.throw(c))}catch(d){s(d)}},u=c=>c.done?a(c.value):Promise.resolve(c.value).then(i,l);u((n=n.apply(e,t)).next())});const aO=()=>{const e=(0,fe.I0)(),t=(0,g.useNotification)(),n=(0,fe.v9)(It()),a=(0,r.useRef)(),{allPermissions:s}=(0,g.useRBACProvider)(),{runHookWaterfall:i}=(0,g.useStrapiApp)(),u=Se().CancelToken.source(),{notifyStatus:c}=(0,Wr.useNotifyAT)(),{formatMessage:d}=(0,A.useIntl)(),m=()=>oO(void 0,null,function*(){e(zC());try{const[{data:{data:f}},{data:{data:y}}]=yield Promise.all(["components","content-types"].map(C=>ge.be.get(ve(C),{cancelToken:u.token})));c(d({id:v("App.schemas.data-loaded"),defaultMessage:"The schemas have been successfully loaded."}));const{authorizedCtLinks:h,authorizedStLinks:b}=yield QC(y,s,t),{ctLinks:E}=i(Zt.LK,{ctLinks:h,models:y}),{stLinks:O}=i(Zt.dV,{stLinks:b,models:y}),I=HC(E,O,y,f);e(I)}catch(f){if(Se().isCancel(f))return;KC.error(f),t({type:"warning",message:{id:"notification.error"}})}});return a.current=m,(0,r.useEffect)(()=>(a.current(),()=>{u.cancel("Operation canceled by the user."),e(UC())}),[e,t]),rO(nO({},n),{refetchData:a.current})},sO=De.Z.contentManager,vc=()=>{const e=(0,te.useRouteMatch)("/content-manager/:kind/:uid"),{status:t,collectionTypeLinks:n,singleTypeLinks:a,models:s,refetchData:i}=aO(),l=se()([...n,...a],y=>y.title.toLowerCase()),{pathname:u}=(0,te.useLocation)(),{formatMessage:c}=(0,A.useIntl)(),{startSection:d}=(0,g.useGuidedTour)(),m=(0,r.useRef)(d);if((0,r.useEffect)(()=>{m.current&&m.current("contentManager")},[]),t==="loading")return r.createElement(oe.Main,{"aria-busy":"true"},r.createElement(X.HeaderLayout,{title:c({id:v("header.name"),defaultMessage:"Content"})}),r.createElement(g.LoadingIndicatorPage,null));const f=s.filter(({isDisplayed:y})=>y);return l.length===0&&f.length>0&&u!=="/content-manager/403"?r.createElement(te.Redirect,{to:"/content-manager/403"}):f.length===0&&u!=="/content-manager/no-content-types"?r.createElement(te.Redirect,{to:"/content-manager/no-content-types"}):!e&&l.length>0?r.createElement(te.Redirect,{to:`${l[0].to}${l[0].search?`?${l[0].search}`:""}`}):r.createElement(X.Layout,{sideNav:r.createElement(WC,null)},r.createElement(Ac,null),r.createElement(uo.Provider,{value:{refetchData:i}},r.createElement(te.Switch,null,r.createElement(te.Route,{path:"/content-manager/components/:uid/configurations/edit"},r.createElement(g.CheckPagePermissions,{permissions:sO.componentsConfigurations},r.createElement(MC,null))),r.createElement(te.Route,{path:"/content-manager/collectionType/:slug",component:vC}),r.createElement(te.Route,{path:"/content-manager/singleType/:slug",component:LC}),r.createElement(te.Route,{path:"/content-manager/403"},r.createElement(xC,null)),r.createElement(te.Route,{path:"/content-manager/no-content-types"},r.createElement(DC,null)),r.createElement(te.Route,{path:"",component:g.NotFound}))))},iO=()=>{const{formatMessage:e}=(0,A.useIntl)();return r.createElement(r.Fragment,null,r.createElement(lt.Helmet,{title:e({id:v("plugin.name"),defaultMessage:"Content Manager"})}),r.createElement(vc,null))}},57544:()=>{},59599:()=>{},42310:()=>{},33842:()=>{},85695:()=>{}}]);
